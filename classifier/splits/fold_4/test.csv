Requirements Description,功能需求/初始化,功能需求/控制计算/姿态控制,功能需求/控制计算/姿态确定,功能需求/控制计算/模式管理,功能需求/控制计算/轨道计算,功能需求/控制计算/运行时保障/故障诊断和处理,功能需求/控制计算/运行时保障/数据有效性判断,功能需求/控制输出,功能需求/数据采集,功能需求/遥控,功能需求/遥测
功能描述：发送全姿态捕获模式数据包,0,0,0,0,0,0,0,0,0,0,1
"功能描述：
循环太阳搜索时对部件的切换（功能编号：FReq-16）。
处理：
(1)第一次滚动搜索不成功时，若另一份SPE健康，切换另一份SPE；
(2)第二次滚动搜索不成功时，若另一份MPSDP健康，切换另一份MPSDP；否则切换另一份SPE，此条件下第三次搜索不成功直接进入（4）;  
(3)第三次滚动搜索不成功时，切换另一份SPE;
(4)第四次滚动搜索不成功时，转停控;
部件切换的间隔周期，在保证不冲突的情况下，软件可自主确定。",0,0,0,0,0,1,0,0,0,0,0
"功能描述：发送控制计算机指定内存内容
处理： 
（1）接收内存读出的地址和长度
（2）将对应地址和长度的内存数据放入发送内存读出数据的存储空间内",0,0,0,0,0,0,0,0,0,0,1
功能描述：在CMG控制过程中判断CMG是否饱和而需喷气卸载；在喷气卸载过程中判断CMG是否卸载完毕。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：卫星处于应急状态
处理：
STEP1：进行姿态预估，得到姿态角和角速度
STEP2：令动量轮和磁力矩器的控制电压为0",0,0,0,1,0,0,0,0,0,0,0
功能描述：把陀螺数据、、输入并变换到星体坐标系中的、、。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：接收AOCC重要数据1-4，并处理重要数据1中的内容。
处理：应急线路加电后与OBDH通信，获得陀螺和推力器状态，若连续3个控制周期都没有成功取得重要数据，默认陀螺使用7、8、9号，推力器使用主备份推力器，模拟式太阳敏感器使用ASS1和ASS21。由于AOCC可使用的陀螺为12个（陀螺1~12），可使用的陀螺为9个（陀螺1~9），因此，无法使用陀螺10~12的数据。当恢复AOCC重要数据后，若ZT9表明使用了陀螺10~12，则设置ZT9中陀螺10~12为不可用，陀螺7、8、9为可用，陀螺工作状态BZ9按照设置后的ZT9中由小到大的顺序（从陀螺1到陀螺9）选用3个陀螺。",0,0,0,0,0,0,0,0,0,1,0
"软件需求标识：FREQ25 
软件需求名称：地检数据采集处理 
需求类别：其他 
软件需求描述：地检数据采集处理。",0,0,0,0,0,0,0,0,1,0,0
功能描述：红外数据处理,0,0,0,0,0,0,0,0,1,0,0
"功能描述：进行系统故障的检测。
",0,0,0,0,0,1,0,0,0,0,0
功能描述：接收遥控固定参数注入块的地面站位置信息功能区数据,0,0,0,0,0,0,0,0,0,1,0
"功能描述：接收星箭分离信号及天线状态数据
处理：控制计算机在收到星箭分离指令并且判断数据正确后，即认为星箭分离有效，通过方式代码的服务请求，申请OBDH停止发送星箭分离信号。天线状态的数据具体见与外总线通讯协议。",0,0,0,0,0,0,0,0,0,1,0
功能描述：置卫星姿态无控，处于自由飞行状态,0,1,0,0,0,0,0,0,0,0,0
"功能描述：为机动过程姿态确定提供初始姿态。
输入：	机动起始时刻本体对轨道估计姿态角()
输出：	机动目标相对轨道的姿态四元数
变换矩阵
本体对目标坐标系的姿态四元数",0,0,1,0,0,0,0,0,0,0,0
"“复位进入模式”中应用软件进行如下初始化工作：
置星时为2100秒；
置“向星务分系统申请重要数据”标志。
在“复位进入模式”中AO进行如下工作：
控制量输出均为0。部件开关设置为“不进行任何操作”。
响应星务分系统遥测轮询、数据遥控指令、数据注入、程序注入并进行相应处理，但不响应星务重要数据的轮询。
在“复位进入模式”中AO不进行控制律计算。",1,0,0,0,0,0,0,0,0,0,0
"功能描述：将CMG启动到标称转数。
处理：
发送指令“运行CMG启动模式”进入CMG启动模式。
	根据地面数据指令，设置CMG引入状态；
	应用软件连续5个控制周期给引入的CMG加电；
	根据自锁阀状态设置自锁阀1和/或自锁阀2开；
	上述动作完成后，自主控制引入的4或5个CMG框架角转到标称位置；
	当框架角度达到要求值后，地面发“CMG高速启动”指令，应用软件连续5个控制周期自主向引入的4或5个CMG发送“CMG高速启动”指令，令4或5个CMG的高速转速达到6000rpm；（本步骤也可通过地面指令完成）
	CMG高速启动时间为10~15分钟
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺数据处理；
调用惯性姿态陀螺预估；
调用星敏感器数据处理；
调用太阳捕获控制；//在有星敏和无星敏时均可启动CMG
调用目标姿态确定；
调用控制器输入量计算；
调用CMG奇异状态的判断及算法计算；
调用CMG启动与保持；
if(CMGStartComm =1) 给CMG发启动指令；
if(Flag_equation=0)调用相平面喷气脉宽；
调用系统故障诊断；",0,0,0,1,0,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|星时计算|FREQ1.4.1|上周期绝对星时；上周期锁存的星时计数器的值|本周期的绝对星时|""每周期无条件的进行星时的计算。处理要求见任务书。
""
|OBDH星时校时|FREQ1.4.2|""OBDH校时指令中的绝对星时;
及对应锁存的对应时间的星时计数器的值""|上周期绝对星时；上周期锁存的星时计数器的值|采用OBDH校时方式时，每秒有OBDH校时指令时进行校时。处理见任务书。
|GPS秒脉冲高精度校时|FREQ1.4.3|""GPS秒脉冲校时指令中的绝对星时;
及对应锁存的对应时间的星时计数器的值""|上周期绝对星时；上周期锁存的星时计数器的值|采用GPS秒脉冲方式时，每秒有GPS秒脉冲指令时进行校时。处理要求见任务书。
|两种校时方式的切换|FREQ1.4.4||校时方式标志|OBDH星时校时、GPS秒脉冲高精度校时是否引入系统由注入指令控制，OBDH星时校时为系统默认使用的校时方式。具体见任务书要求
|均匀校时|FREQ1.4.5|""本周期的绝对星时；
均匀校时补偿量""|""本周期的绝对星时；
""|应用软件每次进行星时计算时，将计算后的绝对星时加上均匀校时补偿量作为本周期的补偿后的绝对星时。。具体见任务书要求
|星敏感器数据星时时标处理|FREQ1.4.6|同步标志；本周期的绝对星时；本周期锁存星时计数值；锁存的星敏同步计数值|星敏感器测量数据对应的星时|具体处理要求见任务书。",0,0,0,0,0,0,0,0,1,0,0
功能描述：检测工作中的动量轮的故障并切换。,0,0,0,0,0,1,0,0,0,0,0
在AOCC上电/复位或者切机时，AOCC通过方式代码的服务申请，请求OBDH发送星上时间和AOCC重要数据。若连续64个控制周期申请AOCC重要数据失败（重要数据第一块的第一个字不是D090H或者校验和错误或者未收到重要数据），上电或者复位后的前126个周期内，连续79个控制周期星箭分离信号均有效，则卫星自主转全捕对日模式；否则应用软件按照重要数据的初始值运行。则应用软件按照重要数据的初始值运行。应用软件只有在判断到星上时间为超过1257秒时，以及重要数据均正确的情况下，才使用重要数据恢复模式。若取到的重要数据正确，但取到的星时小于1257s，则需按重要数据文件要求取星时错误的要求进行模式恢复。,0,0,0,0,0,0,0,0,0,1,0
"需求名称|功能及处理描述
对地数传天线1数据的采集与处理|对地数传天线1 LTU控制指令
对地数传天线1的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线1 LTU发控制指令，获得对地数传天线1数据并处理成对应的角度等信息。
对地数传天线2数据的采集与处理|对地数传天线2
LTU控制指令|对地数传天线2的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线2 LTU发控制指令，获得对地数传天线2数据并处理成对应的角度等信息。
中继天线数据的采集与处理|中继天线LTU控制指令|中继天线的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向中继天线 LTU发控制指令，获得中继天线数据并处理成对应的角度等信息。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：与发动机通信，输出本周期喷气脉宽。
处理：
功能编号|功能|引用文档|备注
FREQ52|UPS初始化|任务书|B
FREQ53|化学推进数据采集|任务书|B
FREQ54|推力器脉冲输出|任务书|B
FREQ55|推力器健康字设置|任务书|B
FREQ56|部件操作（程控490N点火，故障重构）|任务书|B
",0,0,0,0,0,0,0,1,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|姿态控制算法|FREQ4.0|5.4|选择控制方式，并计算控制输出
|喷气控制|FREQ4.1|5.4.1|为三轴姿态喷气控制选择喷管；并记录喷气时间等
|CMG控制说明|FREQ4.2|5.4.2.1|CMG控制说明
|CMG高速启动|FREQ4.4|5.4.2.2|启动CMG高速
|CMG群角动量释放|FREQ4.5|5.4.2.3|释放CMG群积累的角动量
|姿态控制力矩及CMG框架指令计算|FREQ4.6|5.4.2.4|使用红外、星敏、太阳定姿时，计算CMG的框架角速率指令
|偏置动量的CMG指令计算|FREQ4.7|5.4.2.5|计算在整星角动量偏置下，计算CMG控制时的框架角速率指令
|喷气卸载条件计算|FREQ4.8|5.4.4|喷气卸载进入和退出条件计算
|CMG数据处理|FREQ4.9|5.4.3|CMG数据处理
|磁卸载控制|FREQ4.10|5.4.5|根据合成角动量及地磁场强度决定并输出磁棒控制电压
|地面站位置计算|FREQ4.11|5.6.1|地面站赤经赤纬计算
|运行段帆板控制|FREQ4.12|5.5.1|三轴稳定模式下的帆板控制
|太阳帆板自主跟踪控制|FREQ4.13|5.5.2|根据帆板角误差、控制帆板跟踪太阳
|数传天线指向控制|FREQ4.14|5.6.2|根据指令完成数传天线的指向控制
|中继轨道计算|FREQ4.21|5.7.1|中继轨道计算
|中继天线指向控制|FREQ4.22|5.7.2和5.7.3|根据指令完成中继天线的指向控制
|CMG群标称角动量维持算法算法产品规范|FREQ4.15|/|规范化算法：
|直线型相平面喷气姿态控制算法产品规范|FREQ4.16|/|规范化算法：
|SGCMG群框架角速度指令解算算法产品规范|FREQ4.17|/|规范化算法：
|四阶结构滤波器算法产品规范|FREQ4.18|/|规范化算法：
|连续电压式磁卸载算法产品规范|FREQ4.19|/|规范化算法：
|地面目标矢量计算算法产品规范|FREQ4.20|/|规范化算法：
|双脉冲变轨|FREQ4.23|""任务书的
4.2.3""|根据地面注入的指令可实现两次轨控的功能
|3CMG框架角速度指令解算|FREQ4.24|5.4.2.6|当采用3CMG进行姿态控制时，根据控制器计算出的力矩，实现CMG的框架角速度指令解算
|CMG群角动量释放流程|FREQ4.25|5.4.2.7|CMG群角动量释放流程
|CMG标称框架角计算算法|FREQ4.26|5.4.2.8|根据外部标志及时间，计算CMG的标称框架角
",0,1,0,0,0,0,0,0,0,0,0
功能描述：帆板驱动线路数据处理 ,0,0,0,0,0,0,0,0,1,0,0
"功能描述：接收同步控制
处理：根据同步字的编码内容进行相应的处理：",0,0,0,0,0,0,0,0,0,1,0
"功能描述：接收TG状态数据
处理：将接收TG状态数据存储地址中内容解包TG状态。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：计算磁卸载所需的磁矩与磁力矩器工作电压。
",0,1,0,0,0,0,0,0,0,0,0
"序|需求名称|编号|功能及处理描述
|红外1数据的采集与处理|FREQ3.1|选择通讯的红外1LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
|红外2数据的采集与处理|FREQ3.2|选择通讯的红外2LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：主动段模式初始化
处理：
- WorkMode（工作模式）：0（主动段）；
- StarTime（星上时间）：0.0；
- 俯仰磁力矩器线路主份工作；
- 星务校时：禁止星务校时；
- 均匀校时：禁止均匀校时；",1,0,0,0,0,0,0,0,0,0,0
"功能描述：利用红外、数字太阳敏感器确定姿态。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：通过注入轨道参数，计算轨道外推数据。,0,0,0,0,1,0,0,0,0,0,0
功能描述：接收数据指令注入块的CMG串口指令,0,0,0,0,0,0,0,0,0,1,0
"功能描述：发送AOCC内存数据块
处理：OBDH从遥控接收到AOCC内存数据下卸指令后，向AOCC发送内存设置命令，通知AOCC内存数据下卸的段地址、偏移量及下卸长度；OBDH发出内存设置命令后100ms，开始接收AOCC内存数据。其处理过程如下：
STEP1：AOCC应用程序接收到OBDH内存下卸的指令后，进入OBDH中断服务程序（INT1）；
STEP2：AOCC应用程序读出OBDH注入的段地址、偏移地址和数据长度；
STEP3：根据段地址，偏移地址计算下卸内容的地址，并进行合法性判别。
STEP4：根据计算出的下卸内容的起始地址和长度，将下卸内容放入OBDH规定的内存中 。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：搜索并捕获太阳，完成并保持帆板对太阳定向
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：选择通讯的陀螺LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）陀螺共有三个互为备份的LTU，通过每个LTU均可获得12个陀螺的数据；每个控制周期AOCC向陀螺LTU发送取数命令来获得数据， AOCC根据GROLTUSeltFlag来确定和哪个LTU进行通讯。具体如下表所示： 
GROLTUSeltFlag|进行通讯的陀螺LTU
01H|陀螺LTU1
02H|陀螺LTU2
03H|陀螺LTU3
其它|根据LTU故障诊断的结果决定陀螺LTU的选取。初始状态为陀螺LTU1

取数指令由三个字节组成：
第一个字节为对陀螺LTU的命令设置，有四种命令格式：取数指令1、取数指令2、复位指令、地检模式指令，应用软件只自主发取数指令1和取数指令2两种格式，并由注入控制方式指定及LTU通信选择块中的陀螺LTU取数方式来切换，默认为取数指令1；其余两种格式（复位指令和地检模式指令）通过地面注入LTU命令块来设置。
第二个字节为对光纤陀螺的命令设置，有四种命令格式：测量模式1（有温度补偿）、测量模式2（无温度补偿）、地检模式1（只传地面数据）、地地检模式2（地面数据+头部测量数据），由注入控制方式指定及LTU通信选择块中的光纤陀螺指令切换方式字来切换这四种格式，默认为测量模式1（有温度补偿）。
第三个字节为前两个字节的累加和。
另外，每个控制周期AOCC还向选取的陀螺LTU发送取陀螺状态指令，指令为3字节指令（D5、AA、7F），得到的状态信息用于遥测。
（2）向选择的陀螺LTU发送完取数指令，获得陀螺LTU返回的数据，将数据转换为控制计算所需的数据格式，具体参见LTU通讯协议。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：根据动力学输入预估卫星惯性姿态。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：完成重新捕获地球，转对地三轴稳定的功能
处理过程：过程如下：
STEP1：进行红外数据采集及处理并将磁力矩器的输出电压设置为0。
STEP2：根据地球捕获的标志FEA的取值进行不同的处理：
FEA的取值|处理
FEA = A|""进行姿态预估，得到姿态角和角速度
令，
，
进行运行段喷气姿态控制	""
FEA = 5或0|""若ZT36=F，则进行星敏感器全姿态捕获
否则进行偏航捕获及转对地定向""

STEP3：根据ZT7的取值，进行相应的帆板控制。
根据ZT36的取值有两种捕获方式（星敏感器全姿态捕获和偏航捕获及转对地定向）：若ZT36=F，则进行星敏感器全姿态捕获，否则进行偏航捕获及转对地定向。FEA有三种状态0、5、A，两种捕获方式下，FEA的状态转换图如图13和图14所示：
图 13：星敏感器全姿态捕获中FEA的状态转移图
图 14：偏航捕获及转对地定向中FEA的状态转移图
其中FPA置A的条件是且",0,0,0,1,0,0,0,0,0,0,0
"功能描述：把陀螺数据测量值变换为星体三轴角速度。
",0,0,1,0,0,0,0,0,0,0,0
CCU控制周期为125ms，对于BC端每帧50ms通信同步服务，应用软件采用轮询方式查询帧序号，作为循环缓冲区子地址指针复位时判断使用。,0,0,0,0,0,0,0,0,0,1,0
功能描述：对星敏感器输出数据进行有效性判断。,0,0,0,0,0,0,1,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|三浮陀螺数据的采集与处理|FREQ1.2.1|""三浮陀螺1553B取数指令
""|陀螺1-3的速度增量|在通讯允许的条件下（每个三浮陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是角速率数据，通过任务书给出的公式计算
|光纤陀螺数据的采集与处理|FREQ1.2.2|""光纤陀螺LTU取数指令
""|陀螺4-9的速度增量|在通讯允许的条件下（每个光纤陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是即为速度增量数据，直接乘当量就可以得到需要的结果；
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：进行单轴相平面分区及控制规律计算。由决定是否要喷气；喷气的脉冲宽度；确定本时刻的。
",0,1,0,0,0,0,0,0,0,0,0
功能描述：根据帆板角误差控制帆板跟踪太阳。,0,1,0,0,0,0,0,0,0,0,0
功能描述：正常对地运行模式初始化,0,0,0,1,0,0,0,0,0,0,0
"软件需求名称：初始化 
需求类别：其他 
软件需求描述：对部件加断电指令的处理。
调用条件：上电/复位。
处理：依据“用户需求”、“任务书”、“上行注入”对非0变量进行初始化。 ",1,0,0,0,0,0,0,0,0,0,0
"功能描述：根据陀螺输入，预估卫星惯性姿态的变化。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：
 太阳捕获功能主要实现速率阻尼、俯仰搜索、滚动搜索、巡航等功能，使卫星由任意姿态进入保持对日定向巡航姿态运行。太阳捕获功能分为速率阻尼、俯仰搜索、滚动搜索和巡航四种方式（FReq-6）。
                        表5-2 方式字定义
名称|方式字定义|说明
RDSM|0|速率阻尼方式.(默认方式，程控结束后进入)
PASM|1|俯仰搜索方式
RASM|2|滚动搜索方式
CSM|3|巡航运行方式

处理： 
  （1） 模块初始化设置
   程序结束后，根据任务书5.4.5.3.1节进行模块初始化设置。考虑到地面遥控指令可以重新进入太阳捕获模式（速率阻尼初始化置陀螺故障诊断不允许），软件对模块初始化中的变量分为2个部分，其中以下部分为程控结束后只设置一次的变量：   
推力器输出状态清零；
CleNum = 0;  
采用MRE板数据设置陀螺顶替标志；（考虑S陀螺健康时才进行相应顶替）。
若有飞轮的电源状态为开，则允许飞轮进行转速控制WheelCon＝TRUE；
部分软件自身使用的变量。
（2）在太阳捕获中需要进行动量轮刹车控制以及方式控制：
动量轮刹车控制详见5.2.17节。（有动量轮加电，则进行动量轮刹车控制。）
（3）方式控制如下：
(I) 对卫星进行速率阻尼，连续35个控制周期三轴角速度绝对值（实际取最大值即可）小于0.14°/s，进入俯仰搜索方式；或者进入速率阻尼方式的时间超过2000个控制周期（256秒）后，进入俯仰搜索，开始搜索太阳。
(II)进入俯仰搜索方式，使卫星以+/-0.5/s（速率阻尼结束后进入时根据SPz13选择极性)绕Y轴转动，若5625个控制周期（720秒）后没有捕获到太阳，进入滚动搜索方式。进入滚动搜索方式后，使卫星以0.5°/s绕X轴转动。
(III) 若(II)中滚动搜索方式经过6250个控制周期（800秒）后还未见到太阳则再重复俯仰搜索和滚动搜索，则再次进入（II），即俯仰捕获方式（这种情况下b＝-0.5/s）。其中滚动搜索不成功的故障处理逻辑见5.2.14节。
(IV) 在(II)(III)过程中一旦捕获到太阳且持续时间大于2.048秒(16个控制周期)，则进入巡航方式。进入巡航模式后，控制SADA归零。
说明：捕获太阳时，对于持续时间大于2.048秒的判断，太阳连续可见（SP61/62 = 1）的条件下，俯仰搜索时，俯仰角绝对值大于1°的累计时间；滚动搜索时，滚动角绝对值大于1°的累计时间。",0,0,1,0,0,0,0,0,0,0,0
功能描述：利用数字太阳信息，进行太阳捕获，对太阳定向；,0,1,0,0,0,0,0,0,0,0,0
功能描述：若3000秒（全姿态捕获除速率阻尼外1000秒，可注入修改）内，三轴中任一轴喷气总量（正负轴单独判断）超过范围（正常模式50s，粗定向和轮子启动、全姿态捕获100s，可注入修改），则根据自锁阀状态，开关自锁阀。全姿态模式,0,0,0,0,0,1,0,0,0,0,0
功能：在不使用陀螺数据时，对姿态角、角速度与姿态四元数预估。,0,0,1,0,0,0,0,0,0,0,0
功能描述：由模拟太阳粗细码得到模拟太阳角、全开码、见太阳标志。,0,0,0,0,0,0,0,0,1,0,0
"功能：利用星敏感器B、C的测量，修正姿态四元数与姿态角速度。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：使用红外、数字太阳敏感器确定姿态。
",0,0,1,0,0,0,0,0,0,0,0
功能描述： 对部件电源加断电,0,0,0,0,0,0,0,1,0,0,0
功能描述：仅使用红外定姿时，计算正常飞行轮控所需电压。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：与数字太阳通信，发送取数指令，获得部件数据。
处理：
在OBC每个控制周期中可能会通过串口向数太发送控制指令或者接收下传数据，见任务书时序图。
功能编号|功能|引用文档
FREQ62|初始化|小卫星统一化平台中心控制单元RS422通讯协议：数太协议
FREQ63|数太使用要求|任务书、数太协议
FREQ64|通信|任务书、数太协议
FREQ65|通信故障处理|任务书
FREQ66|数据解包与转换|数太协议
FREQ67|数太数据有效性判断、处理|任务书
FREQ68|数太模拟量采集、处理|预留
FREQ69|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：利用星敏感器B的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：采集帆板归零信号，并处理成需要的数据格式。
处理：帆板归零的信号",0,0,0,0,0,0,0,0,1,0,0
功能描述：根据太阳矢量在帆板1法平面内投影与帆板法线之间的夹角，通过帆板驱动机构1控制帆板1，使帆板1能捕获及跟踪太阳。,0,1,0,0,0,0,0,0,0,0,0
功能描述：姿态机动模式初始化,0,0,0,1,0,0,0,0,0,0,0
"功能描述：计算正常飞行模式轮控所需电压。
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：各模式初始化
序号|功能点编号|功能描述|说明
|FREQ3.4.2.1|等待段初始化|《用户需求》4.1.1【初始化】
|FREQ3.4.2.2|太阳定向模式初始化|《用户需求》4.1.2【初始化】
|FREQ3.4.2.3|恒星定向2初始化|《用户需求》4.1.3【初始化】
|FREQ3.4.2.4|惯性调姿模式初始化|《用户需求》4.1.4【初始化】
|FREQ3.4.2.5|恒星定向4初始化|《用户需求》4.1.5【初始化】
|FREQ3.4.2.6|轨控定向模式初始化|《用户需求》4.1.6【初始化】
|FREQ3.4.2.7|着陆准备模式初始化|《用户需求》4.1.7【初始化】
|FREQ3.4.2.8|主减速模式初始化|《用户需求》4.1.8【初始化】
|FREQ3.4.2.9|快速调整模式初始化|《用户需求》4.1.9【初始化】
|FREQ3.4.2.10|接近下降模式初始化|《用户需求》4.1.10【初始化】
|FREQ3.4.2.11|悬停模式初始化|《用户需求》4.1.11【初始化】
|FREQ3.4.2.12|避障模式初始化|《用户需求》4.1.12【初始化】
|FREQ3.4.2.13|缓速下降模式初始化|《用户需求》4.1.13【初始化】
|FREQ3.4.2.14|自主定位模式初始化|《用户需求》4.1.14【初始化】
|FREQ3.4.2.15|起飞准备模式初始化|《用户需求》4.1.15【初始化】
|FREQ3.4.2.16|垂直上升模式初始化|《用户需求》4.1.16【初始化】
|FREQ3.4.2.17|上升调姿模式初始化|《用户需求》4.1.17【初始化】
|FREQ3.4.2.18|轨道入射模式初始化|《用户需求》4.1.18【初始化】
|FREQ3.4.2.19|星光环月模式初始化|《用户需求》4.1.19【初始化】
|FREQ3.4.2.20|速率阻尼模式初始化|《用户需求》4.1.20【初始化】
|FREQ3.4.2.21|无控模式初始化|《用户需求》4.1.21【初始化】
",0,0,0,1,0,0,0,0,0,0,0
功能描述：接收内存读出地址及长度，发送内存读出数据包。                                                                                                                                                                                                                                                                                                                                                                                                                    处理：将接收内存地址及长度存储地址中内容的解包成需下传的内存首地址和长度，并判断需下传内容是否在内1553RAM有效地址范围内。若在范围内，则将需下传的内容放到指定地址中。,0,0,0,0,0,0,0,0,0,0,1
"功能描述：PID计算控制力矩经过结构滤波器后，改善姿态控制效果。
处理：
STEP1:滚动通道滤波；
STEP2:俯仰通道滤波；
STEP3:偏航通道滤波。",0,1,0,0,0,0,0,0,0,0,0
功能：利用星敏感器和陀螺或者仅利用星敏感器的输出计算卫星欧拉角和四元数。,0,0,1,0,0,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|轨道与星历|FREQ2.0|5.1.1|卫星轨道、太阳星历、地面站位置、地磁场强度等计算程序的主流程。
|卫星轨道计算|FREQ2.1|5.1.2|计算卫星当前轨道
|GPS轨道数据有效性判断|FREQ2.2|5.1.3|对GPS轨道数据的有效性进行判断
|GPS轨道版轨道计算|FREQ2.3|5.1.4|利用GPS轨道版数据进行GPS定轨程序
|近圆中低轨卫星轨道根数外推算法产品规范|FREQ2.5|/|规范化算法：
|近圆中低轨卫星GPS轨道计算算法算法产品规范|FREQ2.6|/|规范化算法：
|岁差章动矩阵计算算法算法产品规范|FREQ2.7|/|规范化算法：
|4阶星上地磁场计算方法算法产品规范|FREQ2.8|/|规范化算法：
|光行差计算算法产品规范|FREQ2.9|/|规范化算法：
|轨道、目标姿态预计算|FREQ2.10|5.1|完成下一控制周期的轨道星历与目标姿态计算。
",0,0,0,0,1,0,0,0,0,0,0
"功能描述：复位模式处理
处理：
- 采集陀螺、红外、太阳敏感器数据；
- 继续与ALTU通讯（控制量都为0，无控制指令）；
- 响应除“重要数据保存”的所有星务遥控及遥测；
- 不查询应急加电标志，不保存APP_WorkMode1/2/3变量；
",1,0,0,0,0,0,0,0,0,0,0
"功能描述：根据姿态估值与数字太阳输出，计算量测的一步预测与新息，建立数字太阳输出的可用性标志。
输入： 5.2.14.3输出的
       姿态估值 
       数字太阳数据有效性标志F_Ds1Valid， F_Ds2Valid（由有效性判据给出）
      	  数字太阳敏感器输出：, (量纲：弧度)",0,0,1,0,0,0,0,0,0,0,0
功能描述：若AOCC与星敏感器通讯不成功，则记录星敏感器故障一次。若连续240次不成功，判断该星敏感器故障。若星敏感器连续2000次故障，需重新启动星敏感器。,0,0,0,0,0,1,0,0,0,0,0
"功能描述：根据帆板角误差、控制帆板跟踪太阳。
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：由平衡方程方法、星敏感器数据进行陀螺的故障检测。
",0,0,0,0,0,0,1,0,0,0,0
"功能描述：接收数据指令注入块的部件使用选择类指令
处理：
序号37使用四个陀螺定姿和序号38使用三个陀螺定姿初值更改，改为默认使用3个陀螺。",0,0,0,0,0,0,0,0,0,1,0
功能：利用星敏感器A、B的测量，修正姿态四元数与估计陀螺漂移。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：搜索太阳，直到数字/模拟太阳敏感器有太阳信息
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：使星体-Z轴对日定向后，使用星敏感器重捕地球。
",0,0,1,0,0,0,0,0,0,0,0
"需求名称|功能描述
部件数据有效性判断|对部件采样数据的有效性进行判断，并选择引入闭环控制系统的数据
陀螺数据有效性判断|判断定姿用陀螺数据的有效性，选择参与定姿的陀螺
模拟太阳敏感器数据有效性判断|确定ASS21，ASS22，ASS31，ASS32及帆板角度传感器，等的信号选取
红外地球敏感器数据有效性判断|判断红外地球敏感器有效性
星敏感器数据有效性判断|对星敏感器输出数据进行有效性判断，并选取定姿星敏组合
数字太阳敏感器数据有效性判断|对数字太阳敏感器输出数据进行有效性判断
RS422通讯故障诊断|进行RS422通讯故障诊断及处理
光纤陀螺通讯诊断及处理|进行光纤陀螺通讯故障诊断及处理
数字太阳通讯诊断及处理|进行数字太阳通讯故障诊断及处理
太阳模拟量通讯诊断及处理|进行太阳通讯故障诊断及处理
对地数传天线通讯诊断及处理|进行对地数传天线通讯故障诊断及处理
中继天线通讯诊断及处理|进行中继天线通讯故障诊断及处理
1553B内总线通讯故障诊断|进行1553B内总线通讯故障诊断及处理
红外通讯故障诊断|红外通讯故障诊断及处理
甚高陀螺通讯故障诊断|大量程通讯故障诊断及处理
ACU通讯故障诊断|ACU通讯故障诊断及处理
帆板通讯故障诊断|帆板通讯故障诊断及处理
多头星敏通讯故障诊断|多头星敏通讯故障诊断及处理
1553B内总线总线监视及处理要求|CCU作为内1553B总线的BC，在与各RT通讯时需要进行总线状态监视
部件故障诊断与处理|确定各敏感器和执行机构故障诊断及处理
动量轮故障检测|检测工作中的大力矩飞轮的故障
推进喷气异常检测|检测推力器微漏、过量喷气等，必要时作相应的主备份切换和禁止
帆板故障诊断|帆板故障检测及处理
模式1的系统故障诊断|在模式1中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式2的系统故障诊断|在模式2中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式3的系统故障诊断|在模式3中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式5的系统故障诊断|在模式5中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式7的系统故障诊断|在模式7中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式8的系统故障诊断|在模式8中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式9的系统故障诊断|在模式9中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
磁力矩器数模一致性诊断|磁力矩器数模一致性诊断
DSS输出一致性诊断|DSS输出一致性诊断
ASS1输出一致性诊断|ASS1输出一致性诊断
ACU 1553B接收故障诊断及处理|由于卫星的执行机构控制均需通过ACU进行，当ACU接收控制指令内存区异常将导致卫星失去控制能力，因此有必要对ACU接收执行机构控制指令的正确性进行判断。在检测到执行机构控制指令接收校验和异常后CCU需要自主进行处理",0,0,0,0,0,0,1,0,0,0,0
"功能描述：进行模式初始化。
处理：
（1）置帆板归零； 
（2）置 ===0；=0;= 0；",0,0,0,1,0,0,0,0,0,0,0
功能描述： CMG控制,0,1,0,0,0,0,0,0,0,0,0
"功能描述：遥测数据打包
处理： 
序号|功能点编号|功能描述
|FREQ4.2.1|四器巡航模式
|FREQ4.2.2|四器变轨模式
|FREQ4.2.3|组合体分离模式
|FREQ4.2.4|着上巡航模式
|FREQ4.2.5|着上轨控模式
|FREQ4.2.6|着上下降模式
|FREQ4.2.7|月面工作模式
|FREQ4.2.8|上升准备模式
|FREQ4.2.9|上升器巡航模式
|FREQ4.2.10|上升器轨控模式
",0,0,0,0,0,0,0,0,0,0,1
"功能描述：发送星敏陀螺数据给OBDH保存
处理：将星敏陀螺数据打包后放到星敏陀螺数据内存地址空间中。
星敏陀螺数据组帧时，对本周期未取到星敏数据、陀螺数据的处理，以及校验和的计算方法与《 卫星控制分系统AOCC与数传分系统数据处理器通讯协议》文件中向数传分系统发送的星敏陀螺数据要求一致。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：根据需求，计算去往巡天模式机动过程中所需的目标姿态
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：不使用陀螺数据时的姿态角、角速度与姿态四元数预估。
",0,0,1,0,0,0,0,0,0,0,0
"根据不同的任务要求划分了各个模式，模式控制作为一个功能的集合体反映了任务的执行情况，是确认测试和系统实验验证的重要的功能。
模式字|工作模式描述|功能编号
0|主动段|FREQ56
1|正常对地运行|FREQ57
2|偏航机动|FREQ58
3|全姿态捕获|FREQ59
4|对地捕获|FREQ60
5|帆板未展开|FREQ61
6|轨控|FREQ62
7|无控|FREQ63
8|侧摆机动|FREQ64
9| 侧摆保持|FREQ65
11|入轨段控制|FREQ66
12|自旋模式|FREQ67
13|应急模式|FREQ68
14|星敏全姿态捕获模式|FREQ69
10|CMG启动模式|FREQ107

主动段工作模式下并不进行姿态确定和控制的计算，其它各个模式控制中调用卫星轨道和星历计算、姿态确定和姿态和轨道控制的如下所示
|模式字
|E
卫星轨道外推计算|√
GPS轨道计算|√
太阳星历计算|√
地面站位置计算|√
地磁场计算|√
偏流角计算|
岁差章动计算|√
陀螺数据处理|√
惯性姿态陀螺预估|√
对地姿态陀螺预估|
四元数陀螺预估|
红外输出的数据处理|√
太阳输出的数据处理|√
红外的姿态修正|
红外与太阳双矢量定姿|
红外太阳姿态修正|
星敏感器数据处理|
星敏感器A姿态修正|
星敏感器B姿态修正|
星敏感器C姿态修正|
星敏感器A、B姿态修正|
星敏感器A、C姿态修正|
星敏感器B、C姿态修正|
对地姿态修正及星敏粗姿态计算|
仅星敏感器A的姿态修正|
仅星敏感器B的姿态修正|
仅星敏感器C的姿态修正|
仅星敏感器AB的姿态修正|
仅星敏感器AC的姿态修正|
仅星敏感器BC的姿态修正|
侧摆目标姿态确定|
–Z轴捕获太阳及对日定向|
偏航捕获及转对地定向|
星敏感器全姿态捕获|√
姿态控制量计算|√
相平面法|√
姿态喷气控制|√
动量轮摩擦补偿计算|√
动量轮角动量保持的PI控制|√
动量轮启动与保持|√
正常飞行动量轮分配电压计算|
结构滤波器计算|
喷气卸载条件计算|
磁卸载控制|
CMG数据处理|√
CMG控制|
运行段帆板控制|
自主跟踪控制|
无控模式下太阳帆板控制|
数传天线指向控制|
偏置动量轮分配电压计算|
正常模式1N变轨|

在正常运行模式下主要有三种定姿方式：红外定姿、红外太阳定姿和星敏定姿。其中星敏定姿为高精度定姿方式。并可采用有陀螺和无陀螺方式，正常情况下为有陀螺。定姿方式的切换通过注入系统定姿方式字和系统故障诊断来实现切换。",0,0,0,1,0,0,0,0,0,0,0
"功能描述：利用星敏感器C的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：分支号与喷管对应选择

处理：
序号|分支状态|姿控分支标志|姿控发动机|轨控分支标志|轨控发动机
1|A、B、C分支都好|A|A1|BC|B1
1|A、B、C分支都好|A|A2|BC|B2+B3+C2+C3
1|A、B、C分支都好|A|A3|BC|B5
1|A、B、C分支都好|A|A4|BC|B4
1|A、B、C分支都好|A|A6|BC|B6+B7+C6+C7
1|A、B、C分支都好|A|A5|BC|B8+B9+C8+C9
2|A、B分支好|A|同A分支|B|同BC
2|A、B分支好|A|同A分支|B|B2+B3
2|A、B分支好|A|同A分支|B|同BC分支
2|A、B分支好|A|同A分支|B|同BC分支
2|A、B分支好|A|同A分支|B|B6+B7
2|A、B分支好|A|同A分支|B|B8+B9
3|A、C好|A|同上|C|C1+C10
3|A、C好|A|同上|C|C2+C3
3|A、C好|A|同上|C|C5
3|A、C好|A|同上|C|C4
3|A、C好|A|同上|C|C6+C7
3|A、C好|A|同上|C|C8+C9
4|B、C好|C|C6+C9|B|同B分支
4|B、C好|C|C7+C8|B|同B分支
4|B、C好|C|C1|B|同B分支
4|B、C好|C|C10|B|同B分支
4|B、C好|C|C2|B|同B分支
4|B、C好|C|C3|B|同B分支
5|A好|A|同A分支|0|无效
6|B好|0|无效|B|同B分支
7|C好|C|同C分支|0|无效",0,1,0,0,0,0,0,0,0,0,0
"功能描述：利用红外太阳建立正常飞行姿态
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：地面注入数据处理
说明：计算目标器GPS时，将输入、输出改为目标器的相应变量。",0,0,0,0,1,0,0,0,0,0,0
"功能描述：接收AOCC系统注入参数
处理：
当收到接收遥控注入结束标识消息后，将接收AOCC系统注入参数存储地址中内容解包成对应的参数和变量的数据格式。只有当某个块类型的所有数据都收到，且每块数据的校验和都正确时，才能使用此种类型的注入数据。注入的数据具体见上行注入文件。需要注意的是：地面注入ZT9时：若ZT9中为1的个数小于3个，则不改变星上ZT9的取值，如果等于3个，则BZ9=ZT9；应用软件不响应ZT1=2、ZT1=6、ZT1=8的注入指令。",0,0,0,0,0,0,0,0,0,1,0
功能描述：星敏感器数据处理,0,0,0,0,0,0,0,0,1,0,0
功能描述：对动量轮、推力器和磁力矩器控制指令的处理 ,0,0,0,0,0,0,0,1,0,0,0
功能描述：对二次电源使用、故障切换。,0,0,0,0,0,0,0,1,0,0,0
"功能：利用星敏感器B的测量，修正姿态四元数与姿态角速度。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：根据CMG输出数据和理论数据进行CMG故障检测。
",0,0,0,0,0,1,0,0,0,0,0
"功能描述：接收卫星时间
处理：AOCC上电或复位时通过发送重要数据申请给OBDH，OBDH把卫星时间和AOCC重要数据都发到AOCC终端。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：使用红外、星敏、太阳定姿时，计算CMG的框架角速率指令。
处理：
软件设计时应注意保护Vm，保证此节使用的Vm未在周期性清0处理中被清除。",0,1,0,0,0,0,0,0,0,0,0
"功能描述：滚动通道喷气中断处理程序。
处理：将推力器1-8关掉",0,0,0,0,0,0,0,1,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|陀螺数据处理|FREQ3.1|5.2.1|把陀螺数据、、、变换到星体系中的、、
|陀螺预估惯性姿态|FREQ3.2|5.2.2|根据陀螺输入，预估卫星惯性姿态
|陀螺预估惯性四元数|FREQ3.4|5.2.4|根据陀螺测量输出，一步预估卫星惯性姿态
|动力学预估惯性四元数|FREQ3.5|5.2.5|根据动力学模型，预估卫星惯性姿态
|星敏感器与陀螺姿态修正|FREQ3.7|5.2.7|利用星敏感器和陀螺的输出或仅利用陀螺预估输出计算卫星欧拉角和四元数
|单星敏感器的姿态修正|FREQ3.7.1|5.2.7.1|利用单个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|双星敏感器的姿态修正|FREQ3.7.2|5.2.7.2|利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|对地姿态修正|FREQ3.7.3|5.2.7.3|利用估计的四元数转换姿态角
|星敏感器与动力学姿态修正|FREQ3.8|5.2.8|利用星敏感器的输出计算卫星欧拉角和四元数
|仅单星敏感器的姿态修正|FREQ3.8.1|5.2.8.1|仅利用单个星敏感器的测量，修正姿态四元数与姿态角速度
|仅双星敏感器的姿态修正|FREQ3.8.2|5.2.8.2|仅利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|无陀螺对地姿态修正|FREQ3.8.3|5.2.8.3|利用估计的四元数转换姿态角，送给星敏感器的四元数
|星敏感器相对基准标定|FREQ3.10|5.2.11|对星敏的相对基准进行标定，修正星敏安装矩阵
|星敏感器双矢量姿态确定|FREQ3.11.1|5.2.14.1|利用星敏的测量，确定单点的卫星姿态四元数。
|星敏姿态四元数重置|FREQ3.11.2|5.2.14.2|进行卫星姿态四元数的重置
|姿态四元数预估算法产品规范|FREQ3.1.2|/|规范化算法：
|重力梯度力矩计算算法产品规范|FREQ3.1.3|/|规范化算法：
|基于单星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.5|/|规范化算法：
|基于双星敏感器测量矢量叉乘信息的滤波修正算法产品规范|FREQ3.1.6|/|规范化算法：
|星敏感器相对基准的在轨标定算法产品规范|FREQ3.1.8|/|规范化算法：
|目标姿态计算流程|FREQ3.12|5.3.2|""计算模式的目标姿态
""
|对地定向目标姿态计算|FREQ3.12.0|5.3.2.1|对地定向目标姿态计算
|点对点机动目标姿态计算|FREQ3.12.1|5.3.2.2|点对点机动目标姿态计算
|姿态预置过程目标姿态计算|FREQ3.12.3|5.3.2.3|姿态预置过程目标姿态计算
|非沿迹跟踪阶段目标姿态计算|FREQ3.12.4|5.3.2.4|角速度建立过程目标姿态计算
|轨控目标姿态计算|FREQ3.12.5|5.3.2.5|轨控目标姿态计算
|凝视过程目标姿态计算|FREQ3.12.6|5.3.2.6|凝视过程中计算三轴目标姿态
|正常对日巡航目标姿态计算|FREQ3.12.7|5.3.2.7|正常对日巡航目标姿态计算
|姿态机动初始化|FREQ3.13.1|5.3.1.1|三轴姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉轴/角，以及轨迹的加速，匀速和减速等特征时间点。
|非沿迹跟踪轨迹初始化|FREQ3.13.2|5.3.1.2|匀地速、匀角速度、匀积分时间非沿迹跟踪初始化，计算地心张角和方向矢量等
|轨控姿态机动轨迹初始化|FREQ3.13.4|5.3.1.4|轨控模式目标姿态计算初始化
|计算多项式轨迹系数|FREQ3.13.5|5.3.3.1|根据轨迹规划时间，初始姿态/姿态角速度和目标姿态/姿态角速度计算基于多项式轨迹规划的轨迹系数
|姿态预置机动目标姿态确定|FREQ3.13.6|5.3.3.2|基于多项式曲线的轨迹规划，计算目标姿态
|非沿迹目标姿态角计算|FREQ3.13.8|5.3.4|根据所指定的扫描起始经纬度和末端点经纬度
|偏流角计算|FREQ3.13.9|5.3.5|适用于地球椭球模型，星体姿态描述为转序，计算基于星体光轴(与星本体＋Z轴平行)下的偏流角
|轨道角速度建立目标姿态计算|FREQ3.13.10|5.3.6|在惯性定向与轨道系姿态保持之间切换时，进行轨道角速度的建立或削除
|姿态控制量计算|FREQ3.19|5.2.12|根据姿态确定结果和目标姿态计算结果计算误差姿态角和误差姿态角速度
|引入系统闭环姿态确定|FREQ3.20|5.2.13|根据定姿标志确定引入系统的闭环姿态
|正弦轨迹规划算法算法产品规范|FREQ3.12.7|/|规范化算法：
|基于加速度导数为正弦函数的轨迹规划算法算法产品规范|FREQ3.12.8|/|规范化算法：
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：实时计算卫星轨道参数及太阳方位，太阳敏感器理论输出。
处理：同用户需求的4.2。为防止t-t0过大导致系统切机，在轨道计算中增加时间超差不调用轨道计算，仅外推轨道幅角；太阳星历的计算仍然调用。
STEP1：计算卫星轨道根数。计算公式见4.2(1)；
STEP2：计算太阳轨道和太阳敏感器理论输出，其中岁差补偿公式有更改，Cbo的计算公式改用红外定姿姿态。计算公式见4.2(2)；
STEP3：若FlagIresOrbSun=0，则FHSL=FHSR=1左右红外都不见太阳。FlagIresOrbSun是注入内存修改变量，若注入修改令FlagIresOrbSun=1，则引入红外软件见太阳保护。
STEP4：若计算的轨道半径r和相差以上，或计算的轨道角速度和0.001108rad/s相差0.00008以上，则判定轨道计算偏差太大，置BZ2=4，同时置r=6871，=0.001108，。",0,0,0,0,1,0,0,0,0,0,0
"功能模式：姿态机动目标姿态确定。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：根据红外数据计算卫星姿态。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述、输入、输出、计算公式见《用户需求》4.8.1~4.8.8。
序号|功能点编号|功能描述|说明
|FREQ3.4.10.1|陀螺故障检测及选择|《用户需求》4.8.1
|FREQ3.4.10.2|加速度计故障检测及选择|《用户需求》4.8.2
|FREQ3.4.10.3|星敏感器故障检测及选择|《用户需求》4.8.3
|FREQ3.4.10.4|系统故障检测及选择|《用户需求》4.8.4
|FREQ3.4.10.5|加计通讯故障处理|《用户需求》4.8.5
|FREQ3.4.10.6|陀螺通讯故障处理|《用户需求》4.8.6
|FREQ3.4.10.7|测速波束有效性检测及选择|《用户需求》4.8.7
|FREQ3.4.10.8.1|单机类故障诊断_陀螺|《用户需求》4.8.8 
|FREQ3.4.10.8.2|单机类故障诊断_加计|《用户需求》4.8.8
|FREQ3.4.10.8.3|单机类故障诊断_星敏|《用户需求》4.8.8
|FREQ3.4.10.8.4|单机类故障诊断_微波测距测速|《用户需求》4.8.8
|FREQ3.4.10.8.5|单机类故障诊断_激光测距|《用户需求》4.8.8
|FREQ3.4.10.8.6|单机类故障诊断_激光测速|《用户需求》4.8.8
|FREQ3.4.10.8.7|自主启动IMU数据存储|《用户需求》4.8.8
",0,0,0,0,0,1,0,0,0,0,0
功能描述：接收OBDH时间数据,0,0,0,0,0,0,0,0,0,1,0
" 软件需求名称：帆板控制 
需求类别：其他 
软件需求描述：根据控制律计算结果，驱动帆板机构，进行帆板控制。",0,0,0,0,0,0,0,1,0,0,0
功能描述：确定轨道外推初值，并调用轨道计算。,0,0,0,0,1,0,0,0,0,0,0
"功能描述：根据星敏感器的输入，计算姿态偏差，角速度等。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：对磁力矩器电压一阶滤波。
",0,1,0,0,0,0,0,0,0,0,0
"包括三个功能点：发送姿态数据、陀螺数据、星敏感器数据辅助数据，功能描述和列写如下：
序号|功能描述|功能编号
1|发送姿态数据|FREQ7.14.1
2|发送陀螺数据|FREQ7.14.2
3|发送星敏感器数据|FREQ7.14.3
",0,0,0,0,0,0,0,0,0,0,1
功能描述：根据红外数据和姿态角速度偏差进行系统故障的检测。,0,0,0,0,0,1,0,0,0,0,0
功能描述：计算磁卸载所需的磁矩与磁力矩器工作电压,0,1,0,0,0,0,0,0,0,0,0
"功能描述：使用星敏感器B的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
功能描述： CMG数据处理。,0,1,0,0,0,0,0,0,0,0,0
功能描述：三轴喷气姿态控制。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：若本周期角动量与上一周期角动量之差（绝对值）大于0.15Nms，则用上一周期角动量作为本周期输入，角动量变化取0。若连续大于三次或本周期与上一周期角动量之差（绝对值）小于0.15Nms，则以本周期角动量为真值，角动量变化取
输入：实测飞轮角动量，
      上周期角动量数据，
      剔野判断计数器N_WheelPick_i (i=x,y,z,s)",0,0,0,0,0,0,1,0,0,0,0
"功能描述、输入、输出、。
序号|功能点编号|功能描述|说明
|FREQ3.4.4.1|加计数据处理|《用户需求》4.2.1
|FREQ3.4.4.2|陀螺数据处理|《用户需求》4.2.2
|FREQ3.4.4.3|陀螺的姿态预估|《用户需求》4.2.3
|FREQ3.4.4.4|星敏感器A姿态修正|《用户需求》4.2.4.1
|FREQ3.4.4.5|星敏感器B姿态修正|《用户需求》4.2.4.2
|FREQ3.4.4.6|星敏感器C姿态修正|《用户需求》4.2.4.3
|FREQ3.4.4.7|太阳捕获及对日定向|《用户需求》4.2.5
|FREQ3.4.4.8|轨控目标姿态角速度和四元数|《用户需求》4.2.6
|FREQ3.4.4.9|误差四元数计算|《用户需求》4.2.7
|FREQ3.4.4.10|陀螺在轨标定|《用户需求》4.2.8
|FREQ3.4.4.11|相对天东北系姿态计算|《用户需求》4.2.9
",0,0,1,0,0,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|红外1数据的采集与处理|FREQ1.3.1|""红外1
1553B取数指""|红外1的弦宽和前基|在通讯允许的条件下（红外1的当班标志为1），每1秒向红外1RT发取数指令，获得红外1数据并处理成对应的弦宽和前基。CCU应用软件取数消息与同步消息的发送时间间隔大于3ms
|红外2数据的采集与处理|FREQ1.3.2|""红外2
LTU取数指令""|红外2的数据|在通讯允许的条件下（红外2的当班标志为1），向红外2 LTU发取数指令，获得红外2数据并处理成对应的数据。
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：采集模拟太阳的数据，并处理成需要的数据格式。
处理：
（1）从A/D输入采集模拟太阳的角度数据
（2）从I/O输入采集模拟太阳的视场码",0,0,0,0,0,0,0,0,1,0,0
功能描述：轨控姿态机动模式初始化,0,0,0,1,0,0,0,0,0,0,0
"功能描述：在红外太阳定姿方式下计算四元数，在其余定姿方式下计算欧拉角。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：系统软件上电复位后，调用应用软件AppInit函数，并根据初始化内容，启动任务
处理：
AOCC上电/复位后，由系统软件引导应用软件运行。首先进行初始化，包括系统软件初始化和系统软件调用应用软件提供的初始化函数（AppInit）。启动任务并开始进行任务调度管理。",1,0,0,0,0,0,0,0,0,0,0
功能描述：搜索太阳，直到数字太阳敏感器有太阳信息。,0,0,1,0,0,0,0,0,0,0,0
功能描述：接收BG与数传天线伺服控制器状态设置数据,0,0,0,0,0,0,0,0,0,1,0
"软件需求标识：FREQ20 
软件需求名称：动量轮数据处理 
需求类别：其他 
软件需求描述：动量轮数据处理。",0,0,0,0,0,0,0,0,1,0,0
功能描述：计算磁卸载所需的磁矩与磁力矩器工作脉宽。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：利用太阳敏感器信息，进行太阳捕获，对太阳定向
",0,0,1,0,0,0,0,0,0,0,0
"软件需求名称：接收总线指令 
需求类别：其他 
软件需求描述：接收并处理总线指令。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：接收AOCC重要数据包
处理：将接收AOCC重要数据包存储地址中内容解包成重要数据中的各个变量和参数。其处理过程如下：
STEP1：对接收的数据进行合法性判断；
STEP2：将接收的重要数据放入应用软件的缓存区中；
STEP3：解包相应的数据，并赋值给相应的变量。",0,0,0,0,0,0,0,0,0,1,0
功能描述：发送星敏感器数据包,0,0,0,0,0,0,0,0,0,0,1
"功能描述：选择通讯的中等精度星敏LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）中等精度星敏共有三个LTU，AOCC每个控制周期向注入文件中的ZT6和inAPSLTUSeltFlag的最大组合中的中等精度星敏LTU发送取数指令。
（2）向选择的中等精度星敏LTU发送完取数指令后，获得中等精度星敏LTU返回的数据，将数据转换为所需的数据格式。",0,0,0,0,0,0,0,0,1,0,0
"软件需求名称：动量轮使用及通信（5m不配置） 
需求类别：其他 
软件需求描述：与动量轮通信，输出本周期电压。采集动量轮电源状态、转速、模拟量等信息。
处理：
表格工作项|软件需求名称|软件需求标识|软件需求描述|1
动量轮初始化|FREQ57|动量轮初始化|B|2
动量轮数据采集|FREQ58|动量轮数据采集|B|3
通信(DA输出、脉冲输入)|FREQ59|通信(DA输出、脉冲输入)|B|4
数据解包与转换|FREQ60|数据解包与转换|B|
",0,0,0,0,0,0,0,1,0,0,0
"功能描述：发送星敏感器数据
处理：OBDH在每个遥测格式的第0帧，从AOCC接收8字节星敏感器数据。其处理过程如下：
STEP1：AOCC应用程序每0.524秒查询一次有无OBDH发送数据请求，如果有则转入第二步，否则退出；
STEP2：判别是否此时星上正在取新的星图，如果是则此次发送8字节固定数4444444444444444，否则转第三步；
STEP3：判别8颗星图（每个星图32字节）数据是否取完，如果没取完，则将取星图数据计数器加1，从规定的星图数据缓存区中取8个字节的数据放入OBDH规定的内存中；否则转第四步。
STEP4：将取星图数据计数器清0，星上开始取新的星图数据 。",0,0,0,0,0,0,0,0,0,0,1
"功能：利用星敏感器B 、C的测量，修正姿态四元数与估计角速度。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：使用星敏感器A的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：采集28路数字太阳粗码、细码。
处理：
采集方法：连续采集28路，采集1路的操作步骤（以DSS1的粗码1为例）：
向选通地址输出偏移地址：0x1200 0000 = 00H；
等待至少100µs,启动A/D转换：0x1200 0020 = 0；
等待至少40µs后；
连续3次读取A/D数据总线上的数据：data1 = 0x1200 0020 (data2，data3类似)；
取data1、data2、data3三个数据的中间值，作为本路模拟量的最终采集结果。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：利用A，B头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.7。
STEP1：计算；FM3更改：若，则：，FSTD=1；
STEP2：计算，。的各项乘以，的各项乘以。
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,0,1,0,0,0,0,0,0,0,0
"有效性处理放在控制周期中断中采样数据后、定姿前处理；故障诊断放在控制周期中断中定姿与控制后处理。红外定姿时应同时将数字太阳和星敏感器的数据有效性标志置为无效。
需求名称|功能描述
陀螺数据有效性|确定陀螺数据的有效性
红外数据有效性|确定红外数据的有效性
数字太阳数据有效性|确定数字太阳数据的有效性
星敏感器数据有效性|确定星敏感器数据的有效性
动量轮角动量数据有效性|确定动量轮角动量数据的有效性
模拟太阳敏感器数据有效性|确定模拟太阳敏感器数据的有效性
红外自主故障诊断|星上自主检测红外故障
陀螺自主故障诊断|星上自主检测陀螺故障
星敏感器通讯故障|星上自主检测星敏感器故障
动量轮故障诊断|星上自主检测动量轮故障。
推进系统故障诊断|星上自主检测推进系统故障
帆板驱动机构故障诊断|星上自主检测帆板驱动机构故障
模拟太阳敏感器故障诊断|星上自主检测模拟太阳敏感器故障",0,0,0,0,0,0,1,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|ACU模拟量数据的采集与处理|FREQ1.8.1|""ACU 1553B模拟量数据采集指令
""|模拟量|在通讯允许的条件下，每周期向ACU RT发模拟量数据采集指令，获得ACU数据并处理成对应的模拟量信息。
|ACU状态数据的采集与处理|FREQ1.8.2|""ACU 1553B各种状态数据采集指令
""|部件状态、双组元推进状态1、推进状态2、ACU工作状态|在通讯允许的条件下，每周期向ACU RT发各种状态数据采集指令，获得ACU数据并处理成对应的状态信息。
|ACU中控制指令的输出处理|FREQ1.8.3|计算得到的喷气脉宽、磁力矩器电压|控制指令消息的输出|根据通讯协议，将计算得到的喷气和磁力矩器数据转换为消息需要的格式并输出。
|部件加断电指令的处理|FREQ1.8.4|需要发送的加断电指令|加断电指令消息的输出|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
|ACU保存CCU的重要数据|FREQ1.8.5|保存CCU的重要数据|接收CCU的重要数据|AOCC每个控制周期都将重要数据发送给ACU（驱动控制单元）
|从ACU恢复CCU的重要数据|FREQ1.8.6|恢复CCU重要数据|发送的CCU的重要数据|上电/复位后应用软件首先从ACU恢复重要数据
|ACU的程序注入修改|REQ1.8.7|从OBDH收到的ACU需修改程序内容|ACU需修改程序内容|将从OBDH收到的ACU需修改程序内容，按内总线的格式发送给ACU RT需修改的程序内容
|ACU的内存下传|FREQ1.8.8|从OBDH收到的ACU内存下传设置指令|内存下传设置指令|地面注入ACU内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至ACU RT。
|自锁阀操作|FREQ1.8.9||自锁阀操作指令|根据任务书的要求通过1553B向ACU输出自锁阀开关控制指令",0,0,0,0,0,0,0,0,1,0,0
"功能描述：地地全姿态捕获模式控制
处理：
若SystemAttDeterPatternFlag由0变1，则重新计算q，qng赋值。",0,0,0,1,0,0,0,0,0,0,0
功能描述：为该机动过程姿态确定提供初始姿态。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：使星体-Z轴捕获太阳。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：执行偏航机动及返调至运行姿态
处理过程：过程如下：
STEP1：当ZT F（不用红外+单个斜装陀螺定姿），进行姿态预估，得到姿态角和角速度。
STEP2：根据当前星时t的取值进行不同的处理：
STEP3：根据ZT7的取值，进行相应的帆板控制。
ZT7的值|处理
ZT7 = 9|发指令
ZT7 = A|发指令
ZT7 = B|发指令
",0,0,0,1,0,0,0,0,0,0,0
"功能描述：根据指令完成数传天线的指向控制。
输入：数传天线j (j=1,2)，预置指令，跟踪开始指令，跟踪结束指令，地面站i在惯性系指向，被数传天线j(j=1,2)跟踪的地面站i指向卫星矢量，卫星指向被数传天线j(j=1,2)跟踪的地面站i的矢量在本体系的表示，数传天线收到的预置角度
输出：数传天线1和2的指令转角",0,1,0,0,0,0,0,0,0,0,0
"功能描述：与星敏感器通信，获得星敏感器数据。
处理：
见星敏通信协议、任务书。
功能编号|功能|引用文档
FREQ52|初始化|星敏协议
FREQ53|星敏使用要求|任务书
FREQ54|通信|星敏协议
FREQ55|通信故障处理|任务书
FREQ56|数据解包与转换|星敏协议
FREQ57|星敏数据有效性判断、处理|任务书
FREQ58|星敏模拟量采集、处理|任务书
FREQ59|部件在轨转发（在轨修改）|任务书

3）GPS高精度校时与星敏感器数据的使用
功能描述：根据GPS秒脉冲，秒脉冲广播，进行GPS高精度校时和星敏感器时标处理。
",0,0,0,0,0,0,0,0,1,0,0
"功能编号：FREQ42
功能描述：为三轴姿态喷气控制选择喷管；并记录喷气时间等。
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：姿态角与角速度估值：
正常模式星敏感器与陀螺定姿输出 
，
或：正常模式其它情形相应程序的输出，
惯性角速度估值：
    陀螺角速度估值 ，
    或：星敏感器定姿输出(F_NoGyro=1或3) =[，]T
实测飞轮角动量    ，
      斜轮标称角动量    
      姿态偏差积分项    ，
      斜轮角动量偏差积分项  
标志F_SatStage
=[，]T",0,1,0,0,0,0,0,0,0,0,0
"功能描述：利用星敏感器数据进行卫星姿态捕获。
",0,0,1,0,0,0,0,0,0,0,0
"功能：利用星敏感器A、B的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：采集星上时钟的计数值，计算星时及作相应的处理
处理： 
（1）CPU星时时钟的星时采集计算与校时
CPU外部星时时钟星时计算的输入为上一个周期对应的绝对星时t，和上个周期中控制周期读取的计数值为TOLD。在每个控制周期中处理过程如下：
STEP1：选取控制周期星时锁存通道，读取锁存的计算值，记为TNEW；
STEP2：计算TNEW减去TOLD的差值，记为DELTT（当量为1微秒）；
STEP3：本周期的绝对星时t=t+DELTT/1000000；
STEP4：保存本周期的计数值，即TOLD=TNEW。
CPU星时时钟星时校时是通过OBDH校时，OBDH校时分为两种情况：一种是OBDH周期性向AOCC发送卫星时间，发送周期为1分钟。另一种是当在上电和复位后，由应用软件主动发出校时申请，完成校时；",0,0,0,0,0,0,0,0,1,0,0
"功能描述：根据指令完成数传天线的指向控制。
输入：
数传天线(j=1,2)跟踪地面站编号i，跟踪起始时刻ti，地面站i在惯性系指向，被数传天线(j=1,2)跟踪的地面站i指向卫星矢量，卫星指向被数传天线(j=1,2)跟踪的地面站i的矢量在本体系的表示。（i可为1~7）。
输出：
数传天线1和2的指令转角，指令转速，或者复位及保持控制指令。",0,1,0,0,0,0,0,0,0,0,0
"功能描述：向LTU和星敏感器发送自检指令，获得自检信息
处理：
（1）每0.524秒对1个部件LTU进行自检，依次为选通的太阳、选通的陀螺、选通的左和右帆板，每4个0.524秒对4个LTU自检一次；
(2）对红外LTU的自检见.3；
(3) 每4秒（8个0.524秒）发送一次星敏感器自检命令数据包（HK1包），；
(4)根据遥测格式将返回的自检信息通过OBDH传至地面。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：处理地面遥控注入的程序代码
处理：解包程序代码注入包，得到目的地址、注入内容长度；将注入内容放入目的地址内。
说明：星务分系统向GNCC送数采用256字节(有效使用249字节)帧格式。数据格式见《卫星GNC分系统GN与星务分系统通讯协议》",0,0,0,0,0,0,0,0,0,1,0
"软件需求名称：部件数据处理及状态选择 
需求类别：其他 
软件需求描述：部件数据采集、剔野和选择处理。",0,0,0,1,0,0,0,0,0,0,0
功能描述：计算太阳星历及光行差计算。,0,0,0,0,1,0,0,0,0,0,0
功能描述：无控模式控制,0,0,0,1,0,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|CMG 1数据的采集与处理|FREQ1.9.1|""CMG 1
1553B取数指令
""|CMG 1的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 1的当班标志为1），每周期向CMG 1RT发取数指令，获得CMG 1数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 2数据的采集与处理|FREQ1.9.2|""CMG 2
1553B取数指令
""|CMG 2的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 2的当班标志为1），每周期向CMG 2RT发取数指令，获得CMG 2数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 3数据的采集与处理|FREQ1.3.3|""CMG 3
1553B取数指令
""|CMG 3的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 3的当班标志为1），每周期向CMG 3RT发取数指令，获得CMG 3数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 4数据的采集与处理|FREQ1.9.4|""CMG 4
1553B取数指令
""|CMG 4的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 4的当班标志为1），每周期向CMG 4RT发取数指令，获得CMG 4数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 5数据的采集与处理|FREQ1.9.5|""CMG 5
1553B取数指令
""|CMG 5的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 5的当班标志为1），每周期向CMG 5RT发取数指令，获得CMG 5数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 控制指令的输出处理|FREQ1.9.6|计算得到CMG的控制数据|CMG的控制指令输出消息指令|根据控制方式发送相应的控制指令，具体见内总线通讯协议
|CMG的程序注入修改|FREQ1.9.8|从OBDH收到的CMG需修改程序内容|CMG需修改程序内容|将从OBDH收到的CMG需修改程序内容，按内总线的格式发送给CMG RT需修改的程序内容
|CMG的内存下传|FREQ1.9.9|从OBDH收到的CMG内存下传设置指令|内存下传设置指令|地面注入CMG内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至CMG RT。
",0,0,0,0,0,0,0,0,1,0,0
"需求名称|功能及处理描述
+Y帆板数据的采集与处理|+Y帆板1553B取数指令（广播同步消息）
+Y帆板转角及状态信息|每周期无条件的向+Y帆板RT发取数指令，获得+Y帆板数据并处理成对应的角度。
-Y帆板数据的采集与处理|-Y帆板1553B取数指令|-Y帆板转角及状态信息|每周期无条件的向-Y帆板RT发取数指令，获得-Y帆板数据并处理成对应的角度。
+Y帆板控制指令的输出处理|+Y帆板控制数据
+Y帆板控制指令消息输出|根据协议将+Y帆板的控制数据转换为相应的控制指令消息并输出
-Y帆板控制指令的输出处理|-Y帆板控制数据
-Y帆板控制指令消息输出|根据协议将-Y帆板的控制数据转换为相应的控制指令消息并输出
帆板的程序注入修改|从OBDH收到的帆板需修改程序内容|帆板需修改程序内容|将从OBDH收到的帆板需修改程序内容，按内总线的格式发送给帆板RT需修改的程序内容
帆板的内存下传|从OBDH收到的帆板内存下传设置指令|内存下传设置指令|地面注入帆板内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至帆板 RT。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：根据GPS接收到的数据计算轨道平根数和GPS数据有效性。
处理：
STEP1：若ZT41[4]=0，则使用通道板数据计算GPS数据对应得星时及在惯性系中的位置速度，瞬根数；否则瞬根数用轨道板数据；
STEP2：计算平根数；
STEP3：GPS数据有效性判断。其中误差增加模PI限幅。",0,0,0,0,1,0,0,0,0,0,0
"功能描述：根据注入轨道参数计算地磁场强度。
处理：
由星时和外推轨道数据星上实时计算地磁场强度。",0,0,0,0,1,0,0,0,0,0,0
"功能描述：内总线指令处理
处理：
内总线指令设置、控制等操作。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：发送AOCC指定内存内容
处理： 
（1）接收内存读出的地址和长度
（2）将对应地址和长度的内存数据放入发送内存读出数据的存储空间内
    AOCC应用软件应对内存下卸的地址区域进行保护：当内存下卸指令中的首地址、末地址均在PROM硬件地址范围、RAM硬件地址范围、1553B总线接口芯片的RAM地址范围内，则应用软件按照内存下卸指令的要求下卸目标区域的数据；若内存下卸指令中的地址超出上述3个区域的地址范围，则应用软件不更新1553B总线接口芯片中内存下卸内容子地址中对应数据。",0,0,0,0,0,0,0,0,0,0,1
功能描述：发送模拟量遥测数据包1,0,0,0,0,0,0,0,0,0,0,1
"功能描述：选择通讯的陀螺LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）陀螺共有三个互为备份的LTU，通过每个LTU均可获得9个陀螺的数据；每个控制周期AOCC向陀螺LTU发送取数命令来获得数据，AOCC根据GROLTUSeltFlag来确定和哪个LTU进行通讯。
（2）向选择的陀螺LTU发送完取数指令，获得陀螺LTU返回的数据，将数据转换为控制计算所需的数据格式。",0,0,0,0,0,0,0,0,1,0,0
功能描述：接收遥控中继星轨道注入块,0,0,0,0,0,0,0,0,0,1,0
"功能描述：仅利用星敏感器C的测量，修正姿态四元数与姿态角速度移。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：发送部件工作状态数据包,0,0,0,0,0,0,0,0,0,0,1
"功能描述：与推进线路盒通信，输出本周期喷气脉宽。
处理：
功能编号|功能|引用文档
FREQ90|初始化|任务书
FREQ91|推力器使用要求|任务书
FREQ92|通信|任务书
FREQ93|通信故障处理|预留
FREQ94|数据解包与转换|预留
FREQ95|推力器数据有效性处理|预留
FREQ96|推力器模拟量采集、处理|任务书
FREQ97|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,1,0,0,0
"软件需求标识：FREQ16 
软件需求名称：加速度计数据处理 
需求类别：其他 
软件需求描述：加速度计数据处理。",0,0,0,0,0,0,0,0,1,0,0
"功能描述、输入、输出、计算公式见《用户需求》4.6.1~4.6.3。
序号|功能点编号|功能描述|说明
|FREQ3.4.8.1|喷气控制|《用户需求》4.6.1
|FREQ3.4.8.1.1|相平面姿控算法|《用户需求》4.6.1.1
|FREQ3.4.8.1.2|相平面法喷管选择|《用户需求》4.6.1.2
|FREQ3.4.8.1.3|脉冲调宽姿控算法|《用户需求》4.6.1.3
|FREQ3.4.8.1.4|脉冲调宽法喷管选择|《用户需求》4.6.1.4
|FREQ3.4.8.2|动量轮控制|《用户需求》4.6.2
|FREQ3.4.8.2.1|动量轮安装矩阵和电压分配矩阵|《用户需求》4.6.2.1
|FREQ3.4.8.2.2|动量轮摩擦补偿计算|《用户需求》4.6.2.2
|FREQ3.4.8.2.3|动量轮角动量保持的PI控制|《用户需求》4.6.2.3
|FREQ3.4.8.2.4|动量轮启动与保持|《用户需求》4.6.2.4
|FREQ3.4.8.2.5|正常飞行动量轮分配电压计算|《用户需求》4.6.2.5
|FREQ3.4.8.3|喷气卸载计算|《用户需求》4.6.3
|FREQ3.4.8.4|喷气动量轮联合控制|《用户需求》4.6.4
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的系统安全模式姿态控制器系数
处理：
调整安全模式偏航角偏差限幅的初装值。",0,0,0,0,0,0,0,0,0,1,0
功能描述：根据数字太阳见太阳标志和故障标志判断数字太阳数据的有效性。。,0,0,0,0,0,0,1,0,0,0,0
功能描述：计算岁差章动矩阵。,0,0,0,0,1,0,0,0,0,0,0
功能描述：根据CMG所对应的期望角动量与CMG产生的实际角动量之差，自主诊断CMG的工作状态。,0,0,0,0,0,1,0,0,0,0,0
"功能描述：计算星上星时。
处理：
应用软件通过软钟结合硬钟的方式获得星时。即在需要计算星时时，读取当前星时计数器，将上次与本次之差作为两次读入的时间差（增计数，当量1us），累计在星时变量上。",0,0,0,0,0,0,0,0,1,0,0
功能描述：发送控制系统星历数据。,0,0,0,0,0,0,0,0,0,0,1
功能描述：发送矢量字,0,0,0,0,0,0,0,0,0,0,1
"功能描述：入轨后或太阳丢失后，搜索太阳并捕获太阳。
处理：
自主或指令转入该模式，进行如下设置。
根据自锁阀状态设置自锁阀1和/或自锁阀2开。
系统诊断出故障后进入该模式，100秒内不控，具体要求见用户需求。
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
if(CMGStartFlag=1) 调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺数据处理；
	调用惯性姿态陀螺预估；
调用星敏感器数据处理；
调用太阳捕获控制；
调用目标姿态确定；
调用控制器输入量计算；
喷气卸载条件计算
if(CMGStartFlag=1) 调用CMG奇异状态的判断及算法计算；
	if(CMGInControlFlag=1 且UnLoadMode=0)
{ 调用CMG的控制；
if(SSTCatchSuc＝1) 调用 磁卸载控制； }
else { if(CMGStartFlag=1) 调用 CMG启动与保持；
if(TimeStopC<=0且Flag_equation=0) 
{调用 相平面喷气脉宽； }
else {置喷气脉宽为0；SpeedControlTime=0；WacFlag=1；}
}
	调用 系统故障诊断；",0,0,0,1,0,0,0,0,0,0,0
功能描述：机动姿态保持模式初始化,0,0,0,1,0,0,0,0,0,0,0
