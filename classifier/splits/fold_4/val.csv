Requirements Description,功能需求/初始化,功能需求/控制计算/姿态控制,功能需求/控制计算/姿态确定,功能需求/控制计算/模式管理,功能需求/控制计算/轨道计算,功能需求/控制计算/运行时保障/故障诊断和处理,功能需求/控制计算/运行时保障/数据有效性判断,功能需求/控制输出,功能需求/数据采集,功能需求/遥控,功能需求/遥测
"功能描述：接收记录AOCC时间指令
处理：CTU在需要恢复星上时间时，向AOCC发送“记录AOCC时间指令”，AOCC收到指令后立即记录AOCC时间并将时间数据写入发送AOCC时间指定的存储地址空间中。",0,0,0,0,0,0,0,0,0,1,0
功能描述：计算在整星角动量偏置下，CMG控制时的框架角速率指令。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：根据需求，计算去往定点观测模式机动过程中所需的目标姿态。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：接收遥控固定参数注入块的陀螺漂移系数,0,0,0,0,0,0,0,0,0,1,0
"包括下表的功能点。
序号|功能描述|功能编号
|向ICU发送控制计算机重要数据|FREQ7.6.1
|向OBDH发送控制计算机重要数据|FREQ7.6.2

发送控制计算机重要数据的具体要求见重要数据文件。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：实时计算地心矢量、太阳矢量在本体系下的表示，以及星体X轴指向的赤经、赤纬
",0,0,1,0,0,0,0,0,0,0,0
功能：利用红外、数字太阳敏感器确定姿态。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：发送姿态数据包、红外太阳敏感器数据包、星敏感器数据包、姿态控制数据包、天线数据包、轨道数据包、部件工作状态数据包、系统工作状态数据包、全姿态捕获模式数据包、模拟量遥测数据包。
处理：数据内容见《卫星控制分系统数字量遥测数据格式定义》。
要求应用软件设计时，对角速度相关的遥测参数采取平滑处理，并将处理后的结果遥测输出（高精度数据包中记录的角速度相关数据不采用平滑处理），平滑处理要求为本周期输出的遥测值为最近8个控制周期该遥测参数的平均值。需采取平滑处理的遥测参数包括不同定姿方式下的三轴角速度遥测（dφ/dθ/dψ、//、/）以及角速度误差遥测（//）。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：动量轮启动的程控指令
      实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：， ，",0,1,0,0,0,0,0,0,0,0,0
功能描述：使用红外、星敏、太阳定姿时，计算正常飞行轮控所需电压。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：卫星丢失姿态后，使用红外地球敏感器直接捕获地球，建立正常对地姿态。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：利用加速度计数据诊断加速度计部件状态
",0,0,0,0,0,1,0,0,0,0,0
"功能描述：根据标志选择轨控发动机。
",0,1,0,0,0,0,0,0,0,0,0
"软件需求名称：自锁阀开关控制 
需求类别：其他 
软件需求描述：控制自锁阀开关。",0,0,0,0,0,0,0,1,0,0,0
"功能描述：使用星敏感器C的测量，修正姿态四元数与姿态角速度。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：发送和接收时间差值
调用条件：有发送和接收时间差值命令字时
周期：CTU复位时
输入：星时，计数值
输出：时间差值
处理：具体处理要求见与外总线通讯协议。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：引入飞轮控制（包含启动、动量保持、喷气卸载等）及撤去飞轮控制。
处理：
根据ZT2的取值进行不同的处理，处理逻辑见下表，见用户需求。
ZT2=1：飞轮启动，动量保持
ZT2=2：飞轮整星零动量控制模式
ZT2 6：不用轮控
ZT3≤3：用红外+太阳+陀螺定姿，且接入控制回路
ZT3=A：星敏无陀螺定姿，且接入控制回路，整星零动量控制方式
ZT3=C：用星敏感器+陀螺定姿，且接入控制回路
ZT3=F：用红外+单个斜装陀螺定姿，且接入控制回路
                      表38：飞轮控制的判别处理
条件|处理
 ZT2 6或3个动量轮工作|（i = 1， … ，6）
ZT2=1，3个以上动量轮工作|飞轮动量保持控制及飞轮启动
ZT2=2，3个以上动量轮工作|""喷气卸载逻辑判断：
①，。当BZ1 = 8时令,=0.
② 当连续三次，则：FHU = A,若BZ1 =1或 2或 9，则：FHU = A 
③当FHU = A且ZT8  3且ZT9  3，则：飞轮动量保持控制及飞轮启动 
④当ZT,ZT，且且且，则：FHU = 0
⑤当ZT3 = F或B且且BZ50且且，则：FHU = 0
⑥ 若ZT3=A，则：
若且FSTD 1且且，则：FHU = 0
""

卫星的三轴转动惯量分别为 3023.2kgm2、  3453.1kgm2 、 4998.7kgm2。
其中飞轮动量保持控制及飞轮启动的处理详见用户需求，飞轮控制电压计算详见用户需求1.3.4",0,1,0,0,0,0,0,0,0,0,0
功能描述：地地全姿态捕获模式初始化,0,0,0,1,0,0,0,0,0,0,0
功能描述：根据CMG输出数据和理论数据进行CMG故障检测及处理。,0,0,0,0,0,1,0,0,0,0,0
功能描述：检测红外的故障，并选取正确的红外信号。,0,0,0,0,0,0,1,0,0,0,0
"功能描述：模式4切换方式。
处理：
if() 置WorkMode=5，WorkModeT=6，；//程控指令转对地
if(lipse=1且且AutoPermission=1) 置WorkMode＝5；WorkModeT=6；；；//进入阴影区自主转对地
if() 置WorkMode=5；若，若，；WorkModeT=6；
if() 置WorkMode=5；若，若，WorkModeT=6；
收到星务的“辐射定标”指令，置WorkMode=5，WorkModeT=6，；//辐射定标模式，为注入的辐射定标目标角
if(FailureFlag＝1) 置WorkMode=2；
满足进入应急模式的条件则进入应急安全模式，置WorkMode=9；",0,0,0,1,0,0,0,0,0,0,0
"功能描述：模式0切换方式。
处理：
一个控制周期内对星箭分离状态位读5次，若连续3次以上读入为“1”，则认为本周期查到星箭已分离，每次读的时间间隔要求大于1ms。如果在连续3个周期内每个周期都查到星箭已分离，则可确认为星箭已分离，进入初始速率阻尼模式。
在主动段收到地面指令进入初始速率阻尼，进入初始速率阻尼模式。",0,0,0,1,0,0,0,0,0,0,0
功能描述： GPS定轨主程序，包括GPS数据有效、无效时的操作。,0,0,0,0,1,0,0,0,0,0,0
"软件需求名称：CMG使用及通信 
需求类别：其他 
软件需求描述：输出CMG控制指令。
处理： 
表格工作项|软件需求名称|软件需求标识|软件需求描述|1
CMG初始化|FREQ61|CMG初始化|B|2
CMG数据采集|FREQ62|CMG数据采集|B|3
CMG数据解包与转换|FREQ63|CMG数据解包与转换|B|4
CMG指令输出|FREQ64|CMG指令输出|B|
",0,0,0,0,0,0,0,1,0,0,0
功能描述：卫星绕y轴转动，使红外搜索地球。,0,0,1,0,0,0,0,0,0,0,0
功能描述：实现正常模式及侧摆模式下的偏流角计算。,0,0,0,0,1,0,0,0,0,0,0
"功能描述：模式9切换方式。
处理：
由地面干预发送指令完成；",0,0,0,1,0,0,0,0,0,0,0
功能描述：发送姿态数据包,0,0,0,0,0,0,0,0,0,0,1
"功能描述：采集动量轮的转速方向和脉冲计量，计算动量轮的角动量
处理：处理如下：
（1）读每路动量轮计算器的值，将读到的计数器的值减去上一个周期的计数器的值，得到差值；
（2）根据转换公式将脉冲数转换为角动量（动量轮角速度为1800r/min时的角动量为15Nms）。
（3）令（i = 1，2，… ，4）。为上一次轮子角动量值。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：1553B芯片初始化；
处理：
芯片复位，将1553B芯片的RAM区显式地清零，设置内存映射，将所用1553B寄存器显式地初始化，初始化1553B为RT模式。
其中子地址10、11为循环缓冲方式，其余子地址为单消息方式。
软件的1553B消息处理采用查询方式。",1,0,0,0,0,0,0,0,0,0,0
"功能描述：发送姿态数据
处理：
AOCC每个控制周期（250ms）组织28个字节姿态数据，OBDH每500ms取1次姿态数据（56个字节）。每个数据包中的2个姿态的时标需按照时间顺序排列。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：发送天线数据包
",0,0,0,0,0,0,0,0,0,0,1
"功能描述：接收应急控制器重要数据。
处理：应急线路加电后与OBDH通信，获得陀螺和推力器状态，若连续3个控制周期都没有成功取得重要数据，默认陀螺使用7、8、9号，推力器使用主备份推力器，模拟式太阳敏感器使用ASS1和ASS21。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：判断陀螺的使用范围。
",0,0,0,0,0,0,1,0,0,0,0
"功能描述：利用B头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.11
STEP1：计算，将下标A换成B；FM3更改：若，则：，FSTD=1；
STEP2：计算。的各项乘以，的各项乘以。将下标A换成B；
STEP3：计算q
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算",0,0,1,0,0,0,0,0,0,0,0
"功能描述：三轴喷气姿态控制。
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：轨道与星历计算。
",0,0,0,0,1,0,0,0,0,0,0
"软件需求名称：部件加断电 
需求类别：其他 
软件需求描述：对部件加断电指令的处理。",0,0,0,0,0,0,0,1,0,0,0
"功能描述：与星敏感器通信，获得星敏感器数据。
处理：
见星敏通信协议、任务书附录1时序。
功能编号|功能|引用文档
FREQ53|初始化|星敏协议
FREQ54|星敏使用要求|任务书
FREQ55|通信|星敏协议
FREQ56|通信故障处理|任务书
FREQ57|数据解包与转换|星敏协议
FREQ58|星敏数据有效性判断、处理|任务书
FREQ59|星敏模拟量采集、处理|任务书
FREQ60|部件在轨转发（在轨修改）|任务书

3）GPS高精度校时与星敏感器数据的使用
功能描述：根据GPS秒脉冲，秒脉冲广播，进行GPS高精度校时和星敏感器时标处理。
输入：地面遥控指令，GPS秒脉冲，秒脉冲广播，星敏感器数据。
输出：星时，时标，星敏感器数据广播。
处理：",0,0,0,0,0,0,0,0,1,0,0
功能描述：对星敏感器输出数据进行有效性判断，并选取定姿星敏组合。,0,0,0,0,0,0,1,0,0,0,0
功能描述：为星敏感器定姿提供初始的相对惯性的姿态四元数。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：完成卫星在失去姿态基准情况下的全姿态捕获，对日定向功能。
处理过程：过程如下：
分两个过程：
第一步捕获太阳（BZ1=3且FSA=0）（在0.262秒中断中完成）
STEP1：进行姿态预估（4），得到姿态角和角速度。
STEP2：进行Z轴捕获太阳的处理过程
发左右帆板归零指令
设定三轴捕获的角速度，（见用户需求）
进行速率喷气控制（见用户需求）
如果ZT2 = 2且FWi  C对工作的飞轮成立，则进行飞轮动量保持控制及飞轮启动；如果ZT2  2或FWi < C 对某一工作的飞轮成立，则将六个轮子的控制电压置为0
满足下列两个条件时，设置FSA=5：
ZT13  4（用0-1太阳捕获）且且指定的敏感器见太阳
ZT13 = 4（用数字太阳捕获）且两个数字太阳均在视场内
第二步太阳定向（BZ1=3且FSA不等于0）
STEP1：进行红外数据采集及处理并将磁力矩器的输出电压设置为0。
STEP2：进行Z轴对日定向和陀螺故障检测及选择：
STEP3：根据ZT7的取值，进行相应的帆板控制。
在BZ1=3中，FSA有三中状态分别为0、5、A，这三个状态的转换关系如图12和表41所示：
图 12： FSA的状态转移图
表 40： FSA状态转换的条件
条件|具体说明
条件1|""ZT13  4（用0-1太阳捕获）且且指定的敏感器见太阳
ZT13 = 4（用数字太阳捕获）且两个数字太阳均在视场内""
条件2|""ZT13  4（用0-1太阳捕获）且且Ls = 1且指定的敏感器不见太阳
ZT13 = 4（用数字太阳捕获）且且 ""
条件3|""ZT13  4（用0-1太阳捕获）且且Ls = 1且
ZT13 = 4（用数字太阳捕获）且且且""
条件4|""ZT13  4（用0-1太阳捕获）且且Ls = 1且指定的敏感器不见太阳
ZT13 = 4（用数字太阳捕获）且且 ""
",0,0,0,1,0,0,0,0,0,0,0
"软件需求标识：FREQ26 
软件需求名称：推进数据采集处理要求 
需求类别：其他 
软件需求描述：推进数据采集处理要求。",0,0,0,0,0,0,0,0,1,0,0
功能描述：接收PVT数据,0,0,0,0,0,0,0,0,0,1,0
"功能描述：利用估计的四元数转换姿态角，送给星敏感器的四元数。

",0,0,1,0,0,0,0,0,0,0,0
"功能描述：若AOCC与星敏感器通讯不成功，则记录星敏感器故障一次。若连续240次不成功，判断该星敏感器故障。若星敏感器连续1000次数据无效，需重新启动星敏感器。
",0,0,0,0,0,1,0,0,0,0,0
功能描述：发送姿态机动过程参数包。,0,0,0,0,0,0,0,0,0,0,1
"功能描述：模拟太阳故障状态。
",0,0,0,0,0,1,0,0,0,0,0
"功能描述：0.5秒中断采集各部件数据
输出：内存单元保存的各部件数据与状态。
处理：  
     处理流程如下图所示：
                      图11：数据采集处理流程",0,0,0,0,0,0,0,0,1,0,0
"功能描述：与星敏感器通讯获得星敏感器数据是否可以用来定姿。
",0,0,0,0,0,0,0,0,1,0,0
功能：利用星敏感器A、B、C单独或组合定姿的方式，调用相应姿态修正程序。,0,0,1,0,0,0,0,0,0,0,0
功能描述：在CMG控制期间按照一定算法对磁力矩器施加控制电压，所产生磁矩与实际地磁场相互作用产生磁控力矩对CMG进行卸载。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：诊断姿控喷管微漏故障
",0,0,0,0,0,1,0,0,0,0,0
"功能：利用星敏感器A的测量，修正姿态四元数与姿态角速度。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：对地对日相互转换的过渡模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                            处理：
根据地面规划指令，使用CMG完成姿态快速机动，满足姿态条件自主退出该模式。
从进入该模式起，AOCC需每秒向引入的星敏发送星敏角速度限制指令TC_RATE_LIMIT指令。指令包含的参数计算见用户需求，指令格式见AOCC与星敏通信协议。使用单独的时间间隔计数器，并从第一个周期开始发送TC_RATE_LIMIT指令。
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺的数据处理；
调用四元数陀螺预估；
调用星敏感器数据处理；
if(MoveSTSInSystemFlag=1) 调用利用星敏感器的姿态确定；
elseif(MoveSTSInSystemFlag=2且 且SSTCatchSuc=0)   调用星敏感器对日定向的a项；
调用 .13（姿态修正及星敏粗姿态计算）；
调用机动目标姿态确定；
调用中继天线捕获跟踪控制；
调用对地数传天线捕获跟踪控制；
调用控制器输入量计算；
调用CMG奇异状态的判断及算法计算；
调用CMG的控制；
调用系统故障诊断；",0,0,0,1,0,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的轨道参数
处理：
GPS无效判断的连续次数变量由1改为7。
调整序号14注入轨道根数有效性阀值、序号16~18岁差章动系数的初装值。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：接收AOCC重要数据
处理：将接收AOCC重要数据地址中内容解包成重要数据的数据格式。
在AOCC上电/复位或者切机时，AOCC通过方式代码的服务申请，请求OBDH发送星上时间和AOCC重要数据。若连续三个控制周期申请AOCC重要数据失败（重要数据第一块的第一个字不是A090H或者校验和错误或者未收到重要数据），则应用软件按照重要数据的初始值运行。",0,0,0,0,0,0,0,0,0,1,0
功能描述：发送姿态控制数据包1,0,0,0,0,0,0,0,0,0,0,1
"控制计算机实时遥测包括下表的功能点。
序号|功能描述|功能编号
|发送姿态数据包1|FRE65
|发送姿态数据包3|FRE65.1
|星敏感器姿态数据包|FRE65.2
|星敏感器自检数据包|FRE65.3
|姿态控制数据包|FRE65.4
|轨道数据包|FRE65.5
|LTU自检数据包|FRE65.6
|AOCC及状态数据包|FRE65.7
|发送星敏修正数据包|FRE65.8
|发送对日定向数据包|FRE65.9
|数传天线地面夹角数据|FRE65.10

具体的内容及遥测模式切换的原则详见遥测文件。",0,0,0,0,0,0,0,0,0,0,1
"软件需求标识：FREQ17 
软件需求名称：数字太敏数据处理 
需求类别：其他 
软件需求描述：数字太敏数据处理。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：接收应急线路注入数据。
处理：应急线路的上行注入数据为姿控数据块，具体见上行注入文件。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：计算将动量轮保持至标称角动量所需的电压
说明：  控制方式发生改变时，每回首次调用该模块时清轮子角动量积分量。",0,1,0,0,0,0,0,0,0,0,0
"功能描述：0.262秒的中断服务主程序。
处理： 
STEP1：若ZT36=5,则进入自旋模式；
STEP2：
STEP3：若BZ8=5,则进行STEP4，否则返回；
STEP4：陀螺数据输入及转换
STEP5：若BZ1 = 3，FSA = 0，则进行姿态预估器（4）和Z轴捕获太阳；
STEP6：若BZ1 = 6，则：
调用姿态预估器（2）；
，
STEP7：进行轨控开关机，轨控段喷气姿态控制，飞轮动量保持控制及飞轮启动；
STEP8：若BZ1 = 5，则：
帆板未展开模式。",0,0,0,1,0,0,0,0,0,0,0
"功能描述：根据任务要求，应用软件1553B初始化、变量的初始化
处理：
进行1553B初始化，处理过程见的OBDH初始化功能
把模式字初始化为零
上电时，将在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff；复位时，若在轨维护程序区未发生双错，则应用软件从三取二区恢复在轨注入模块地址映射表JumpSlot、继续运行在轨维护程序；若在轨维护程序区发生双错，则应用软件不恢复在轨注入模块地址映射表JumpSlot，同时在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff，运行原PROM区的函数模块
为变量赋初值，因为上电或复位时，系统软件都先把变量区清零，应用软件只需将不为零的变量赋值即可。",1,0,0,0,0,0,0,0,0,0,0
"功能描述：视线目标的姿态确定。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：根据注入轨道参数计算太阳轨道、方位与其他参数。
处理：
由太阳平近地点角和星时计算赤道惯性坐标系的太阳矢量。利用外轨轨道数据计算惯性到轨道的转换阵并计算出太阳矢量在轨道坐标系的分量。利用外推轨道计算卫星速度、修正参数。计算垂直于地平面的目标角。",0,0,0,0,1,0,0,0,0,0,0
"功能：利用星敏感器B、C的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：轨控模式初始化
",0,0,0,1,0,0,0,0,0,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：，
输出：保持角动量所需电压， 
      角动量偏差积分项：，
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：CAN通信上行/下行数据的组帧和解包。
调用条件：每个控制任务模式计算完成后；
输入：计算结果。
输出：按照协议组帧数据。
处理：主要完成下列数据组帧、解包功能：星务接收、星务发送、快帧遥测1打包、快帧遥测2打包、快帧遥测3打包、快帧遥测4打包、快帧遥测5打包、姿态广播、星敏广播、陀螺广播、重要数据打包、上行:数据指令响应处理、上行:固定地址注入解包、上行:可变地址注入解包、上行:轨道注入解包、上行:程序注入、上行:内存下卸指令注入、上行:任务块、上行:地面站、重要数据返回解包、GPS定位广播解包、整星广播对时解包、GPS高精度秒脉冲对时广播解包、CAN总线使用要求",0,0,0,0,0,0,0,0,0,0,1
"功能描述：根据陀螺输入预估卫星对地姿态。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：利用星敏感器B的测量，修正姿态四元数与估计角速度。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：运行段喷气姿态控制及飞轮控联合运行。
处理：同用户需求的
（1）各轴喷气参数设置如表35所示
表35：运行段喷气姿态控制各轴喷气参数设置
|滚动|俯仰|偏航
|2.0|2.0|2.0
|1.0 mθD11（注1）|1.0 mθD11（注1）|1.0 mθD11（注1）
|1.0 mθD11（注2）|1.0 mθD11（注2）|1.0 mθD11（注2）
|4.5（注4）|4.5（注4）|4.5（注4）
|3.0 mθB31|3.0 mθB31|3.0 mθB31
|0.14|0.2|0.1
|0.2（注3注4）|0.2（注3注4）|0.2（注3注4）
|（注3-1）|（注3-1）|（注3-1）
|0.03|0.03|0.03
|0.08|0.08|0.08
|0.43（注3注4）|0.43（注3注4）|0.43（注3注4）
|（注3-1）|（注3-1）|（注3-1）
|0.2（注1）|0.2（注1）|0.2（注1）
|0.06（注2）|0.06（注2）|0.06（注2）
KJ2(s)|3|3|3
KJ2(s)|0.5（注3-1）|0.5（注3-1）|0.5（注3-1）
aJS（/s2）|0.137|0.235|0.089

注1：在FHU = A或 { BZ1 = 4，FEA = 0 }的条件下
注2：在FHU = A，ZT3 = F或A或B的条件下
注3：在{ BZ1=8且FRTS=1}的条件下
注3-1：在{ BZ1 = 3，ZT36 = F }的条件下
注4：在ZT40(2)=1,BZ1=1,ZT8≤3,ZT2≤2,FWH≠22的条件下
（2）进行各轴平面喷气控制规律计算（同用户需求的）
（3）根据姿轨控喷气规律计算结果，发出相应的喷气指令（同用户需求的）",0,1,0,0,0,0,0,0,0,0,0
"功能描述：接收对应秒脉冲的整秒时刻
处理： 将接收对应秒脉冲的整秒时刻存储地址中内容解包成对应秒脉冲的整秒时刻的数据格式。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：采集8路模拟太阳A\B码、监视码。
处理：
采集方法：连续采集8路，采集1路的操作步骤（以ASS1的电流1为例）：
向选通地址输出偏移地址：0x1200 0000 = 30H；
等待至少100µs,启动A/D转换：0x1200 0020 = 0；
等待至少40µs后；
连续3次读取A/D数据总线上的数据：data1 = 0x1200 0020 (data2，data3类似)；
取data1、data2、data3三个数据的中间值，作为本路模拟量的最终采集结果；",0,0,0,0,0,0,0,0,1,0,0
"功能描述：CMG奇异状态的判断及算法计算。
输入：采集得的各CMG的框架角Sgang[i]（弧度）；CMG有效性标志Lcmg[i]，Jacobi矩阵sgJ",0,1,0,0,0,0,0,0,0,0,0
"功能描述：与星敏感器通讯，获得星敏感器数据。
处理：
在使用星敏感器之前需对其进行初始化，在每个控制周期的开始向S星敏感器发出R信号，并通过串口得到S星敏感器提供的数据。在AO与S星敏感器通信过程中，AO始终处于主动状态。当AO发出R信号下降沿后星敏感器在5ms内返回数据，AO在接收完数据后把R信号置高电平，星敏感器在R信号的上升沿之后的1ms内停止发送数据。
AO为Astro10星敏感器和S星敏感器配置了2个独立的UART，分别各有256byte的FO缓存。因此可以对Astro10星敏感器和S星敏感器同时发出R信号，交替进行进行数据FO缓冲区数据读取。
与APS星敏感器通讯故障时，不使用APS星敏感器数据进行姿态修正。",0,0,0,0,0,0,0,0,1,0,0
功能描述：接收遥控固定参数注入块的轨控参数,0,0,0,0,0,0,0,0,0,1,0
"功能描述：接收遥控间接指令单元
处理：
间接指令单元指令种类包括以下四个指令：
中继程序跟踪停止指令
中继天线复位指令
整星侧摆指令
中继快扫到位指令
指令|收到后的处理
中继程序跟踪停止|置FAST=1
中继天线复位|置FARP=1，记录X轴复位角度，Y轴复位角度
整星侧摆|置FM=1，记录起摆时刻，侧摆到位用时，侧摆角
中继快扫到位|置FAFP=1，记录快扫到位绝对时间，侧摆角
",0,0,0,0,0,0,0,0,0,1,0
"功能描述：根据+Y帆板角误差控制帆板跟踪太阳。
",0,1,0,0,0,0,0,0,0,0,0
功能描述：无陀螺时用红外估计滚动、俯仰姿态角及角速度信息。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：选择通讯的红外LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）红外共有两个LTU（正俯仰红外LTU和负俯仰红外LTU），AOCC每个控制周期向注入文件中的ZT5和IresLTUSeltFlag的最大组合中指定的红外LTU发送取数指令
（2）向选择的红外LTU发送完取数指令，获得红外LTU返回的数据，将数据转换为所需的数据格式。",0,0,0,0,0,0,0,0,1,0,0
功能描述：计算得到的控制电压输出给动量轮。,0,0,0,0,0,0,0,1,0,0,0
"功能描述：检测红外HL及HR故障，并选取正确的红外信号。

处理：
FM3——5.3（1）更改：若ZT35(3)=0，则：当HL通讯自检信号中表明见太阳，则HL = 0。若ZT35(3)=0，则：当HR通讯自检信号中表示见太阳，则HR = 0。
5.3（3）更改：若HL  HR = 1且HL的LTU中的特征位为“数据正常”，则：FHL  FHL + 1。若HL  HR = 1且HR的LTU中的特征位为“数据正常”，则：FHR  FHR + 1。
5.3（4）①更改： ZT5  4，{FHR < 6，HL =0}或{ FHL < 6，HR =0}
5.3（4）③更改： ZT5  4，HL = 1，HR = 0，FHL  6
5.3（4）④更改：ZT5  4，HR = 1，HL = 0， FHR  6
将红外数据有效性互检中的判断逻辑，扣除标称侧摆角度。",0,0,0,0,0,1,0,0,0,0,0
"功能描述：各模式控制量计算
序号|功能编号|功能简述|功能详述
|FREQ3.4.3.1|等待段调用流程|用户需求4.1.1【调用流程】
|FREQ3.4.3.2|太阳定向模式调用流程|用户需求4.1.2【调用流程】
|FREQ3.4.3.3|恒星定向2/4模式调用流程|用户需求4.1.3【调用流程】
|FREQ3.4.3.4|惯性调姿模式调用流程|用户需求4.1.5【调用流程】
|FREQ3.4.3.5|轨控定向模式调用流程|用户需求4.1.6【调用流程】
|FREQ3.4.3.6|着陆准备模式调用流程|用户需求4.1.7【调用流程】
|FREQ3.4.3.7|主减速模式调用流程|用户需求4.1.8【调用流程】
|FREQ3.4.3.8|快速调整模式调用流程|用户需求4.1.9【调用流程】
|FREQ3.4.3.9|接近下降模式调用流程|用户需求4.1.10【调用流程】
|FREQ3.4.3.10|悬停模式调用流程|用户需求4.1.11【调用流程】
|FREQ3.4.3.11|避障模式调用流程|用户需求4.1.12【调用流程】
|FREQ3.4.3.12|缓速下降模式调用流程|用户需求4.1.13【调用流程】
|FREQ3.4.3.13|自主定位模式调用流程|用户需求4.1.14【调用流程】
|FREQ3.4.3.14|起飞准备模式调用流程|用户需求4.1.15【调用流程】
|FREQ3.4.3.15|垂直上升模式调用流程|用户需求4.1.16【调用流程】
|FREQ3.4.3.16|上升调姿模式调用流程|用户需求4.1.17【调用流程】
|FREQ3.4.3.17|轨道入射模式调用流程|用户需求4.1.18【调用流程】
|FREQ3.4.3.18|星光环月模式调用流程|用户需求4.1.19【调用流程】
|FREQ3.4.3.19|速率阻尼模式调用流程|用户需求4.1.20【调用流程】
|FREQ3.4.3.20|无控模式调用流程|用户需求4.1.21【调用流程】
",0,0,0,1,0,0,0,0,0,0,0
"功能描述：CMG数据处理
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：规划串口数据接收发送。
处理：
功能编号|功能|引用文档
FREQ101|初始化|任务书
FREQ102|规划串口使用要求|任务书
FREQ103|通信|任务书
FREQ104|通信故障处理|任务书
FREQ105|数据解包与转换|任务书
FREQ106|规划串口数据有效性处理|任务书
FREQ107|规划串口硬件采集、处理|预留
FREQ108|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,1,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|陀螺数据处理|FREQ3.1|5.2.1|把陀螺数据、、、变换到星体系中的、、
|陀螺预估惯性姿态|FREQ3.2|5.2.2|根据陀螺输入，预估卫星惯性姿态
|陀螺预估对地姿态|FREQ3.3|5.2.3|根据陀螺测量输出，一步预估卫星姿态
|陀螺预估惯性四元数|FREQ3.4|5.2.4|根据陀螺测量输出，一步预估卫星惯性姿态
|动力学预估惯性四元数|FREQ3.5|5.2.5|根据动力学模型，预估卫星惯性姿态
|基于红外滤波的卫星姿态确定|FREQ3.6|5.2.6|根据陀螺预估结果和红外(和数字太阳)输出，确定卫星姿态
|星敏感器与陀螺姿态修正|FREQ3.7|5.2.7|利用星敏感器和陀螺的输出或仅利用陀螺预估输出计算卫星欧拉角和四元数
|单星敏感器的姿态修正|FREQ3.7.1|5.2.7.1|利用单个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|双星敏感器的姿态修正|FREQ3.7.2|5.2.7.2|利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|对地姿态修正|FREQ3.7.3|5.2.7.3|利用估计的四元数转换姿态角
|星敏感器与动力学姿态修正|FREQ3.8|5.2.8|利用星敏感器的输出计算卫星欧拉角和四元数
|仅单星敏感器的姿态修正|FREQ3.8.1|5.2.8.1|仅利用单个星敏感器的测量，修正姿态四元数与姿态角速度
|仅双星敏感器的姿态修正|FREQ3.8.2|5.2.8.2|仅利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|无陀螺对地姿态修正|FREQ3.8.3|5.2.8.3|利用估计的四元数转换姿态角，送给星敏感器的四元数
|红外与太阳双矢量定姿|FREQ3.9|5.2.9|利用红外、数字太阳敏感器确定姿态
|星敏感器相对基准标定|FREQ3.10|5.2.10|对星敏的相对基准进行标定，修正星敏安装矩阵
|星敏感器双矢量姿态确定|FREQ3.11.1|5.2.11.1|利用星敏的测量，确定单点的卫星姿态四元数。
|星敏姿态四元数重置|FREQ3.11.2|5.2.11.2|进行卫星姿态四元数的重置
|三轴欧拉姿态角预估算法产品规范|FREQ3.1.1|/|规范化算法：
|姿态四元数预估算法产品规范|FREQ3.1.2|/|规范化算法：
|重力梯度力矩计算算法算法产品规范|FREQ3.1.3|/|规范化算法：
|基于红外测量的红外滤波修正算法产品规范|FREQ3.1.4|/|规范化算法：
|基于单星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.5|/|规范化算法：
|基于双星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.6|/|规范化算法：
|基于红外与太阳矢量的双矢量定姿算法算法产品规范|FREQ3.1.7|/|规范化算法：
|星敏感器相对基准的在轨标定算法产品规范|FREQ3.1.8|/|规范化算法：
|目标姿态计算流程|FREQ3.12|5.3.1|目标姿态计算流程
|正常、偏置飞行目标姿态计算|FREQ3.12.1|5.3.1.1|正常与偏置姿态飞行时的目标姿态计算
|点对点机动目标姿态计算|FREQ3.12.2|5.3.1.2|点对点机动目标姿态计算
|姿态预置过程目标姿态计算|FREQ3.12.3|5.3.1.3|姿态预置过程目标姿态计算
|轨迹跟踪目标姿态计算|FREQ3.12.4|5.3.1.5|角速度建立过程目标姿态计算
|轨控目标姿态计算|FREQ3.12.5|5.3.1.6|轨控目标姿态计算
|角速度扫描阶段目标姿态计算|FREQ3.12.6.1|5.3.1.4|角速度扫描阶段目标姿态计算
|轨控姿态机动轨迹初始化|FREQ3.12.6.2|5.3.2.3|轨控模式目标姿态计算初始化
|正弦轨迹规划算法算法产品规范|FREQ3.12.7|/|规范化算法：
|基于加速度导数为正弦函数的轨迹规划算法算法产品规范|FREQ3.12.8|/|规范化算法：
|点对点姿态机动初始化处理|FREQ3.13|5.3.2.1|三轴姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉轴/角，以及轨迹的加速，匀速和减速等特征时间点。
|非沿迹跟踪初始化|FREQ3.14|5.3.2.2|非沿迹跟踪初始化，计算地心张角和方向矢量
|计算多项式轨迹系数|FREQ3.15|5.3.3.1|根据轨迹规划时间，初始姿态/姿态角速度和目标姿态/姿态角速度计算基于多项式轨迹规划的轨迹系数
|姿态预置机动目标姿态确定|FREQ3.16|5.3.3.2|基于多项式曲线的轨迹规划，计算目标姿态
|轨迹跟踪目标姿态角计算|FREQ3.17|5.3.4|根据所指定的扫描起始经纬度和末端点经纬度
|偏流角计算|FREQ3.18|5.3.5|适用于地球椭球模型，星体姿态描述为转序，计算基于星体光轴(与星本体＋Z轴平行)下的偏流角
|姿态控制量计算|FREQ3.19|5.2.12|根据姿态确定结果和目标姿态计算结果计算误差姿态角和误差姿态角速度
|引入系统闭环姿态确定|FREQ3.20|5.2.13|根据定姿标志确定引入系统的闭环姿态
|增量式偏流角计算算法产品规范|FREQ3.21|/|规范化算法：
|匀地速姿态预置目标姿态计算|FREQ3.22|5.12|计算模式2/5经模式4转入模式6时姿态预置的目标姿态及角速度
|匀角速度预置目标姿态计算|FREQ3.23|5.13|计算模式2/5经模式4转入模式7时姿态预置的目标姿态及角速度
|零姿态预置目标姿态计算|FREQ3.24|5.14|计算模式6/7经模式4转入模式2时姿态预置的目标姿态及角速度
|陀螺标定过程目标姿态计算|FREQ3.25.0|5.15.1|陀螺标定全过程的目标姿态计算，包括目标惯性角速度和目标四元数，并在回轨道对地零姿态过程中计算目标欧拉角
|目标姿态计算初始化|FREQ3.25.1|5.15.1.1|对陀螺标定过程中涉及到的两次机动过程进行机动姿态计算的初始化
|惯性姿态点对点机动轨迹规划|FREQ3.25.2|5.15.1.2|对陀螺标定过程所涉及到的两次点对点机动进行轨迹规划
|角速度起速保持与减速过程轨迹规划|FREQ3.25.3|5.15.1.3|对陀螺标定过程中的速度运行进行轨迹规划
|大角速度标定的分档确定|FREQ3.25.4|5.15.1.4|根据实现指向的4挡速度，根据当前的速度的幅值，确定所标定的陀螺刻度因子的位置
|惯性定向时转阶段处理|FREQ3.25.5|5.15.1.5|陀螺标定在第1段中完成惯性定向，并在此期间标定陀螺真实常漂。在惯性定向转速度运行结束时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等。
|速度运行时转阶段处理|FREQ3.25.6|5.15.1.6|SubMode= 2~9，陀螺按照规定的角速度完成起速、恒速运行、减速和惯性定向四个步骤后，在转入下一个阶段时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等
|速度曲线规划|FREQ3.25.7|5.15.1.7|根据所选择的机动轨迹，规划出角速度变化曲线
|陀螺标定算法|FREQ3.26.0|5.15.2|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺常漂修正标志确定|FREQ3.26.1|5.15.2.1|对陀螺标定过程中，陀螺常漂的修正标志进行确定。当星体达到了规定的惯性角速度时，开始进行陀螺常漂估计
|基于星敏陀螺滤波的等效常漂估计|FREQ3.26.2|5.15.2.2|采用星敏陀螺滤波的方法对陀螺等效常漂进行估计
|星敏陀螺滤波的陀螺等效常漂记录|FREQ3.26.3|5.15.2.3|对陀螺等效常漂，选取稳态时的一段数据进行平均，得到各个角速度下的等效常漂和星体真实角速度的估计值
|小角速度时的陀螺安装误差和刻度因子误差估计|FREQ3.26.4|5.15.2.4|经过N次速度机动后，对陀螺的测量模型进行标定，给出标定结果
|大角速度时的陀螺标定算法|FREQ3.26.5|5.15.2.5|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺在轨标定时的控制量计算|FREQ3.27|5.15.3|对标定过程中的控制量进行计算
|陀螺安装误差标校结果引入|FREQ3.28|5.15.4|对陀螺完成标定后，待地面确认标定结果无误后，将陀螺的标定结果进行赋值。当地面注入FP__MountingCmp时执行本程序一次
|陀螺刻度因子误差标校结果引入|FREQ3.29|5.15.5|完成陀螺标定，待地面确认无误后，对陀螺的刻度因子进行在轨标校。标校时，取陀螺输出的角速度与与之最接近的两个已标定的特征角速度进行线性插值标校
|偏航对日目标姿态计算|FREQ3.30|5.3.1.7|偏航对日模式下的目标姿态机动
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：利用星敏感器A、B的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：输出磁力矩器控制电源。
处理：
功能编号|功能|引用文档
FREQ110|初始化|任务书
FREQ111|磁力矩器使用要求|任务书
FREQ112|通信(DA)|任务书
FREQ113|通信故障处理|预留
FREQ114|数据解包与转换|预留
FREQ115|磁力矩器数据有效性处理|预留
FREQ116|磁力矩器硬件采集、处理|任务书
FREQ117|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,1,0,0,0
"功能描述：使星体Z轴捕获太阳。
处理过程：
STEP1:帆板归零
STEP2:若FSA=0太阳未捕获且ZT13≠4不用数字太阳捕获，则使用0-1太阳敏感器进行捕获。公式见（2）
STEP3:若FSA=0太阳未捕获且ZT13=4用数字太阳捕获，则使用数字太阳敏感器进行捕获，直至两个数字太阳都见太阳，置FSA=5初捕获。公式见（3）
STEP4：当ZT43[4]=1允许陀螺自主加电且FlagGyroAdd=1正在给陀螺加电时，设置FSA=0。若FSA=0，则调用速率喷气控制。
STEP5:若ZT2=2飞轮整星零动量控制模式，且工作飞轮的分数都不小于12分，则调用飞轮动量保持控制及飞轮启动。
STRP6:若ZT2≠2或出现工作飞轮的分数小于12分，则6个飞轮的输出电压都置0。",0,1,0,0,0,0,0,0,0,0,0
功能描述：地面站赤经赤纬计算,0,0,0,0,1,0,0,0,0,0,0
"功能描述：选择通讯的帆板LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）帆板共有四个LTU，各有两个互为备份的LTU，通过每个LTU均可获得对应的帆板转角和零位信息；每个控制周期根据BAPTALTUSeltFlag确定进行通讯的帆板LTU，发送取数指令。
（2）向帆板LTU发完取数命令后，获得LTU返回数据，将数据根据LTU通讯协议转换为控制计算所需的数据格式。在控制周期任务后根据帆板控制算法算出需要发送的帆板控制指令。
（3）帆板LTU数据采集过程中的故障处理见任务书中规定。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：根据红外信息，作姿态滤波修正。
",0,0,1,0,0,0,0,0,0,0,0
功能：利用双矢量姿态输出修正姿态估值、估计陀螺漂移及红外常值误差。,0,0,1,0,0,0,0,0,0,0,0
"功能描述：每0.524秒中断服务程序。
处理：
STEP1：数据采集
STEP2：红外数据采集及处理；
STEP3：动量轮状态确定；
STEP4：部件工作状态确定；
STEP5：模拟式太阳敏感器信号选取
STEP6：若ZT38（1）= 1，则调用帆板未展开模式；
STEP7：若BZ8  5，则进行STEP8，否则退出；
STEP8：数据校正（1）；
STEP9：若ZT39(1) = 1，则调用偏流角计算，否则：；
        若ZT5=0且FlagInitIRESAtt=1，则：， FlagInitIRESAtt=0
STEP10：若BZ1 = B，则进行入轨段控制；
STEP11：若BZ1 = 3或4，则
进行全姿态捕获对日定向，对地三轴稳定；
；
输出磁力矩器控制电压；
STEP12：若BZ1 = 1或2或8或9，则进行Z轴对地控制模式；
STEP13：若BZ1 = 7，则进行姿态无控飞行模式；
STEP14：若BZ1 = C，D，F且ZT32 = A，则：
进行自旋模式
输出飞轮及磁力矩器控制电压。
STEP15：若C1 = FFFF，则：按ZT8，ZT9来决定发轨控发动机加温开指令；
STEP16：若BZ1 = 8，则：；
STEP17：若FBZ1 ≠ BZ1，则：，；
STEP18：若BZ1 = 1或9，则进行动量轮故障检测及切换；
STEP19：FBZ1 = BZ1；
STEP20：若ZT36 = 3，则进行自旋模式，该程序采用注入在轨维护程序的方式实现。
STEP22：若（BZ1=3或BZ1=7） 且ZT43[4]= 1且 FlagGyroAdd=1，则：
；若，则：=0，FlagGyroAdd=0；
若ZT43[4]= 1且FlagGyroAdd=0，（BZ1=3且FSA=0）或BZ1=4，且，则Call  5.9（陀螺故障检测及选择）
STEP23:若ZT41[1]=1且且FlagFSA=5，则：{若FSAA连续成立3000，则：连续时间计时清零；FlagFSA=0；ZT41[1]=0；若，且<1或>6，则：=1；；切换太敏LTU}     否则：连续时间计时清零；若BZ13，则FlagFSA=0；
STEP24:系统工作模式确定。",0,0,0,1,0,0,0,0,0,0,0
功能描述：飞轮进行整星零动量和侧摆控制。,0,1,0,0,0,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|CMG 1数据的采集与处理|FREQ1.9.1|""CMG 1
1553B取数指令
""|CMG 1的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 1的当班标志为1），每周期向CMG 1RT发取数指令，获得CMG 1数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 2数据的采集与处理|FREQ1.9.2|""CMG 2
1553B取数指令
""|CMG 2的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 2的当班标志为1），每周期向CMG 2RT发取数指令，获得CMG 2数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 3数据的采集与处理|FREQ1.3.3|""CMG 3
1553B取数指令
""|CMG 3的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 3的当班标志为1），每周期向CMG 3RT发取数指令，获得CMG 3数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 4数据的采集与处理|FREQ1.9.4|""CMG 4
1553B取数指令
""|CMG 4的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 4的当班标志为1），每周期向CMG 4RT发取数指令，获得CMG 4数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 5数据的采集与处理|FREQ1.9.5|""CMG 5
1553B取数指令
""|CMG 5的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 5的当班标志为1），每周期向CMG 5RT发取数指令，获得CMG 5数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG 控制指令的输出处理|FREQ1.9.6|计算得到CMG的控制数据|CMG的控制指令输出消息指令|根据控制方式发送相应的控制指令，具体见内总线通讯协议
|CMG 6数据的采集与处理|FREQ1.9.7|""CMG 6
1553B取数指令
""|CMG 6的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 6的当班标志为1），每周期向CMG 6 RT发取数指令，获得CMG 6数据并处理成对应的高速角动量、低速框架角度和角速度。
|CMG的程序注入修改|FREQ1.9.8|从OBDH收到的CMG需修改程序内容|CMG需修改程序内容|将从OBDH收到的CMG需修改程序内容，按内总线的格式发送给CMG RT需修改的程序内容
|CMG的内存下传|FREQ1.9.9|从OBDH收到的CMG内存下传设置指令|内存下传设置指令|地面注入CMG内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至CMG RT。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：选择通讯的陀螺LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）陀螺数据采集在BZ8=5（轨控模式轨控期间、帆板未展开模式和全姿态捕获模式太阳捕获期间）的采样周期为0.262秒，其余模式的采样周期为0.524秒。
（2）陀螺共有三个互为备份的LTU，通过每个LTU均可获得六个陀螺的数据；AOCC向陀螺LTU发送取数命令1和取数命令2来获得数据，其中取数命令1有两个字节，取数命令2有一个字节；只有取数命令1通讯不成功时才发取数命令2。AOCC根据ZT14（4）（3）来确定和哪个LTU进行通讯，同时确定通道选择号和取数命令1和取数命令2的第一个字节。 
ZT14(4)(3)的值|进行通讯的陀螺LTU|取数命令1和命令2
01|陀螺LTU1|53H和5CH
10|陀螺LTU2|63H和6CH
11|陀螺LTU3|73H和7CH
00|根据LTU故障诊断的结果决定陀螺LTU的选取。初始状态为陀螺LTU1|53H（或63H或73H）和5CH（或6CH或7CH）

（3）AOCC根据ZT15、ZT16确定要采集哪几个陀螺的数据（加电的陀螺），即决定取数命令1中的第二个字节（工作陀螺编码字节）的低6位，。ZT15、ZT16与第二个字节的对应关系如下：
取数命令1的第二个字节
D0
ZT15（1）

（4）将陀螺LTU返回的数据根据LTU通讯协议中的计算公式转换为陀螺的角度增量（弧度）。根据ZT46、ZT47确定当前引入陀螺。
（5）陀螺LTU数据采集过程中的故障处理见本文的.1。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：采集动量轮的转速方向和脉冲计量，计算动量轮的角动量
处理：处理如下：
（1）读每路动量轮计算器的值，将读到的计数器的值减去上一个周期的计数器的值，得到差值；
（2）根据转换公式将脉冲数转换为角动量。
（3）令（i = 1，2，… ，6）。为上一次轮子角动量值。",0,0,0,0,0,0,0,0,1,0,0
功能描述：发送轨道数据包,0,0,0,0,0,0,0,0,0,0,1
功能描述：决定采用磁卸载还是喷气卸载方式，调用相应程序。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：与帆板通信，控制帆板并获得帆板状态数据。
处理：
见通信协议。
功能编号|功能|引用文档
FREQ70|初始化|中心控制单元与双轴帆板驱动线路通信协议
FREQ71|帆板使用要求|任务书、帆板协议
FREQ72|通信(串口)|任务书、帆板协议
FREQ73|通信故障处理|任务书
FREQ74|数据解包与转换|帆板协议
FREQ75|帆板数据有效性判断、处理|任务书
FREQ76|帆板模拟量采集、处理|任务书
FREQ77|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：仅利用星敏感器B、C的测量，修正姿态四元数与姿态角速度移。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：检测工作中的动量轮的故障并设置BZ3。,0,0,0,0,0,1,0,0,0,0,0
"功能描述：地垂线捕获后，捕获偏航角，建立对地三轴稳定。
",0,0,1,0,0,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|卫星轨道参数外推计算|FREQ2.0|5.1.1|实时计算卫星轨道参数。
|轨道外推根数获取与星历计算|FREQ2.1|5.1.2|岁差章动计算、GPS 轨道数据判断、太阳星历、地面站位置、地磁场强度计算
|GPS轨道数据有效性判断|FREQ2.2|5.1.2.2|对GPS轨道数据的有效性进行判断
|GPS 通道版和轨道版轨道计算|FREQ2.3|5.1.2.2.1和5.1.2.2.2|利用GPS 通道版和轨道版数据进行GPS 定轨程序
| 系的卫星位置及速度计算|FREQ2.4|5.1.2.5|将J2000 系的卫星位置与速度转换为WGS84 系的位置和速度
|近圆中低轨卫星轨道根数外推算法产品规范|FREQ2.5|/|规范化算法：
|近圆中低轨卫星GPS轨道计算算法产品规范|FREQ2.6|/|规范化算法：
|岁差章动矩阵计算算法产品规范|FREQ2.7|/|规范化算法：
|4阶星上地磁场计算方法算法产品规范|FREQ2.8|/|规范化算法：
|光行差计算算法产品规范|FREQ2.9|/|规范化算法：
|自主轨控计算及发送请求|FREQ2.10.0|5.1.2.6|根据实际与标称轨道参数计算轨控参数，并进行轨控申请
|自主轨控计算初始化|FREQ2.10.1|5.1.2.6.1|进行自主轨控远地点选取和轨控时间计算
|发送自主轨控请求|FREQ2.10.2|5.1.2.6.2|发送轨控加温请求，判断是否可以进行自主轨控
|牛顿插值法|FREQ2.1.2|6.1.25|根据一组已知时刻函数值，推断任意时刻函数值
",0,0,0,0,1,0,0,0,0,0,0
"功能描述：与CAN通信获得上行/下行数据。
调用条件：OBC在CAN总线中断中接收/发送数据；
通过CAN总线与星务分系统通信，交换数据，以实现星地联系和对卫星的人工干预。",0,0,0,0,0,0,0,0,0,0,1
"功能描述：在完成对日定向后，。
输入：陀螺数据处理的输出 ，
太阳星历的输出，
数字太阳敏感器输出：, （量纲：弧度）
红外地球敏感器数据有效性标志F_IresValid（由数据有效性判据给出）
数字太阳敏感器数据有效性标志F_Ds1Valid，F_Ds2Valid（由数据有效性判据给出），
红外数据有效性输出 ，
",0,0,1,0,0,0,0,0,0,0,0
功能描述：由GPS得到轨道外推的16根数。,0,0,0,0,1,0,0,0,0,0,0
"功能描述：
卫星异常情况进入停控模式的处理（功能编号：FReq-17）。
处理：
软件设置停控方式字（为三取二变量，可与太阳捕获方式共用），当判断为停控方式时，停止模式判断和处理，停止控制器计算，停止故障判断和处理，将5N推力器输出和开关脉冲输出口清零；
一旦软件进入停控方式，将无法自主恢复太阳捕获的控制方式。此时，如果想恢复正常控制，在确认部件工作状态后，地面遥控操作；
速率阻尼后，三轴中任意一轴角速度持续625个控制周期（80s）大于2.0°/s，转入停控方式，其中任意一轴角速度大于2.0°/s，实现为三轴角度绝对值的最大值大于2.0°/s； ",0,0,0,0,0,1,0,0,0,0,0
功能描述：自旋模式控制,0,0,0,1,0,0,0,0,0,0,0
功能描述：确定数字太阳数据的有效性。,0,0,0,0,0,0,1,0,0,0,0
"时间服务采用1s作为时间同步周期，BC使用子地址29发送时间消息，使用广播方式发送，A、B总线各广播一次。本型号选用“一步方式”，即仅发送时间消息而没有时间同步消息，时间数据消息在通信帧0末发出。对于接收硬件秒脉冲信号的用户，时间码的整秒部就是秒脉冲对应的整秒时刻。因此包含的功能点为两个：
序号|功能描述|功能编号|
|接收OBDH校时时刻|FREQ7.1.1|设置OBDH校时标志TimeFlg.RcvOBDH
|接收GPS秒脉冲时刻|FREQ7.1.2|设置GPS校时标志
",0,0,0,0,0,0,0,0,0,1,0
"功能描述：根据姿态估值与数字太阳输出，计算量测的一步预测与新息，建立数字太阳输出的可用性标志。
",0,0,1,0,0,0,0,0,0,0,0
"需求名称|功能描述
部件数据有效性判断|对部件采样数据的有效性进行判断，并选择引入闭环控制系统的数据
陀螺数据有效性判断|判断定姿用陀螺数据的有效性，选择参与定姿的陀螺
模拟太阳敏感器数据有效性判断|确定ASS21，ASS22，ASS31，ASS32及帆板角度传感器，等的信号选取
红外地球敏感器数据有效性判断|判断红外地球敏感器有效性
星敏感器数据有效性判断|对星敏感器输出数据进行有效性判断，并选取定姿星敏组合
数字太阳敏感器数据有效性判断|对数字太阳敏感器输出数据进行有效性判断
部件故障诊断|对部件进行故障诊断
陀螺故障诊断|由平衡方程方法、星敏感器数据等对陀螺进行故障检测
CMG故障诊断|根据CMG输出数据和理论数据进行CMG故障检测
推进喷气异常检测|检测推力器微漏、过量喷气等，必要时作相应的主备份切换和禁止。
帆板故障诊断|帆板故障检测及处理
模式1的系统故障诊断|在模式1中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式2的系统故障诊断|在模式2中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式3的系统故障诊断|在模式3中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式4、6、7的系统故障诊断|在模式4、6、7中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式5的系统故障诊断|在模式5中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式8的系统故障诊断|在模式8中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式9的系统故障诊断|在模式9中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
RS422通讯故障诊断|进行RS422通讯故障诊断及处理
光纤陀螺通讯诊断及处理|进行光纤陀螺通讯故障诊断及处理
数字太阳通讯诊断及处理|进行数字太阳通讯故障诊断及处理
太阳模拟量通讯诊断及处理|进行太阳通讯故障诊断及处理
对地数传天线通讯诊断及处理|进行对地数传天线通讯故障诊断及处理
中继天线通讯诊断及处理|进行中继天线通讯故障诊断及处理
1553B内总线通讯故障诊断|进行1553B内总线通讯故障诊断及处理；BAPTAE进最小模式且不能自主切换后需要提“BAPTA故障”
红外通讯故障诊断|红外通讯故障诊断及处理
大量程陀螺通讯故障诊断|大量程通讯故障诊断及处理
CMG通讯故障诊断|CMG通讯故障诊断及处理
ACU通讯故障诊断|ACU通讯故障诊断及处理
帆板通讯故障诊断|帆板通讯故障诊断及处理
多头星敏通讯故障诊断|多头星敏通讯故障诊断及处理
1553B内总线总线监视及处理要求|CCU作为内1553B总线的BC，在与各RT通讯时需要进行总线状态监视
CMG在轨跑合|自主跑合功能包含CMG跑合的执行序列、必要的安全处置策略，以及数据统计功能。",0,0,0,0,0,0,1,0,0,0,0
"功能描述：星时计算
处理：控制周期中断服务程序，对星时加1",0,0,0,0,0,0,0,0,1,0,0
"功能描述：发送AOCC时间
处理：
CTU复位后需要从AOCC恢复重要数据和星上时间。首先CTU发送“接收用于做时间差值的时间码”指令，将CTU目前的时间发送给AOCC。AOCC将星上时间和接收到的CTU时间做差值处理，将AOCC时间-CTU时间保存。CTU在1s后发送“发送时间差值”指令，AOCC将保存的时间差值发送给CTU。",0,0,0,0,0,0,0,0,0,1,0
功能描述：偏置动量轮处于力矩模式，根据红外或星敏测量信息计算得到的滚动角和俯仰角实现三轴姿态控制。滚动、俯仰轴采用角动量反馈方式控制，偏航轴采用耦合控制。,0,1,0,0,0,0,0,0,0,0,0
功能描述：动量轮喷气卸载进入和退出条件计算。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：根据红外信息，进行全姿态捕获
",0,0,1,0,0,0,0,0,0,0,0
功能描述：根据星敏感器的输出数据判断陀螺故障。,0,0,0,0,0,1,0,0,0,0,0
"功能描述：根据陀螺输入，预估卫星惯性姿态四元数。
",0,0,1,0,0,0,0,0,0,0,0
"软件需求标识：FREQ19 
软件需求名称：星敏数据处理 
需求类别：其他 
软件需求描述：星敏数据处理。",0,0,0,0,0,0,0,0,1,0,0
功能描述：利用轨道外推的计算结果，计算其他待用参数。,0,0,0,0,1,0,0,0,0,0,0
"功能描述：接收OBDH时间
处理：按接收OBDH时间命令存储地址中内容的数据格式处理成星时的数据格式。此处理在中断中进行。",0,0,0,0,0,0,0,0,0,1,0
"AO在主动段初始化中进行如下工作：
星时清零；
工作模式为主动段；",1,0,0,0,0,0,0,0,0,0,0
"功能描述：CAN通信上行/下行数据的组帧和解包。
调用条件：每个控制任务模式计算完成后；
输入：计算结果。
输出：按照协议组帧数据。
处理：主要完成下列数据组帧、解包功能：星务发送、快帧遥测1打包、快帧遥测2打包、快帧遥测3打包、快帧遥测4打包、快帧遥测5打包、慢帧遥测打包、姿态广播、星敏广播、陀螺广播、其他广播(行周期广播)、重要数据打包、上行:数据指令响应处理、上行:固定地址注入解包、上行:可变地址注入解包、上行:轨道注入解包、上行:程序注入、上行:内存下卸指令注入、上行:任务块、上行:地面站、重要数据返回解包、GPS定位广播解包、整星广播对时解包、GPS高精度秒脉冲对时广播解包、CAN总线使用要求",0,0,0,0,0,0,0,0,0,0,1
"功能描述：仅利用星敏感器A、C的测量，修正姿态四元数与姿态角速度移。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：ACU模拟量遥测 ,0,0,0,0,0,0,0,0,1,0,0
功能描述：数传天线数据处理,0,0,0,0,0,0,0,0,1,0,0
"功能描述：根据陀螺输入，予估卫星对地姿态。
",0,0,1,0,0,0,0,0,0,0,0
"根据不同的任务要求划分了各个模式，模式控制作为一个功能的集合体反映了任务的执行情况，是确认测试和系统实验验证的要的功能。
序|需求名称|编号|输入章节号|功能描述
|入轨段控制模式控制|FREQ5.2.1|4.1|入轨段控制模式控制调用流程
|正常对地运行模式控制|FREQ5.2.2|4.2|正常对地运行模式控制调用流程
|点对点机动模式控制|FREQ5.2.3|4.3|点对点机动模式控制调用流程
|姿态/角速度预置模式控制|FREQ5.2.4|4.4|姿态/角速度预置模式控制调用流程
|偏置飞行模式控制|FREQ5.2.5|4.5|偏置飞行模式控制调用流程
|匀地速跟踪模式控制|FREQ5.2.6|4.6|匀地速跟踪模式控制调用流程
|匀角速度匀积分时间跟踪模式控制|FREQ5.2.7|4.7|一般轨迹跟踪模式控制调用流程
|轨控模式控制|FREQ5.2.8|4.9|轨控模式控制调用流程
|全姿态捕获模式控制|FREQ5.2.9|4.10|全姿态捕获模式控制调用流程
|无控模式控制|FREQ5.2.10|4.11|无控模式控制调用流程
|凝视姿态跟踪模式控制|FREQ5.2.11|4.12|凝视姿态跟踪模式控制调用流程
|测试与标定模式控制|FREQ5.2.12|4.8|测试与标定模式控制调用流程
|惯性定向模式控制|FREQ5.2.13|4.13|惯性定向模式控制调用流程

模式初始化的功能点如下：
序|需求名称|编号|输入章节号|功能描述
|入轨段控制模式初始化|FREQ5.3.1|4.1|入轨段控制模式初始化设置
|正常对地运行模式初始化|FREQ5.3.2|4.2|正常对地运行模式初始化设置
|点对点机动模式初始化|FREQ5.3.3|4.3|点对点机动模式初始化设置
|姿态/角速度预置模式初始化|FREQ5.3.4|4.4|姿态/角速度预置模式初始化设置
|偏置飞行模式初始化|FREQ5.3.5|4.5|偏置飞行模式初始化设置
|匀地速跟踪模式初始化|FREQ5.3.6|4.6|匀地速跟踪模式初始化设置
|匀角速度匀积分时间跟踪模式初始化|FREQ5.3.7|4.7|一般轨迹跟踪模式初始化设置
|轨控模式初始化|FREQ5.3.8|4.9|轨控模式初始化设置
|全姿态捕获模式初始化|FREQ5.3.9|4.10|全姿态捕获模式初始化设置
|无控模式初始化|FREQ5.3.10|4.11|无控模式初始化设置
|凝视姿态跟踪模式初始化|FREQ5.3.11|4.12|凝视姿态跟踪模式初始化设置
|测试与标定模式初始化|FREQ5.3.12|4.8|测试与标定模式初始化设置
|惯性定向模式初始化|FREQ5.3.13|4.13|惯性定向模式初始化设置

主动段和无控工作模式下并不进行姿态确定和控制的计算，其它各个模式控制中调用卫星轨道和星历计算、姿态确定、姿态和轨道控制及部件有效性和故障诊断以及模式初始化的内容具体见用户需求的4。",0,0,0,1,0,0,0,0,0,0,0
"功能描述：选择通讯的红外LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）红外共有两个LTU（正俯仰红外LTU和负俯仰红外LTU），AOCC每个控制周期向注入文件中的ZT5和IresLTUSeltFlag的最大组合中指定的和加电的红外LTU发送取数指令
（2）向选择的红外LTU发送完取数指令，获得红外LTU返回的数据，将数据转换为所需的数据格式。
",0,0,0,0,0,0,0,0,1,0,0
"通讯串口
04H|波特率寄存器|RW|波特率寄存器低位：0x04（115200）
08H|波特率寄存器|RW|波特率寄存器高位：0x00

CAN总线初始化
寄存器名称|初始化内容|初始化意义
""CAN_ADDR        
(CAN总线地址)""|无。|无说明。
""控制寄存器
(Control Register)
""|0x03|""D7D6D5：保留。
D4：超载（接收设备不能按数据发送速率接收数据而造成的数据丢失）中断使能。
高：开放。低：禁止
D3：错误中断使能。
高：开放。低：禁止
D2：发送中断使能。
高：开放。低：禁止
D1：接收中断使能。
高：开放。低：禁止
D0：复位模式。
在初始化的时候，复位模式位置1，才可以进行初始化设置。""
命令寄存器(Command register)|0x=00001100|""D7D6D5：保留。必须。
D4：进入睡眠状态。
高：睡眠 。低：睡眠唤醒。
D3：清除超载状态。不产生超载中断。
高：清除。低：无动作。
D2：释放接收缓冲器。（读接收缓存器内容后，释放缓存器，以便其他报文立即可用）。
高：释放。低：无动作。
D1：夭折发送。
D0：发送请求。
高：报文即将发送。低：无动作。""
""验收代码寄存器
(Acceptance 
Code Register)""|0x87= 10000111|""当通过验收测试的报文被接收，且若存在空的接收缓存器，则各自的描述符和数据场被顺序存贮在空的缓存器中，在不存在空的接收缓存器的情况下，数据超载位被置位高(超载)，当完整的报文被正确接收，将出现下列操作：
接收缓存器状态位被置为高(满)
若接收中断开放位被置为高(开放)，接收中断被置为高(置位)
验收码位(AC.7~AC.0)和报文标识符的最高8位(ID.10~ID.3)必须等于由验收屏蔽位必须满足""
""验收屏蔽寄存器
((Acceptance 
Mask Register))""|0xf8|最后三位相关。
总线时序寄存器0(Bus Timing Register 0)|0x00|""总线时序寄存器的内容决定波特率预分频器(BRP)和同步跳转宽度(SJW)的数值。

通过总线定时器的内容，将波特率预分频器设置为2，即将输入的系统时钟二分频，由于输入的系统时钟已经是将计算机晶体频率14.7456MHz二分频，即7.3728MHz。所以这个时候时钟为3.6864 MHz。""
总线时序寄存器1(Bus Timing Register 1)|0x18|""采样（SAM）=1总线采样1次。
TSEG1和TSEG2确定每位周期的时钟周期数目和采样点位置：

由于一位周期是由

而

波特率＝""
""时钟分频器
(Clock Divider
register)""|0x40|""D7:CAN模式。
0：基本模式。
D5:1(旁路输入比较器，仅在复位模式下起作用)。""
""OCR
(output Control)""|0x|

在完成上述初始化后，要再次初始化控制寄存器。将最低位初始化为0。
说明：地址表上“CAN总线地址”实际是一个写信号的地址，完成对CAN总线控制芯片的选择。因为CAN总线控制芯片的分时复用地址/数据总线（AD7~AD0）实际是和的数据线(D0~D7)接在一起的，该分时复用地址实际是选择控制寄存器用的。这样对于端口寄存器的选择，必须通过数据的写入来完成。对“CAN总线地址”的写入，起到选通CAN控制芯片的作用，而写入的内容，就是对端口寄存器的选择。",1,0,0,0,0,0,0,0,0,0,0
"功能描述：仅利用星敏感器A的测量，修正姿态四元数与姿态角速度移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：从SDC获取部件供电状态信息
处理：读入各部件加电状态信息并遥测打包。",0,0,0,0,0,0,0,0,1,0,0
"功能描述：系统软件上电复位后，调用应用软件AppInit函数，并根据初始化内容，启动任务
处理：
OBC上电/复位后，由系统软件引导应用软件运行。首先进行初始化，包括系统软件初始化和系统软件调用应用软件提供的初始化函数（AppInit）。启动任务并开始进行任务调度管理。",1,0,0,0,0,0,0,0,0,0,0
"功能描述：置卫星姿态无控处于自由飞行
处理过程：过程如下：
STEP1：进行姿态预估（见用户需求），得到姿态角和角速度
STEP2：当ZT7为0、7、3、5时，发相应的帆板控制指令：
ZT7取值|处理
ZT7 = 0|发左右帆板转角均为0度的指令
ZT7 = 7|发左右帆板转角均为180度的指令
ZT7 = 3|发左为90度，右为 -90指令
ZT7 = 5|发左右均为90度指令

STEP3：关自锁阀LV-1，LV-2，LV-3，LV-4，关推力器J1，J2，… ，J16。
STEP4：如果ZT7 ≥ 8，则每隔5分钟根据LS（包括LS11、LS12、LS13、LS14、LS15、LS21、LS22、LS23、LS24、LS25）取值发相应的指令一次
LS取值|处理
L15 = 1|发左右帆板转角为0度指令
L25 = 1|发左右帆板转角为180度指令
""L15 + L25 = 0且
L11 + L21 = 1""|发左帆板转角为 -90度指令；右帆板为90度指令
""L15 + L25 = 0且
L13 + L23 = 1""|发左帆板转角为 90度指令；右帆板为-90度指令

STEP5：置六个动量轮的电压为0",0,0,0,1,0,0,0,0,0,0,0
功能描述：把三轴控制电压转换到工作飞轮的控制电压。,0,1,0,0,0,0,0,0,0,0,0
"功能：利用星敏感器B的测量，修正姿态四元数与估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：对部件加断电指令的处理 ,0,0,0,0,0,0,0,1,0,0,0
"功能描述：根据陀螺输入预估卫星惯性姿态四元数。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：动量轮喷气卸载进入和退出条件计算。
",0,1,0,0,0,0,0,0,0,0,0
功能描述：若本周期角动量与上一周期角动量之差（绝对值）大于0.15Nms，则用上一周期角动量作为本周期输入，角动量变化取0。若连续大于三次或本周期与上一周期角动量之差（绝对值）小于0.15Nms，则以本周期角动量为真值，角动量变化,0,0,0,0,0,0,1,0,0,0,0
"功能描述：计算偏置动量模式下滚动/偏航轴进动控制及章动阻尼所需的磁力矩器脉宽。                                                                                                                                                                                                                                                                                                                                                           输入：
Y轴角动量偏差    
滚动角，滚动角速度，偏航角，偏航角速度
地磁场强度（T） ，及标量B，星下点经纬度L,
输出：磁力矩器工作脉宽，",0,1,0,0,0,0,0,0,0,0,0
"功能描述：决定利用星敏感器A、B、C单独或组合定姿的方式，调用相应姿态修正程序。
",0,0,1,0,0,0,0,0,0,0,0
功能描述：发送系统工作状态数据包,0,0,0,0,0,0,0,0,0,0,1
功能描述：接收遥控固定参数注入块的红外太阳姿态滤波参数,0,0,0,0,0,0,0,0,0,1,0
"功能描述：选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
输出：数字太阳敏感器输出；模拟太阳敏感器输出；模拟式太阳敏感器视场码；0-1式太阳敏感器的信号（0或1）；数字太阳敏感器视场码。
处理：
（1）太阳共有两个互为备份的LTU，通过每个LTU均可获得数字太阳、模拟太阳、0-1太阳数据；每个控制周期根据DSSLTUSeltFlag确定进行通讯的太阳LTU，发送取数指令。
（2）向太阳LTU发完取数命令后，获得太阳LTU返回的个字节数据，将数据根据LTU通讯协议转换为控制计算所需的数据格式。
",0,0,0,0,0,0,0,0,1,0,0
"序|需求名称|编号|功能及处理描述
|液浮陀螺数据的采集与处理|FREQ2. 1|向选择的液浮陀螺LTU发送完取数指令，获得陀螺LTU返回的数据，将数据转换为控制计算所需的数据格式
|光纤陀螺数据的采集与处理|FREQ2.2|向选择的光纤陀螺LTU发送完取数指令，获得陀螺LTU返回的数据，将数据转换为控制计算所需的数据格式
",0,0,0,0,0,0,0,0,1,0,0
"功能描述：接收GPS轨道板定位数据
处理：保存GPS轨道板定位数据，35V帆板电压遥测用于帆板故障检测。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：姿态机动过程目的姿态确定。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的执行机构参数设定及诊断参数
处理：
调整CMG高速角动量与标称值偏差阀值系数的初装值。",0,0,0,0,0,0,0,0,0,1,0
功能：利用星敏感器B的测量，修正姿态四元数与估计陀螺漂移,0,0,1,0,0,0,0,0,0,0,0
功能描述：CMG启动模式初始化,0,0,0,1,0,0,0,0,0,0,0
"功能描述：根据红外信息，将卫星控制在正常飞行姿态
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的CMG控制系数
处理：
调整CMG框架角回位控制系数、CMG群奇异规避律调整阀值1、CMG群奇异规避律调整系数2的初装值。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：与数字太阳通信，发送取数指令，获得部件数据。                                                                                                                                                                                                                                                                                                                                                                                                                    处理：
在AOCC每个控制周期中可能会通过串口向数太发送控制指令或者接收下传数据，见任务书时序图。
功能编号|功能|引用文档
FREQ66|初始化|与一体化太阳通信协议
FREQ67|数太使用要求|任务书、数太协议
FREQ68|通信|任务书、数太协议
FREQ69|通信故障处理|任务书
FREQ70|数据解包与转换|数太协议
FREQ71|数太数据有效性判断、处理|任务书
FREQ72|数太模拟量采集、处理|预留
FREQ73|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,0,0,0,1,0,0
"软件需求标识：FREQ13 
软件需求名称：采集时序 
软件需求描述：
              不再要求“不论部件是否通讯，均进行延时计数。”",0,0,0,0,0,0,0,0,1,0,0
功能描述：根据方向余弦阵计算姿态角,0,0,1,0,0,0,0,0,0,0,0
"功能描述：若连续3个周期判断出星箭分离信号为分离，则置初始速率阻尼模式，对卫星的角速度进行控制。
处理：
自主或指令进入此模式后，进行如下初始设置：
星时赋初值为0.375s；
连续2个周期发送“推进加电”指令；
根据自锁阀状态设置自锁阀1和/或自锁阀2开
发送6个陀螺加电指令，引入6个陀螺信息，且不需要陀螺等待时间
每个控制周期顺序调用用户需求中的逻辑：
轨道与星历；
部件故障检测与信号选取；
陀螺数据处理；
惯性姿态陀螺预估；
速率阻尼；
控制器输入量计算；
if((1<t <60|| t>80)且Flag_equation=0) 调用 相平面喷气脉宽；
模式转换条件：
若t >100，则WorkMode=2；
满足进入应急模式的条件则进入应急安全模式，置WorkMode=9；",0,0,0,1,0,0,0,0,0,0,0
"功能描述：动量轮摩擦力矩的补偿电压计算。
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：以1s为采样周期，计算角速度。。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：动量轮摩擦力矩的补偿电压计算
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：输出喷气指令
处理：
（1）将喷气的喷管打开
（2）将喷气长度写入各自通道的定时器；",0,0,0,0,0,0,0,1,0,0,0
"功能描述：接收GPS数据
处理：将接收GPS数据存储地址中内容解包成对应的UTC时间、位置和速度数据、定轨数据和GPS秒脉冲对应的整秒时刻的数据格式。由于GPS数据中有数据有效性标志，所以其中的微秒部分不考虑大于1秒的情况，由GPS保证。",0,0,0,0,0,0,0,0,0,1,0
"功能描述：通过注入轨道参数，实时计算卫星轨道参数。
处理： 
由地面注入轨道参数或GPS数据计算的轨道参数（如果GPS引入且数据验证有效），结合当前星时，通过外推公式计算出卫星轨道数据。",0,0,0,0,1,0,0,0,0,0,0
"功能描述：启动动量轮至标称角动量，并保持
",0,1,0,0,0,0,0,0,0,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：动量轮启动的程控指令
      实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：， ，
",0,1,0,0,0,0,0,0,0,0,0
"序|需求名称|编号|功能及处理描述
|动量轮角动量的采集与处理|FREQ5.1|采集动量轮的转速方向和脉冲计量，计算动量轮的角动量
|动量轮控制电压的处理|FREQ5.2|将动量轮控制电压通过D/A输出
",0,0,0,0,0,0,0,0,1,0,0
功能描述：在正常模式中，利用1N推力器实现小推力变轨功能。,0,1,0,0,0,0,0,0,0,0,0
"功能描述：利用A，C头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.8。
STEP1：计算，将下标B换成C；FM3更改：若，则：，FSTD=1；
STEP2：计算，。的各项乘以，的各项乘以。将下标B换成C；
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,0,1,0,0,0,0,0,0,0,0
"功能描述：利用数字太阳敏感器修正姿态，估计陀螺漂移。
",0,0,1,0,0,0,0,0,0,0,0
"功能描述：数传天线数据处理
",0,0,0,0,0,0,0,0,1,0,0
