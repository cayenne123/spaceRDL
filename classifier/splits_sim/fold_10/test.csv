Requirements Description,初始化,控制计算,控制输出,故障诊断和处理,数据有效性判断,数据采集,遥控,遥测
"功能描述：帆板故障检测，切换帆板LTU。
处理：
（1）帆板LTU切换的条件：
①若BZ1=3且连续650秒FSA=A太阳已捕获(帆板切换后重新开始计时)且帆板不在零位；
②若BZ1=3且FSA=A且帆板在机械零位且帆板控制信号不是取自帆板机械转角且此帆板上的模拟太阳连续5个周期不见太阳。
③如果35V帆板电压遥测变量在连续30次低于28V（28V要设计为可内存修改变量），此功能可通过注入数据块ZT38（4）启动或禁止该功能。若发生了切换，则星上自主禁止此功能，等待地面注入重新启动。
（2）帆板LTU切换后更改ZT17,连续3个0.524s周期发送帆板归零指令。     ",0,1,0,0,0,0,0,0
"功能描述：接收内存设置命令
处理：将内存设置命令存储地址中内容的解包成需下传的内存首地址和长度。此处理在中断中进行。",0,0,0,0,0,0,1,0
功能描述：根据帆板角误差控制帆板跟踪太阳。,0,1,0,0,0,0,0,0
"功能描述：接收数传天线状态数据
处理： 将接收数传天线状态存储地址中内容解包成数传天线状态的数据格式，根据不同的数传天线状态设置对应数传天线的加断电状态。",0,0,0,0,0,0,1,0
功能描述：在正常模式中，利用1N推力器实现小推力变轨功能。,0,1,0,0,0,0,0,0
功能描述：把陀螺数据、、输入并变换到星体坐标系中的。,0,1,0,0,0,0,0,0
"功能描述：决定采用磁卸载还是喷气卸载方式，调用相应程序。
输入：姿态角，姿态角速度，
实测飞轮角动量   =[，]T
标称角动量       =[，]T
      标志             UnLoadMode， F_WheelSaturation， F_AttrOutLmt",0,1,0,0,0,0,0,0
"需求名称|功能及处理描述
ACU模拟量数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发模拟量数据采集指令，获得ACU数据并处理成对应的模拟量信息。
ACU状态数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发各种状态数据采集指令，获得ACU数据并处理成对应的状态信息。
ACU中控制指令的输出处理|根据通讯协议，将计算得到的喷气和磁力矩器数据转换为消息需要的格式并输出。
部件加断电指令的处理|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
ACU保存CCU的重要数据|AOCC每个控制周期都将重要数据发送给ACU（驱动控制单元）
从ACU恢复CCU的重要数据|上电/复位后应用软件首先从ACU恢复重要数据
ACU的程序注入修改|将从OBDH收到的ACU需修改程序内容，按内总线的格式发送给ACU RT需修改的程序内容
ACU的内存下传|地面注入ACU内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至ACU RT。
自锁阀操作|根据任务书的要求通过1553B向ACU输出自锁阀开关控制指令",0,0,0,0,0,1,0,0
"功能描述：为三轴姿态喷气控制选择推力器。                                                                                                                                                                                                                                                                                                                                                                                                                                                       输入：标志F_JetGroup，F_SatStage
姿态角与角速度：
正常模式星敏感器与陀螺定姿输出(F_NoGyro=0或2) 
，(量纲：弧度)
，(量纲：弧度/秒)
或：正常模式星敏感器定姿输出(F_NoGyro=1或3时)
(量纲：弧度)
(量纲：弧度/秒)
或：机动与轨控模式姿态输出(无量纲)，(量纲：弧度/秒)
或：其它情形相应程序的输出
，(量纲：弧度)
，(量纲：弧度/秒)
，(量纲：度)
输出：	喷气状态，
各推力器分配脉宽，
累计三轴姿控正向喷气时间：，
累计三轴姿控负向喷气时间：，
=[，]T(量纲：弧度/秒2)",0,1,0,0,0,0,0,0
"功能描述：向LTU和星敏感器发送自检指令，获得自检信息
处理：
（1）每0.524秒对1个部件LTU进行自检，依次为选通的太阳、选通的陀螺、选通的左和右帆板，每4个0.524秒对4个LTU自检一次；
(2）对红外LTU的自检见.3；
(3) 每4秒（8个0.524秒）发送一次星敏感器自检命令数据包（HK1包），；
(4)根据遥测格式将返回的自检信息通过OBDH传至地面。",0,0,0,0,0,1,0,0
"    各个模式切换的功能点列表如下：
序|需求名称|编号|输入章节号|功能描述
|主动段模式切换|FREQ5.1.0|4|主动段模式切换条件判断及转出设置
|入轨段控制模式切换|FREQ5.1.1|4.1|入轨段控制模式切换条件判断及转出设置
|正常对地运行模式切换|FREQ5.1.2|4.2|正常对地运行模式切换条件判断及转出设置
|点对点机动模式切换|FREQ5.1.3|4.3|点对点机动模式切换条件判断及转出设置
|姿态/角速度预置模式切换|FREQ5.1.4|4.4|姿态/角速度预置模式切换条件判断及转出设置
|偏置飞行模式切换|FREQ5.1.5|4.5|偏置飞行模式切换条件判断及转出设置
|匀地速跟踪模式切换|FREQ5.1.6|4.6|匀地速跟踪模式切换条件判断及转出设置
|角速度跟踪模式切换|FREQ5.1.7|4.7|角速度跟踪模式切换条件判断及转出设置
|轨控模式切换|FREQ5.1.8|4.9|轨控模式切换条件判断及转出设置
|全姿态捕获模式切换|FREQ5.1.9|4.10|全姿态捕获模式切换条件判断及转出设置
|无控模式切换|FREQ5.1.10|4.11|无控模式切换条件判断及转出设置
|测试与标定模式切换|FREQ5.1.11|4.8|测试与标定模式切换条件判断及转出设置

切换条件具体见用户需求4。CCU切机或复位后通过OBDH恢复重要数据来恢复模式，具体见重要数据文件要求。",0,1,0,0,0,0,0,0
功能描述：根据星敏感器故障标志、星敏感器有效数据判断标志（由星敏感器数据包给出，（包括状态字b27、同步脉冲计数值、数据产生相对时间、姿态四元数信息等）），判断星敏感器数据有效性。,0,1,0,0,0,0,0,0
功能描述：当滚动（俯仰）、偏航发动机计数器归零发出中断请求时关闭相应推力器。,0,0,1,0,0,0,0,0
"功能描述：复位模式处理
处理：
- 采集陀螺、红外、太阳敏感器数据；
- 继续与ALTU通讯（控制量都为0，无控制指令）；
- 响应除“重要数据保存”的所有星务遥控及遥测；
- 不查询应急加电标志，不保存APP_WorkMode1/2/3变量；
",1,0,0,0,0,0,0,0
功能描述：由平衡方程方法、星敏感器数据进行陀螺的故障检测,0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|轨道与星历|FREQ2.0|5.1.1|卫星轨道、太阳星历、地面站位置、地磁场强度等计算程序的主流程。
|卫星轨道计算|FREQ2.1|5.1.2|计算卫星当前轨道
|GPS轨道数据有效性判断|FREQ2.2|5.1.3|对GPS轨道数据的有效性进行判断
|GPS轨道版轨道计算|FREQ2.3|5.1.4|利用GPS轨道版数据进行GPS定轨程序
|轨道、目标姿态预计算|FREQ2.4|5.1|完成控制周期的轨道星历与目标姿态预先计算
|近圆中低轨卫星轨道根数外推算法产品规范|FREQ2.5|/|规范化算法：
|近圆中低轨卫星GPS轨道计算算法算法产品规范|FREQ2.6|/|规范化算法：
|岁差章动矩阵计算算法算法产品规范|FREQ2.7|/|规范化算法：
|4阶星上地磁场计算方法算法产品规范|FREQ2.8|/|规范化算法：
|光行差计算算法产品规范|FREQ2.9|/|规范化算法：
",0,1,0,0,0,0,0,0
"软件需求名称：上电和复位初始化 
需求类别：其他 
软件需求描述：系统软件上电复位后，调用应用软件AppInit函数，并根据初始化内容，启动任务
处理：
OBC上电/复位后，由系统软件引导应用软件运行。首先进行初始化，包括系统软件初始化和系统软件调用应用软件提供的初始化函数（AppInit）。启动任务并开始进行任务调度管理。 ",1,0,0,0,0,0,0,0
"需求名称|功能及处理描述
对地数传天线1数据的采集与处理|在总线指令要求通讯允许的条件下，每500ms向对地数传天线1 LTU发控制指令，获得对地数传天线1数据并处理成对应的角度等信息。
对地数传天线2数据的采集与处理|对地数传天线2的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线2 LTU发控制指令，获得对地数传天线2数据并处理成对应的角度等信息。
中继天线数据的采集与处理|在总线指令要求通讯允许的条件下，每500ms向中继天线 LTU发控制指令，获得中继天线数据并处理成对应的角度等信息。",0,0,0,0,0,1,0,0
功能描述：根据陀螺输入，预估卫星惯性姿态。,0,1,0,0,0,0,0,0
"功能描述：追踪器GPS数据有效性判断及处理 
处理：见《卫星GNC分系统GNC计算机应用软件用户需求》的P48-P49。",0,1,0,0,0,0,0,0
"功能描述：利用A，C头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.8。
STEP1：计算，将下标B换成C；FM3更改：若，则：，FSTD=1；
STEP2：计算，。的各项乘以，的各项乘以。将下标B换成C；
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,1,0,0,0,0,0,0
"功能描述：接收GPS数据
处理：将接收GPS数据存储地址中内容解包成对应的UTC时间、位置和速度数据、定轨数据和GPS秒脉冲对应的整秒时刻的数据格式。由于GPS数据中有数据有效性标志，所以其中的微秒部分不考虑大于1秒的情况，由GPS保证。",0,0,0,0,0,0,1,0
"功能：在不使用陀螺数据时，对姿态角、角速度与姿态四元数预估。
",0,1,0,0,0,0,0,0
"功能描述：与星敏感器通信，获得星敏感器数据。
处理：
见星敏通信协议、任务书。
功能编号|功能|引用文档
FREQ52|初始化|星敏协议
FREQ53|星敏使用要求|任务书
FREQ54|通信|星敏协议
FREQ55|通信故障处理|任务书
FREQ56|数据解包与转换|星敏协议
FREQ57|星敏数据有效性判断、处理|任务书
FREQ58|星敏模拟量采集、处理|任务书
FREQ59|部件在轨转发（在轨修改）|任务书

3）GPS高精度校时与星敏感器数据的使用
功能描述：根据GPS秒脉冲，秒脉冲广播，进行GPS高精度校时和星敏感器时标处理。
",0,0,0,0,0,1,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|给VIPPCU发送轮询和校时包|FREQ1.8.1|""无
""|校时等数据|在每个控制周期与VIPPCU通讯时，在“轮询与校时包”中发送本周期的控制UTC时间
|VIPPCU加电状态状态数据的采集与处理|FREQ1.8.2|""加电状态
""||CCU通过采集来自VIPPCU的 “VIPPCU A机加电状态”、“VIPPCU B机加电状态”两个0～5V模拟量，来确定VIPPCU的A、B机加电状态。
|给VIPPCU发送的下平台控制数据|FREQ1.8.3|无|控制数据|CCU给VIPPCU发送的下平台控制数据。
|给VIPPCU发送CCU的重要数据|FREQ1.8.5|无|CCU的重要数据|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
|给VIPPCU发送VIPPCU的重要数据|FREQ1.8.6|无|VIPPCU的重要数据|给VIPPCU发送VIPPCU的重要数据
|转发VIPPCU上注指令参数块|FREQ1.8.7|无|VIPPCU上注指令参数块|需要时，转发VIPPCU上注指令参数块
|接收VIPPCU遥测数据|FREQ1.8.8|VIPPCU遥测数据|无|每个控制周期，接收VIPPCU遥测数据，解包成需要的数据
|接收CCU重要数据返回包|FREQ1.8.9|CCU重要数据|指令|上电/复位后应用软件首先从VIPPC恢复重要数据。
",0,0,0,0,0,1,0,0
功能描述：在CMG控制过程中判断CMG是否饱和而需喷气卸载；在喷气卸载过程中判断CMG是否卸载完毕。,0,1,0,0,0,0,0,0
"需求名称|功能及处理描述
CMG 1数据的采集与处理|CMG 1的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 1的当班标志为1），每周期向CMG 1RT发取数指令，获得CMG 1数据并处理成对应的高速角动量、低速框架角度和角速度。
CMG 2数据的采集与处理|CMG 2的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 2的当班标志为1），每周期向CMG 2RT发取数指令，获得CMG 2数据并处理成对应的高速角动量、低速框架角度和角速度。
CMG 3数据的采集与处理|CMG 3的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 3的当班标志为1），每周期向CMG 3RT发取数指令，获得CMG 3数据并处理成对应的高速角动量、低速框架角度和角速度。
CMG 4数据的采集与处理|CMG 4的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 4的当班标志为1），每周期向CMG 4RT发取数指令，获得CMG 4数据并处理成对应的高速角动量、低速框架角度和角速度。
CMG 5数据的采集与处理|CMG 5的高速角动量、低速框架角度和角速度及状态信息|在通讯允许的条件下（CMG 5的当班标志为1），每周期向CMG 5RT发取数指令，获得CMG 5数据并处理成对应的高速角动量、低速框架角度和角速度。
CMG 控制指令的输出处理|CMG的控制指令输出消息指令|根据控制方式发送相应的控制指令，具体见内总线通讯协议
CMG的程序注入修改|将从OBDH收到的CMG需修改程序内容，按内总线的格式发送给CMG RT需修改的程序内容
CMG的内存下传|地面注入CMG内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至CMG RT。",0,0,0,0,0,1,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|对地数传天线1数据的采集与处理|FREQ1.7.1|""对地数传天线1 LTU控制指令
""|对地数传天线1的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线1 LTU发控制指令，获得对地数传天线1数据并处理成对应的角度等信息。
|对地数传天线2数据的采集与处理|FREQ1.7.2|""对地数传天线2
LTU控制指令""|对地数传天线2的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线2 LTU发控制指令，获得对地数传天线2数据并处理成对应的角度等信息。
|中继天线数据的采集与处理|FREQ1.7.3|中继天线LTU控制指令|中继天线的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向中继天线 LTU发控制指令，获得中继天线数据并处理成对应的角度等信息。
",0,0,0,0,0,1,0,0
"功能描述：0.262秒的中断服务主程序。
处理： 
STEP1：若ZT36=5,则进入自旋模式；
STEP2：
STEP3：若BZ8=5,则进行STEP4，否则返回；
STEP4：陀螺数据输入及转换
STEP5：若BZ1 = 3，FSA = 0，则进行姿态预估器（4）和Z轴捕获太阳；
STEP6：若BZ1 = 6，则：
调用姿态预估器（2）；
，
STEP7：进行轨控开关机，轨控段喷气姿态控制，飞轮动量保持控制及飞轮启动；
STEP8：若BZ1 = 5，则：
帆板未展开模式。",0,1,0,0,0,0,0,0
"需求名称|功能及处理描述
ACU模拟量数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发模拟量数据采集指令，获得ACU数据并处理成对应的模拟量信息。
ACU状态数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发各种状态数据采集指令，获得ACU数据并处理成对应的状态信息。
ACU中控制指令的输出处理|根据通讯协议，将计算得到的控制数据转换为消息需要的格式并输出。
MW数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发MW数据采集指令，获得ACU数据并处理成对应的MW的角动量。
部件加断电指令的处理|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
ACU保存CCU的重要数据|AOCC每三个控制周期将重要数据发送给ACU（驱动控制单元）
从ACU恢复CCU的重要数据|上电/复位后应用软件首先从ACU恢复重要数据
ACU的程序注入修改|将从OBDH收到的ACU需修改程序内容，按内总线的格式发送给ACU RT需修改的程序内容
ACU的内存下传|地面注入ACU内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至ACU RT。
自锁阀操作|根据任务书的要求通过1553B向ACU输出自锁阀开关控制指令",0,0,0,0,0,1,0,0
功能描述：发送系统工作状态数据包,0,0,0,0,0,0,0,1
"功能：利用星敏感器A、B单独或组合定姿的方式，调用相应姿态修正程序。
",0,1,0,0,0,0,0,0
"功能描述：把陀螺数据、、输入并变换到星体坐标系中的、、。
",0,1,0,0,0,0,0,0
"功能描述：光纤陀螺取数指令及一体化红外指令
",0,0,0,0,0,1,0,0
功能描述：接收遥控固定参数注入块的地面站位置信息功能区数据,0,0,0,0,0,0,1,0
"功能描述：使用估计的四元数转换姿态角。
",0,1,0,0,0,0,0,0
功能描述：使用红外、星敏、太阳定姿时，计算正常飞行轮控所需电压。,0,1,0,0,0,0,0,0
"功能描述：发送姿态数据包3
",0,0,0,0,1,0,0,0
"功能描述：利用数字太阳角输出，保持卫星帆板对太阳定向。
",0,1,0,0,0,0,0,0
"功能描述：根据给定电压乘电压/力矩系数和角动量变化率之差判断轮子的故障。
",0,1,0,0,0,0,0,0
"功能描述：接收总线指令
处理： 将接收总线指令存储地址中内容解包成总线指令的数据格式，根据不同的总线指令进行相应的处理。其中侧摆指令仅在在模式1或9下响应。",0,0,0,0,0,0,1,0
"功能描述：NSMU初始化
处理：
初始化类型|自主切换允许标志|NSMUState
上电|允许|主份，发主开备关
上电|允许|备份，发备开主关
上电|允许|主份，发主开及备关
上电|允许|空闲
",1,0,0,0,0,0,0,0
"功能描述：为机动过程姿态确定提供初始姿态。
输入：	机动起始时刻本体对轨道估计姿态角()
输出：	机动目标相对轨道的姿态四元数
变换矩阵
本体对目标坐标系的姿态四元数",0,0,0,1,0,0,0,0
"软件需求名称：接收总线指令 
需求类别：其他 
软件需求描述：接收并处理总线指令。",0,0,0,0,0,0,1,0
"功能描述：滚动通道喷气中断处理程序。
处理：将推力器1-8关掉",0,0,0,1,0,0,0,0
"功能描述：根据姿态角计算方向余弦阵
",0,0,0,1,0,0,0,0
"软件需求名称：化学推进使用及通信 
需求类别：其他 
软件需求描述：与发动机通信，输出本周期喷气脉宽。
处理：
表格工作项|软件需求名称|软件需求标识|软件需求描述|1
UPS初始化|FREQ52|UPS初始化|B|2
化学推进数据采集|FREQ53|化学推进数据采集|B|3
推力器脉冲输出|FREQ54|推力器脉冲输出|B|4
推力器健康字设置|FREQ55|推力器健康字设置|B|5
部件操作（程控490N点火，故障重构）|FREQ56|部件操作（程控490N点火，故障重构）|B|
",0,0,1,0,0,0,0,0
"功能描述：根据任务要求，应用软件进行1553B初始化、变量的初始化
处理：
GPS无效判断的连续次数变量由1改为7。
删除读取一次星时计数器的要求。",1,0,0,0,0,0,0,0
"功能描述：由-Z面姿控发动机(A1/A2/A3/A4/+X/-X)进行变轨。
处理
有姿控发动机姿控加变轨方式见用户需求5.3.1.3和姿控发动机变轨，cmg姿控方式见5.3.1.，两种方式由地面选取。",0,1,0,0,0,0,0,0
"功能描述：根据陀螺输入，预估卫星对地姿态。
",0,1,0,0,0,0,0,0
根据同步字的编码内容进行相应的处理：,0,0,0,0,0,0,1,0
"功能描述：卫星搜索太阳使得数字/模拟太阳见太阳后，控制卫星，使数字卫星本体-z轴对准太阳(模拟太阳对日时偏置10度)，从而使帆板法线指向太阳，确保能源供应。
输入：DssStateFlag，TShadowTime；滚动数字太阳监视码，俯仰数字太阳监视码；滚动模拟太阳监视码，俯仰模拟太阳监视码，滚动数字太阳输出，俯仰数字太阳输出，滚动模拟太阳输出，俯仰模拟太阳输出",0,0,0,0,1,0,0,0
"序|需求名称|编号|功能及处理描述
|动量轮角动量的采集与处理|FREQ5.1|采集动量轮的转速方向和脉冲计量，计算动量轮的角动量
|动量轮控制电压的处理|FREQ5.2|将动量轮控制电压通过D/A输出
",0,0,0,0,0,1,0,0
"功能描述：发送和接收OBDH重要数据
处理：
OBDH重要数据有四块，大小共为256字节，AOCC不做任何改动保存在RAM中。",0,0,0,0,0,0,0,1
"功能描述：地面站赤经赤纬计算
处理：同用户需求的",0,0,0,0,1,0,0,0
功能描述：计算CMG群的合成角动量标称值。,0,1,0,0,0,0,0,0
CCU控制周期为125ms，对于BC端50ms通信同步服务，应用软件采用轮询方式查询帧序号，作为循环缓冲区子地址指针复位时判断使用。,0,0,0,0,0,0,1,0
"功能描述：
 128ms周期计时（功能编号：FReq-13）。
处理： 设置128ms控制周期中断标志，计数器值为0时产生中断，不需要显示的重新装载。",0,0,1,0,0,0,0,0
"功能描述：使用星敏感器B的测量，修正姿态四元数与估计陀螺漂移。
",0,1,0,0,0,0,0,0
"序|需求名称|编号|功能及处理描述
|加电状态的采集与处理|FREQ7.1|从SDC获取部件供电状态信息
|切换指令的处理|FREQ7.2|发送SDC指令。
",0,0,0,1,0,0,0,0
"软件需求标识：FREQ19 
软件需求名称：星敏数据处理 
需求类别：其他 
软件需求描述：星敏数据处理。",0,0,0,0,0,1,0,0
在AOCC上电/复位或者切机时，AOCC通过方式代码的服务申请，请求OBDH发送星上时间和AOCC重要数据。若连续64个控制周期申请AOCC重要数据失败（重要数据第一块的第一个字不是D090H或者校验和错误或者未收到重要数据），上电或者复位后的前126个周期内，连续79个控制周期星箭分离信号均有效，则卫星自主转全捕对日模式；否则应用软件按照重要数据的初始值运行。则应用软件按照重要数据的初始值运行。应用软件只有在判断到星上时间为超过1257秒时，以及重要数据均正确的情况下，才使用重要数据恢复模式。若取到的重要数据正确，但取到的星时小于1257s，则需按重要数据文件要求取星时错误的要求进行模式恢复。,0,0,0,0,0,0,1,0
"功能描述：将S-84坐标系下的追踪器GPS原始数据转换成J地心天球坐标系下的数据，根据该数据与轨道计算数据的对比结果，给出GPS数据可用性标志
说明：计算目标器GPS时，将输入、输出改为目标器的相应变量。",0,1,0,0,0,0,0,0
"功能描述：太阳地球捕获主程序。
",0,1,0,0,0,0,0,0
"根据不同的任务要求划分了各个模式，模式控制作为一个功能的集合体反映了任务的执行情况，是确认测试和系统实验验证的重要的功能。
模式字|工作模式描述|功能编号
0|主动段|FREQ56
1|正常对地运行|FREQ57
2|偏航机动|FREQ58
3|全姿态捕获|FREQ59
4|对地捕获|FREQ60
5|帆板未展开|FREQ61
6|轨控|FREQ62
7|无控|FREQ63
8|侧摆机动|FREQ64
9| 侧摆保持|FREQ65
11|入轨段控制|FREQ66
12|自旋模式|FREQ67
13|应急模式|FREQ68
14|星敏全姿态捕获模式|FREQ69

主动段工作模式下并不进行姿态确定和控制的计算，其它各个模式控制中调用卫星轨道和星历计算、姿态确定和姿态和轨道控制的如下所示
|模式字
|E
卫星轨道外推计算|√
GPS轨道计算|√
太阳星历计算|√
地面站位置计算|√
岁差章动计算|√
地磁场计算|√
偏流角计算|
陀螺数据处理|√
惯性姿态陀螺预估|√
对地姿态陀螺预估|
四元数陀螺预估|
红外输出的数据处理|√
太阳输出的数据处理|√
红外的姿态修正|
红外与太阳双矢量定姿|
红外太阳姿态修正|
星敏感器数据处理|
星敏感器A姿态修正|
星敏感器B姿态修正|
星敏感器C姿态修正|
星敏感器A、B姿态修正|
星敏感器A、C姿态修正|
星敏感器B、C姿态修正|
对地姿态修正及星敏粗姿态计算|
仅星敏感器A的姿态修正|
仅星敏感器B的姿态修正|
仅星敏感器C的姿态修正|
仅星敏感器AB的姿态修正|
仅星敏感器AC的姿态修正|
仅星敏感器BC的姿态修正|
–Z轴捕获太阳及对日定向|
偏航捕获及转对地定向|
星敏感器全姿态捕获|√
侧摆目标姿态确定|
姿态控制量计算|√
相平面法|√
姿态喷气控制|√
动量轮摩擦补偿计算|√
动量轮角动量保持的PI控制|√
动量轮启动与保持|√
正常飞行动量轮分配电压计算|
结构滤波器计算|
 喷气卸载条件计算|
磁卸载控制|
运行段帆板控制|
太阳帆板自主跟踪控制|
无控模式下太阳帆板控制|
数传天线指向控制|
偏置动量轮分配电压计算|

在正常运行模式下主要有三种定姿方式：红外定姿、红外太阳定姿和星敏定姿。其中星敏定姿为高精度定姿方式。并可采用有陀螺和无陀螺方式，正常情况下为有陀螺。定姿方式的切换通过注入系统定姿方式字和系统故障诊断来实现切换。在模式2和6的初始化中删除了红外定姿的设置，调用流程中增加了星敏定姿的姿态角计算，可以在星敏定姿下变轨。太阳全姿态捕获模式(BZ1=3)和星敏感器全姿态捕获模式(BZ1=E)初始化中增加取消偏流角修正计算的操作。",0,1,0,0,0,0,0,0
"功能描述：上电/复位初始化
处理：
- 串口初始化
- CAN总线初始化
- ALTU、NSMU当班设置
- 红外加电
- 磁力矩器二次电源加电
- 上电/复位星箭分离查询",1,0,0,0,0,0,0,0
"功能描述：与星敏感器通讯获得星敏感器数据是否可以用来定姿。
",0,0,0,0,0,1,0,0
"功能描述：接收遥控固定参数注入块的结构滤波器系数
处理：
调整各系数的初装值。",0,0,0,0,0,0,1,0
"AppInit中星箭分离的查询
硬件初始化后，按5取3的方式查星箭分离状态位(对星箭分离状态位读5次，有连续3次或3次以上读入为“1”，则认为查到星箭已分离，每次读的时间间隔要求大于1ms)。
AppInit中星箭未分离的初始化
如果星箭未分离，对应用软件相关变量、硬件初始化。进入主动段工作模式。在主动段工作模式下，每个控制周期按5取3的方式查星箭分离状态位，如果连续3个周期内都查到星箭已分离，则可确认为星箭已分离。进入初始速率阻尼模式，并置星时0.375s。
AppInit中星箭已分离的初始化
对应用软件相关变量、硬件初始化，星时清0，进入复位模式。
在复位模式下，与星务分系统通讯，取回保存在星务分系统的重要数据，具体见《卫星姿轨控分系统AOCC与星务通讯协议》。如果取数成功，根据控制模式字进入初始化。若连续5秒从星务分系统取重要数据失败则认为申请失败。取重要数据不成功，设置工作模式为“太阳捕获模式”，星时为2100秒，发送CMG1~5“复位及高速断电”指令。ALTU当班状态根据前面章节的内容进行复位后设置；切除6个陀螺，发送“陀螺1~5开”指令，新加电陀螺等10分钟后引入，并置状态分为120，10分钟内系统不引入，不进行速率阻尼。",0,0,0,1,0,0,0,0
"功能描述：计算巡天模式下的目标姿态
",0,1,0,0,0,0,0,0
"功能描述：与CAN通信获得上行/下行数据。
调用条件：AOCC在CAN总线中断中接收/发送数据；
输入：上行数据。
输出：下行数据。
处理：通过CAN总线与星务分系统通信，交换数据，以实现星地联系和对卫星的人工干预。",0,0,0,0,0,0,0,1
"功能描述：利用数字太阳信息，进行太阳捕获，对太阳定向。
输入：5.2.17.2的输出 ， 
计时器TShadow，
数字太阳敏感器状态F_Ds1Valid，F_Ds2Valid（由数据有效性判据给出），
数字太阳敏感器输出,（量纲：弧度）
上周期姿态角估值，",0,1,0,0,0,0,0,0
"功能描述：发送卫星应急控制字
处理：先将AOCC矢量字中“AOCS应急控制标志”位置1，将总线状态字服务请求位置1；OBDH检测到AOCC总线通讯状态字中的服务请求后，自动发送方式指令，从AOCC接收矢量字，判定矢量字中 “AOCS应急控制标志”位为1后，通过子地址19向AOCC发送“卫星应急控制确认字”；AOCC在接收到OBDH“卫星应急控制确认字”后，将状态字服务请求位清0，将矢量字“申请传送OBDH时间”位清0。",0,0,0,0,0,0,0,1
"功能描述：与星敏感器通讯，获得星敏感器数据。
处理：
在使用星敏感器之前需对其进行初始化，在每个控制周期的开始向S星敏感器发出R信号，并通过串口得到S星敏感器提供的数据。在AO与S星敏感器通信过程中，AO始终处于主动状态。当AO发出R信号下降沿后星敏感器在5ms内返回数据，AO在接收完数据后把R信号置高电平，星敏感器在R信号的上升沿之后的1ms内停止发送数据。
AO为Astro10星敏感器和S星敏感器配置了2个独立的UART，分别各有256byte的FO缓存。因此可以对Astro10星敏感器和S星敏感器同时发出R信号，交替进行进行数据FO缓冲区数据读取。
与APS星敏感器通讯故障时，不使用APS星敏感器数据进行姿态修正。",0,0,0,0,1,0,0,0
"功能描述：使用星敏感器B、C的测量，修正姿态四元数与姿态角速度。
",0,1,0,0,0,0,0,0
"功能描述：选择通讯的LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）甚高精度星敏共有1个LTU，AOCC每个控制周期根据注入文件中的ZT6和inAPSLTUSeltFlag的最大组合中是否通讯的甚高精度星敏LTU发送取数指令。
（2）向甚高精度LTU发送完取数指令后，获得甚高精度星敏LTU返回的数据，将数据转换为所需的数据格式。",0,0,0,0,0,1,0,0
"功能描述：根据红外信息绕滚动俯仰转动，进行滚动俯仰捕获
",0,1,0,0,0,0,0,0
"功能描述：在轮控机动模式下，轮控滚动/俯仰机动过程中规划目标姿态确定，确定机动力矩和轮子组合。
",0,1,0,0,0,0,0,0
"功能描述：
循环太阳搜索时对部件的切换（功能编号：FReq-16）。
处理：
(1)第一次滚动搜索不成功时，若另一份SPE健康，切换另一份SPE；
(2)第二次滚动搜索不成功时，若另一份MPSDP健康，切换另一份MPSDP；否则切换另一份SPE，此条件下第三次搜索不成功直接进入（4）;  
(3)第三次滚动搜索不成功时，切换另一份SPE;
(4)第四次滚动搜索不成功时，转停控;
部件切换的间隔周期，在保证不冲突的情况下，软件可自主确定。",0,1,0,0,0,0,0,0
"功能描述：视线目标的姿态确定。
",0,1,0,0,0,0,0,0
"功能描述：执行偏航机动及返调至运行姿态
处理过程：过程如下：
STEP1：当ZT F（不用红外+单个斜装陀螺定姿），进行姿态预估，得到姿态角和角速度。
STEP2：根据当前星时t的取值进行不同的处理：
STEP3：根据ZT7的取值，进行相应的帆板控制。
ZT7的值|处理
ZT7 = 9|发指令
ZT7 = A|发指令
ZT7 = B|发指令
",0,1,0,0,0,0,0,0
"功能描述：根据陀螺输入，预估卫星惯性姿态。
",0,1,0,0,0,0,0,0
功能描述：发送控制对数传天线的控制角度。,0,0,1,0,0,0,0,0
"功能描述：在完成偏航捕获后，由红外地球敏感器测量信号进行计算得到俯仰角和滚动角，控制滚动、俯仰使其趋向于0。
输入：	陀螺数据处理的输出 ；
数字太阳输出 ，
卫星外推轨道的输出	
太阳星历的输出	
姿态角估值	",0,1,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|三浮陀螺数据的采集与处理|FREQ1.2.1|""三浮陀螺1553B取数指令
""|陀螺1-6的速度增量|在通讯允许的条件下（每个三浮陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是角速率数据，通过任务书给出的公式计算
|光纤陀螺数据的采集与处理|FREQ1.2.2|""光纤陀螺LTU取数指令
""|陀螺79的速度增量|在通讯允许的条件下（每个光纤陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是即为速度增量数据，直接乘当量就可以得到需要的结果；
",0,0,0,0,0,1,0,0
功能描述：确定星敏感器数据的有效性。,0,1,0,0,0,0,0,0
"功能描述：接收应急线路注入数据。
处理：应急线路的上行注入数据为姿控数据块，具体见上行注入文件。",0,0,0,0,0,0,1,0
"软件需求标识：FREQ13 
软件需求名称：采集时序 
软件需求描述：
              不再要求“不论部件是否通讯，均进行延时计数。”",0,0,0,0,0,1,0,0
"功能描述：接收AOCC重要数据
处理：将接收AOCC重要数据地址中内容解包成重要数据的数据格式。",0,0,0,0,0,0,0,1
"功能描述：与发动机通信，输出本周期喷气脉宽。
处理：
功能编号|功能|引用文档|备注
FREQ52|UPS初始化|任务书|B
FREQ53|化学推进数据采集|任务书|B
FREQ54|推力器脉冲输出|任务书|B
FREQ55|推力器健康字设置|任务书|B
FREQ56|部件操作（程控490N点火，故障重构）|任务书|B
",0,0,1,0,0,0,0,0
"功能描述：CAN通信上行/下行数据的组帧和解包。
调用条件：每个控制任务模式计算完成后；
输入：计算结果。
输出：按照协议组帧数据。
处理：主要完成下列数据组帧、解包功能：星务接收、星务发送、快帧遥测1打包、快帧遥测2打包、轨道参数注入快帧打包、内存下卸快帧打包、慢帧遥测1打包、慢帧遥测2打包、慢帧遥测3打包、姿控广播、热控温度广播、重要数据打包、上行:目标星轨道、上行:数据指令响应处理、上行:固定地址注入解包、上行:可变地址注入解包、上行:轨道注入解包、上行:程序注入、上行:内存下卸指令注入、上行:部件指令、上行:任务块、重要数据返回解包、GNSS定位广播解包、整星广播对时解包、GNSS高精度秒脉冲对时广播解包、CAN总线使用要求",0,0,0,0,0,0,0,1
"功能描述：根据飞轮角动量及地磁场强度决定并输出磁棒控制电压。
",0,1,0,0,0,0,0,0
功能描述：根据太阳矢量在帆板1法平面内投影与帆板法线之间的夹角，通过帆板驱动机构1控制帆板1，使帆板1能捕获及跟踪太阳。,0,1,0,0,0,0,0,0
"功能描述：CMG奇异状态的判断及算法计算。
输入：采集得的各CMG的框架角Sgang[i]（弧度）；CMG有效性标志Lcmg[i]，Jacobi矩阵sgJ",0,1,0,0,0,0,0,0
"功能描述：接收GPS数据
处理：将接收GPS数据存储地址中内容解包成对应的UTC时间、位置和速度、轨道数据的数据格式。",0,0,0,0,0,0,1,0
"功能描述：利用星敏感器B的测量，修正姿态四元数与估计角速度。
",0,0,0,0,1,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|甚高三浮陀螺数据的采集与处理|FREQ1.2.1|""甚高三浮陀螺1553B取数指令
""|陀螺1-6的速度增量|在通讯允许的条件下（每个甚高陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。
|甚高光纤陀螺数据的采集与处理|FREQ1.2.2|甚高光纤陀螺1553B取数指令|陀螺7-9的速度增量|在通讯允许的条件下（每个光纤陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是即为速度增量数据，直接乘当量就可以得到需要的结果；
",0,0,0,0,0,1,0,0
"功能描述：帆板故障检测，切换帆板LTU。
",0,1,0,0,0,0,0,0
功能描述：CMG启动模式初始化,0,1,0,0,0,0,0,0
功能描述：为机动过程姿态确定提供初始姿态。,0,1,0,0,0,0,0,0
"功能描述：接收遥测采集设置指令
处理：将接收遥测采集设置指令存储地址中内容解包成帧计数值，而AOCC则返回与帧计数值相对应的60字节DS遥测量。此指令与发送遥测数据块配合执行。",0,0,0,1,0,0,0,0
"功能描述：发送延时遥测数据
处理：
延时遥测数据格式内容具体见遥测文件。",0,0,0,0,0,0,0,1
功能描述：利用星敏感器A、B的测量，估计姿态。,0,1,0,0,0,0,0,0
功能：利用星敏感器A的测量，修正姿态四元数与估计陀螺漂移。,0,1,0,0,0,0,0,0
"根据不同的任务要求划分了各个模式，模式控制作为一个功能的集合体反映了任务的执行情况，是确认测试和系统实验验证的要的功能。
序|需求名称|编号|输入章节号|功能描述
|入轨段控制模式控制|FREQ5.2.1|4.1|入轨段控制模式控制调用流程
|正常对地运行模式控制|FREQ5.2.2|4.2|正常对地运行模式控制调用流程
|点对点机动模式控制|FREQ5.2.3|4.3|点对点机动模式控制调用流程
|姿态/角速度预置模式控制|FREQ5.2.4|4.4|姿态/角速度预置模式控制调用流程
|偏置飞行模式控制|FREQ5.2.5|4.5|偏置飞行模式控制调用流程
|匀地速跟踪模式控制|FREQ5.2.6|4.6|匀地速跟踪模式控制调用流程
|角速度跟踪模式控制|FREQ5.2.7|4.7|角速度跟踪模式控制调用流程
|轨控模式控制|FREQ5.2.8|4.9|轨控模式控制调用流程
|全姿态捕获模式控制|FREQ5.2.9|4.10|全姿态捕获模式控制调用流程
|无控模式控制|FREQ5.2.10|4.11|无控模式控制调用流程
|测试与标定模式控制|FREQ5.2.11|4.8|测试与标定模式控制调用流程

模式初始化的功能点如下：
序|需求名称|编号|输入章节号|功能描述
|入轨段控制模式初始化|FREQ5.3.1|4.1|入轨段控制模式初始化设置
|正常对地运行模式初始化|FREQ5.3.2|4.2|正常对地运行模式初始化设置
|点对点机动模式初始化|FREQ5.3.3|4.3|点对点机动模式初始化设置
|姿态/角速度预置模式初始化|FREQ5.3.4|4.4|姿态/角速度预置模式初始化设置
|偏置飞行模式初始化|FREQ5.3.5|4.5|偏置飞行模式初始化设置
|匀地速跟踪模式初始化|FREQ5.3.6|4.6|匀地速跟踪模式初始化设置
|角速度跟踪模式初始化|FREQ5.3.7|4.7|角速度跟踪模式初始化设置
|轨控模式初始化|FREQ5.3.8|4.9|轨控模式初始化设置
|全姿态捕获模式初始化|FREQ5.3.9|4.10|全姿态捕获模式初始化设置
|无控模式初始化|FREQ5.3.10|4.11|无控模式初始化设置
|测试与标定模式初始化|FREQ5.3.11|4.8|测试与标定模式初始化设置

主动段和无控工作模式下并不进行姿态确定和控制的计算，其它各个模式控制中调用卫星轨道和星历计算、姿态确定、姿态和轨道控制及部件有效性和故障诊断以及模式初始化的内容具体见用户需求的4。",0,1,0,0,0,0,0,0
功能描述：为该机动过程姿态确定提供初始姿态。,0,1,0,0,0,0,0,0
功能描述：太阳全姿态捕获模式初始化,0,1,0,0,0,0,0,0
"功能描述：根据注入轨控开始时间和轨控长度，由6个喷管完成轨控。
处理：
根据注入轨控开始时间和轨控长度，由6个喷管完成轨控，进入轨控模式后需进行如下设置。
		自锁阀1、2均开；
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺数据处理；
调用惯性姿态陀螺预估；
调用星敏感器数据处理；
调用太阳捕获控制；//在有星敏和无星敏时均可启动CMG
调用目标姿态确定；
调用控制器输入量计算；
if(OrContrlCmg=0)  调用 姿控发动机轨控1；
else{调用 姿控发动机轨控2；调用 CMG的控制；}
调用系统故障诊断；",0,1,0,0,0,0,0,0
功能描述：由GPS得到轨道外推的16根数。,0,1,0,0,0,0,0,0
"功能描述：完成遇有单翼帆板未展开时，抖动星体帮助帆板展开的功能。为了节省内存，将此模式的代码从PROM中去掉。若需要此模式，则通过在轨注入的方式，将此模式引入控制。
处理过程：过程如下：
STEP1：如果ZT1 = 5且ZT32 = A且C1 = A1则进行下列处理：
滚动通道每个采样周期中发喷气脉冲（主备份同时发）。其脉冲宽度序列为+0.131，-0.262，+0.262，-0.262，… ，-0.262，+0.262，-0.131，共计120个脉冲。
发完上述120个脉冲以后，令ZT1 = 3，C1 = 0000。
STEP2：如果ZT1 = 5且ZT32 = A且C1 = A2则进行下列处理：
俯仰通道每个采样周期中发喷气脉冲（主备份同时发）。其脉冲宽度序列为+0.131，-0.262，+0.262，-0.262，… ，-0.262，+0.262，-0.131，共计120个脉冲。
发完上述120个脉冲以后，令ZT1 = 3，C1 = 0000。
STEP3：如果ZT1 = 5且ZT32 = A且C1 = A3则进行下列处理：
偏航通道每个采样周期中发喷气脉冲（主备份同时发）。其脉冲宽度序列为+0.131，-0.262，+0.262，-0.262，… ，-0.262，+0.262，-0.131，共计120个脉冲。
发完上述120个脉冲以后，令ZT1 = 3，C1 = 0000。
STEP4：如果ZT1 = 5且ZT32 = A且C1 = FFFF则进行下列处理：
发四个轨控喷管同时工作的脉冲序列：脉冲宽度为0.262，0，0.262，0，… ，0.262，0，共计120个（包括宽度为0的脉冲）。。
发完上述120个脉冲以后，令ZT1 = 3，C1 = 0000。",0,1,0,0,0,0,0,0
功能描述：利用红外、数字/太阳敏感器确定姿态。,0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|卫星轨道参数外推计算|FREQ2.0|5.1.1|实时计算卫星轨道参数。
|轨道外推根数获取与星历计算|FREQ2.1|5.1.2|岁差章动计算、GPS 轨道数据判断、太阳星历、地面站位置、地磁场强度计算
|GPS轨道数据有效性判断|FREQ2.2|5.1.2.2|对GPS轨道数据的有效性进行判断
|GPS 通道版和轨道版轨道计算|FREQ2.3|5.1.2.2.1和5.1.2.2.2|利用GPS 通道版和轨道版数据进行GPS 定轨程序
| 系的卫星位置及速度计算|FREQ2.4|5.1.2.5|将J2000 系的卫星位置与速度转换为WGS84 系的位置和速度
|近圆中低轨卫星轨道根数外推算法产品规范|FREQ2.5|/|规范化算法：
|近圆中低轨卫星GPS轨道计算算法产品规范|FREQ2.6|/|规范化算法：
|岁差章动矩阵计算算法产品规范|FREQ2.7|/|规范化算法：
|4阶星上地磁场计算方法算法产品规范|FREQ2.8|/|规范化算法：
|光行差计算算法产品规范|FREQ2.9|/|规范化算法：
|自主轨控计算及发送请求|FREQ2.10.0|5.1.2.6|根据实际与标称轨道参数计算轨控参数，并进行轨控申请
|自主轨控计算初始化|FREQ2.10.1|5.1.2.6.1|进行自主轨控远地点选取和轨控时间计算
|发送自主轨控请求|FREQ2.10.2|5.1.2.6.2|发送轨控加温请求，判断是否可以进行自主轨控
|牛顿插值法|FREQ2.1.2|6.1.25|根据一组已知时刻函数值，推断任意时刻函数值
",0,0,0,1,0,0,0,0
"功能描述：计算CMG的框架角速度,。",0,1,0,0,0,0,0,0
"功能描述：模拟量遥测 
",0,0,0,0,0,1,0,0
功能描述：发送部件工作状态数据包,0,0,0,0,0,0,0,1
"功能描述：0.5秒中断采集各部件数据
输出：内存单元保存的各部件数据与状态。
处理：  
     处理流程如下图所示：
                      图11：数据采集处理流程",0,0,0,0,0,1,0,0
"功能描述：由模拟太阳信号码、监视码得到模拟太阳角、见太阳标志。
",0,0,0,0,0,1,0,0
"功能描述：处理地面遥控数据指令
",0,0,0,0,0,0,1,0
功能描述：为三轴姿态喷气控制选择喷管；并记录喷气时间等。,0,1,0,0,0,0,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：，
输出：保持角动量所需电压， 
      角动量偏差积分项：，
",0,1,0,0,0,0,0,0
功能：在不使用陀螺数据时，对姿态角、角速度与姿态四元数预估。,0,1,0,0,0,0,0,0
"功能描述：星上实时计算追踪器轨道
",0,1,0,0,0,0,0,0
"功能描述：利用B头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.11
STEP1：计算，将下标A换成B；FM3更改：若，则：，FSTD=1；
STEP2：计算。的各项乘以，的各项乘以。将下标A换成B；
STEP3：计算q
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算",0,1,0,0,0,0,0,0
"功能描述：利用B，C头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.9
STEP1：计算，将下标A换成C；FM3更改：若，则：，FSTD=1；
STEP2：计算，的各项乘以，的各项乘以。将下标A换成C；
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,1,0,0,0,0,0,0
功能描述：：检测工作中的动量轮的故障并设置BZ3。,0,1,0,0,0,0,0,0
功能描述：帆板驱动线路数据处理 ,0,0,0,0,0,1,0,0
"功能描述：根据红外输入，计算滚动和俯仰角。
",0,1,0,0,0,0,0,0
"功能描述：决定利用星敏感器A、B、C单独或组合定姿的方式，调用相应姿态修正程序。
",0,1,0,0,0,0,0,0
功能描述：发送全姿态捕获模式数据包,0,0,0,0,0,0,0,1
"功能描述：根据飞轮角动量及地磁场强度决定并输出磁棒控制电压、、。
",0,1,0,0,0,0,0,0
"功能描述：选择星敏感器有效数据进行几何姿态确定，并在星敏无效情况下并采用陀螺数据进行姿态预估。
",0,1,0,0,0,0,0,0
"功能描述：姿态机动过程目的姿态确定。
",0,1,0,0,0,0,0,0
"功能描述：
处理
",0,1,0,0,0,0,0,0
功能描述：进行单轴相平面分区及控制规律计算。由，决定是否要喷气；喷气的脉冲宽度；确定本时刻的。,0,1,0,0,0,0,0,0
"功能描述：根据陀螺输入预估卫星惯性姿态四元数。
",0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|姿态控制算法|FREQ4.0|5.4|选择控制方式，并计算控制输出
|喷气控制|FREQ4.1|5.4.1|为三轴姿态喷气控制选择喷管；并记录喷气时间等
|轮控说明|FREQ4.2|5.4.2.1|计算动量轮安装阵及电压分配阵，标称角动量
|轮系摩擦补偿电压计算|FREQ4.3|5.4.2.2|""轮系摩擦力矩的补偿电压计算
""
|动量轮启动与保持|FREQ4.4|5.4.2.3|启动动量轮至标称角动量，并保持
|正常飞行动量轮分配电压计算|FREQ4.5|5.4.2.4|计算正常飞行轮控所需电压
|偏置动量轮分配电压计算|FREQ4.6|5.4.2.5|""计算偏置动量控制时候所需的轮控电压
""
|大力矩飞轮启动与保持|FREQ4.7|""5.4.3.1
""|启动飞轮至标称角动量或角动量维持
|大力矩飞轮控制电压计算|FREQ4.8|""5.4.3.2
""|计算机动或正常模式下保持时的大力矩飞轮控制电压
|喷气卸载条件计算|FREQ4.9|5.4.4|喷气卸载进入和退出条件计算
|磁卸载控制|FREQ4.10|5.4.5|根据合成角动量及地磁场强度决定并输出磁棒控制电压
|地面站位置计算|FREQ4.11|5.6.1|地面站赤经赤纬计算
|运行段帆板控制|FREQ4.12|5.5.1|三轴稳定模式下的帆板控制
|太阳帆板自主跟踪控制|FREQ4.13|5.5.2|根据帆板角误差、控制帆板跟踪太阳
|数传天线指向控制|FREQ4.14|5.6.1.1|根据指令完成数传天线的指向控制
|中继轨道计算|FREQ4.22|5.7.1|中继卫星轨道确定。
|中继天线指向控制|FREQ4.23|5.7|根据指令完成中继天线的指向控制
|动量轮转速保持算法产品规范|FREQ4.15|/|规范化算法：
|直线型相平面喷气姿态控制算法产品规范|FREQ4.16|/|规范化算法：
|""基于零空间的N个动量轮的角动量自调整算法产品规范
""|FREQ4.17|/|规范化算法：
|四阶结构滤波器算法产品规范|FREQ4.18|/|规范化算法：
|连续电压式磁卸载算法产品规范|FREQ4.19|/|规范化算法：
|地面目标矢量计算算法产品规范|FREQ4.20|/|规范化算法：
|""基于三轴角动量反馈的偏置动量控制方法产品规范
""|FREQ4.21|/|规范化算法：
|双脉冲变轨|FREQ4.22|""任务书的
4.2.3""|根据地面注入的指令可实现两次轨控的功能
|数传天线指向目标角计算|FREQ4.14.2|5.6.2|根据指定跟踪数传天线与其被指定跟踪站的方位，计算其跟踪转角
|数传天线指向目标角平滑处理|FREQ4.14.3|5.6.3|由设定加速度与角速度极限约束，对目标转角平滑处理
|数传运动扰动力矩计算|FREQ4.14.4|5.6.4|根据天线运动信息计算对星体质心扰动力矩
|数传角速度控制指令计算|FREQ4.14.5|5.6.5|计算以角速度指令跟踪控制量
|中继天线指令转角计算|FREQ4.23.2|5.7.2|根据指令完成中继天线的捕获跟踪控制
|中继天线扫描指令计算|FREQ4.23.3|5.7.3|根据指令完成中继天线的捕获跟踪控制
|中继天线指向目标角平滑处理|FREQ4.23.4|5.7.4|由设定加速度与角速度极限约束，对目标转角平滑处理
|中继运动扰动力矩计算|FREQ4.23.5|5.7.5|根据天线运动信息计算对星体质心扰动力矩
|中继角速度控制指令计算|FREQ4.23.6|5.7.6|计算以角速度指令跟踪控制量
|外扰力矩估计|FREQ4.24|5.4.2.6|星体扰动力矩实时估计
|姿态机动时的动量轮角动量自调整|FREQ4.25|5.4.2.7|对星体进行姿态机动时的动量轮角动量进行调整
",0,1,0,0,0,0,0,0
"功能描述：使星体−Z 轴对日定向，星体偏航姿态为零，适当时重捕地球。
",0,1,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的轨道参数
处理：
GPS无效判断的连续次数变量由1改为7。
调整序号14注入轨道根数有效性阀值、序号16~18岁差章动系数的初装值。",0,0,0,0,0,0,1,0
"功能描述：根据红外信息进行姿态滤波修正。
",0,1,0,0,0,0,0,0
"功能：利用星敏感器B、C的测量，修正姿态四元数与姿态角速度。
",0,1,0,0,0,0,0,0
功能描述：入轨段控制,0,1,0,0,0,0,0,0
"软件需求名称：帆板控制算法 
需求类别：其他 
软件需求描述：
表格工作项|软件需求标识|软件需求名称|
FREQ12.3-R4.6.1|帆板控制策略|《用户需求》4.6.1|
FREQ12.3-R4.6.2|帆板控制量确定|《用户需求》4.6.2|
FREQ12.3-R4.6.3|帆板控制指令转速计算|《用户需求》4.6.3|
",0,1,0,0,0,0,0,0
"功能描述：接收TG状态数据
处理：将接收TG状态数据存储地址中内容解包TG状态。",0,0,0,0,0,0,1,0
"功能描述：根据轨道数据计算偏流角。
",0,1,0,0,0,0,0,0
"功能描述：完成整星绕滚动轴的姿态侧摆机动
处理过程：过程如下：
STEP1：当ZT F（不用红外+单个斜装陀螺定姿），进行姿态预估，得到姿态角和角速度。
STEP2：进行运行段姿态确定，具体过程如下：
进行红外数据采集及处理和q及s姿态予估器
当星敏感器修正时间大于等于4500秒时，将星敏感器测量回路求得的姿态角和角速度，赋值为姿态角和角速度，
根据轮子的工作状况，计算滚动轴最大控制力矩
计算滚动轴角加速度、加速时间
设置侧摆标志FRTS的值，0为通过轮控进行侧摆，1为通过喷气进行侧摆，设置的条件如下表所示：
条件|FRTS的取值
ZT35(2) = 1，|1
其余情况|0

计算滚动轴期望轨迹和
得到输入控制律的姿态角和角速度，
STEP3：进行运行段控制，具体过程如下：
根据ZT2的值进行飞轮控制
当ZT8  3（姿控发动机可用）且ZT9  3（轨控发动机可用）且FRTS = 1（用喷气进行侧摆）且ZT（不用红外+单个斜装陀螺定姿）时，进行轨控段喷气姿态控制
进行陀螺故障检测及选择
当ZT40(4) = 1时，进行数传天线捕获跟踪控制
STEP4：根据ZT7的取值，进行相应的帆板控制。
ZT7的值|处理
 8|进行运行段帆板控制
ZT7 = 0|发两翼帆板归零指令
ZT7 = 3|发左翼为90度，右翼为 -90度指令
ZT7 = 5|发左右皆为90度指令
ZT7 = 7|发左右皆为180度指令
ZT7 = 9|发指令
ZT7 = A|发指令
ZT7 = B|发指令
",0,1,0,0,0,0,0,0
"功能描述、输入、输出、计算公式见《用户需求》4.6.1~4.6.3。
序号|功能点编号|功能描述|说明
|FREQ3.4.8.1|喷气控制|《用户需求》4.6.1
|FREQ3.4.8.1.1|相平面姿控算法|《用户需求》4.6.1.1
|FREQ3.4.8.1.2|相平面法喷管选择|《用户需求》4.6.1.2
|FREQ3.4.8.1.3|脉冲调宽姿控算法|《用户需求》4.6.1.3
|FREQ3.4.8.1.4|脉冲调宽法喷管选择|《用户需求》4.6.1.4
|FREQ3.4.8.2|动量轮控制|《用户需求》4.6.2
|FREQ3.4.8.2.1|动量轮安装矩阵和电压分配矩阵|《用户需求》4.6.2.1
|FREQ3.4.8.2.2|动量轮摩擦补偿计算|《用户需求》4.6.2.2
|FREQ3.4.8.2.3|动量轮角动量保持的PI控制|《用户需求》4.6.2.3
|FREQ3.4.8.2.4|动量轮启动与保持|《用户需求》4.6.2.4
|FREQ3.4.8.2.5|正常飞行动量轮分配电压计算|《用户需求》4.6.2.5
|FREQ3.4.8.3|喷气卸载计算|《用户需求》4.6.3
|FREQ3.4.8.4|喷气动量轮联合控制|《用户需求》4.6.4
",0,1,0,0,0,0,0,0
"功能描述：搜索并捕获太阳，完成并保持帆板对太阳定向
",0,1,0,0,0,0,0,0
"功能描述：接收遥控固定参数注入块的在轨维护功能参数设置区数据
处理：
调整程序替换区模块代号1~8的初装值。",0,0,0,1,0,0,0,0
"功能描述：与地检通信，获得地检数据。
处理：
功能编号|功能|引用文档
FREQ77|初始化|任务书
FREQ78|地检使用要求|任务书
FREQ79|通信(串口)|任务书
FREQ80|通信故障处理|任务书
FREQ81|数据解包与转换|任务书
FREQ82|地检数据有效性判断、处理|任务书
FREQ83|地检模拟量采集、处理|预留
FREQ84|部件在轨转发（在轨修改）|预留
",0,0,1,0,0,0,0,0
"模式字定义如下，装订值为0：
模式字|工作模式描述
0|主动段
1|正常对地运行
2|偏航机动
3|全姿态捕获
4|对地捕获
5|帆板未展开
6|轨控
7|无控
8|侧摆机动
9| 侧摆保持
11|入轨段控制
12|自旋模式
13|应急模式
14|星敏全姿态捕获模式

工作模式的转换可分为以下二种情况：
按地面上行注入进行转换：通过注入姿控数据块中的模式字进行转换；
按应用软件用户需求给定的条件判别，由软件自主控制转换：自主转换分两种：一种为正常运行转换；一种为故障时转换。下面分别进行说明
正常转换图为：
正常运行自主转换如下表所示：条件标识原则：ZCCX—Y，其中ZCC表示正常自主转换条件，X为转出的模式字，Y为转入的模式字。
标识|具体条件
ZCC0—B|星箭分离
ZCCB—1|Tin >4800 
ZCC1—2|
ZCC1—6|
ZCC1—8|且且且
ZCC2—1|
ZCC2—6|
ZCC4—1|FEA=A
ZCC6—1|
ZCC6—2|)且
ZCC8—1|""满足下列条件之一：
若动量轮侧摆且目标侧摆角为0，当姿态角误差小于0.5度，角速度误差小于0.01度/s连续次
若喷气侧摆且目标侧摆角为0，当姿态角误差小于1度，角速度误差小于0.015度/s连续次
若星时大于侧摆机动时间＋600秒且侧摆目标角为0""
ZCC8—9|""满足下列条件之一：
若动量轮侧摆且目标侧摆角不为0，当姿态角误差小于0.5度，角速度误差小于0.01度/s连续次
若喷气侧摆且目标侧摆角不为0，当姿态角误差小于1度，角速度误差小于0.015度/s连续次
若星时大于侧摆机动时间＋600秒且侧摆目标角不为0""
ZCC9—8|""满足下列条件之一：
且
""

故障自主转换如下表所示：条件标识原则：GCX—Y，其中GCC表示正常自主转换条件，X为转出的模式字，Y为转入的模式字。其中进入应急模式的条件为读到应急线路加电，记为GCC-D。其余的自主故障切换如下图所示：
故障条件定义如下：
标识|具体条件
GCC1—3|FailureFlag=1并且WacqSunFlag =0并且ZT7属于[1，4]区间内
GCC1—7|FailureFlag=1并且ZT7不属于[1，4]区间内
GCC1—E|FailureFlag=1并且WacqSunFlag=1并且ZT7属于[1，4]区间内
GCC3—7|FailureFlag＝4且AutoInStopNum<2
GCC3—E|SMODE＝3且TSMODE>8000（若ZT11=4则取值为32000）
GCC4—1|FEA=A
GCC4—3|WacqUseIresOrSTSFlag=1且TCOUNT>24000
GCC5—3|脉冲发完后
GCC6—1|FailureFlag＝2且无机动要求
GCC6—2|FailureFlag＝2且无机动要求
GCC7—3|>6900 且AutoInStopNum<2且WacqSunFlag =0
GCC7—E|>6900 且AutoInStopNum<2且WacqSunFlag =1
GCC8—1|FailureFlag=3
GCC9—3|FailureFlag=1并且WacqSunFlag=1并且ZT7属于[1，4]区间内
GCC9—7|FailureFlag=1并且ZT7不属于[1，4]区间内
GCC9—E|FailureFlag=1并且WacqSunFlag=0并且ZT7属于[1，4]区间内
GCCB—3|FailureFlag=1并且ZT7属于[1，4]区间内
GCCB—7|FailureFlag=1并且ZT7不属于[1，4]区间内
GCCE—1|StarCatchFlag=1且(1-()<0.000685)且norm()<0.000875
GCCE—7|TCOUNT>31200或（FailureFlag＝4且AutoInStopNum<2）

AOCC切机或复位后通过OBDH恢复重要数据来恢复模式，具体见重要数据文件要求。",0,1,0,0,0,0,0,0
"功能描述：发动机关机中断信号处理                                                                                                                                                                                                                                                                                                                                                                                                                                                                           处理：
应用软件处理发动机关机中断信号，信号源为3路伽玛关机信号，应用软件查到关机后，立触地关机标志有效，发7500N关机指令。",0,0,1,0,0,0,0,0
功能描述：发送姿态机动过程参数包。,0,0,0,0,0,0,0,1
"功能描述：计算机动模式轮控所需电压。
输入：本体相对目标姿态的四元数
      本体相对目标坐标系转速的估值
      陀螺角速度估值    ，
      实测飞轮角动量    ，
      ，",0,1,0,0,0,0,0,0
"功能描述：接收应急控制器重要数据。
处理：应急线路加电后与OBDH通信，获得陀螺和推力器状态，若连续3个控制周期都没有成功取得重要数据，默认陀螺使用7、8、9号，推力器使用主备份推力器，模拟式太阳敏感器使用ASS1和ASS21。",0,0,0,0,0,0,1,0
功能描述：利用轨道外推的计算结果，计算其他待用参数。,0,1,0,0,0,0,0,0
"功能描述：入轨后或太阳丢失后，搜索太阳并捕获太阳。
处理：
自主或指令转入该模式，进行如下设置。
根据自锁阀状态设置自锁阀1和/或自锁阀2开。
系统诊断出故障后进入该模式，100秒内不控，具体要求见用户需求。
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
if(CMGStartFlag=1) 调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺数据处理；
	调用惯性姿态陀螺预估；
调用星敏感器数据处理；
调用太阳捕获控制；
调用目标姿态确定；
调用控制器输入量计算；
喷气卸载条件计算
if(CMGStartFlag=1) 调用CMG奇异状态的判断及算法计算；
	if(CMGInControlFlag=1 且UnLoadMode=0)
{ 调用CMG的控制；
if(SSTCatchSuc＝1) 调用 磁卸载控制； }
else { if(CMGStartFlag=1) 调用 CMG启动与保持；
if(TimeStopC<=0且Flag_equation=0) 
{调用 相平面喷气脉宽； }
else {置喷气脉宽为0；SpeedControlTime=0；WacFlag=1；}
}
	调用 系统故障诊断；",0,1,0,0,0,0,0,0
"需求名称|功能及处理描述
+Y帆板数据的采集与处理|+Y帆板1553B取数指令（广播同步消息）
+Y帆板转角及状态信息|每周期无条件的向+Y帆板RT发取数指令，获得+Y帆板数据并处理成对应的角度。
-Y帆板数据的采集与处理|-Y帆板1553B取数指令|-Y帆板转角及状态信息|每周期无条件的向-Y帆板RT发取数指令，获得-Y帆板数据并处理成对应的角度。
+Y帆板控制指令的输出处理|+Y帆板控制数据
+Y帆板控制指令消息输出|根据协议将+Y帆板的控制数据转换为相应的控制指令消息并输出
-Y帆板控制指令的输出处理|-Y帆板控制数据
-Y帆板控制指令消息输出|根据协议将-Y帆板的控制数据转换为相应的控制指令消息并输出
帆板的程序注入修改|从OBDH收到的帆板需修改程序内容|帆板需修改程序内容|将从OBDH收到的帆板需修改程序内容，按内总线的格式发送给帆板RT需修改的程序内容
帆板的内存下传|从OBDH收到的帆板内存下传设置指令|内存下传设置指令|地面注入帆板内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至帆板 RT。",0,0,0,0,0,1,0,0
功能描述：接收内存读出地址及长度，发送内存读出数据包。                                                                                                                                                                                                                                                                                                                                                                                                                    处理：将接收内存地址及长度存储地址中内容的解包成需下传的内存首地址和长度，并判断需下传内容是否在内1553RAM有效地址范围内。若在范围内，则将需下传的内容放到指定地址中。,0,0,0,0,0,0,0,1
"软件需求标识：FREQ18 
软件需求名称：模拟太敏数据处理 
需求类别：其他 
软件需求描述：模拟太敏数据处理。",0,0,0,0,0,1,0,0
"序|需求名称|编号|功能及处理描述
|数字太阳数据的采集与处理|FREQ1.1|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
|模拟太阳数据的采集与处理|FREQ1.2|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
|01太阳数据的采集与处理|FREQ1.3|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
",0,0,0,0,0,1,0,0
"功能描述：接收时间码
处理： OBDH分系统每1分钟给控制计算机校时一次。",0,0,0,0,1,0,0,0
"软件需求名称：模式初始化 
需求类别：其他 
软件需求描述：见“用户需求”4.1和“任务书”4.1.10“工作模式要求”1）工作模式初始化。 
表格工作项|软件需求标识|软件需求名称|
FREQ12.2-WMInit-1|太阳定向模式初始化|《用户需求》4.1.1【初始化】|
FREQ12.2-WMInit-2|恒星定向1模式初始化|《用户需求》4.1.2【初始化】|
FREQ12.2-WMInit-3|惯性调姿模式初始化|《用户需求》4.1.3【初始化】|
FREQ12.2-WMInit-4|恒星定向2模式初始化|《用户需求》4.1.4【初始化】|
FREQ12.2-WMInit-5|轨控定向模式初始化|""《用户需求》4.1.5【初始化】
《任务书》4.1.10""|
FREQ12.2-WMInit-6|中继跟踪模式初始化|《用户需求》4.1.6【初始化】|
FREQ12.2-WMInit-7|速率阻尼模式初始化|《用户需求》4.1.7【初始化】|
FREQ12.2-WMInit-8|无控模式初始化|《用户需求》4.1.8【初始化】|
",0,1,0,0,0,0,0,0
"功能描述：检测系统故障，给出故障标志。
",0,0,0,1,0,0,0,0
"功能描述：将CMG启动到标称转数。
处理：
发送指令“运行CMG启动模式”进入CMG启动模式。
	根据地面数据指令，设置CMG引入状态；
	应用软件连续5个控制周期给引入的CMG加电；
	根据自锁阀状态设置自锁阀1和/或自锁阀2开；
	上述动作完成后，自主控制引入的4或5个CMG框架角转到标称位置；
	当框架角度达到要求值后，地面发“CMG高速启动”指令，应用软件连续5个控制周期自主向引入的4或5个CMG发送“CMG高速启动”指令，令4或5个CMG的高速转速达到6000rpm；（本步骤也可通过地面指令完成）
	CMG高速启动时间为10~15分钟
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺数据处理；
调用惯性姿态陀螺预估；
调用星敏感器数据处理；
调用太阳捕获控制；//在有星敏和无星敏时均可启动CMG
调用目标姿态确定；
调用控制器输入量计算；
调用CMG奇异状态的判断及算法计算；
调用CMG启动与保持；
if(CMGStartComm =1) 给CMG发启动指令；
if(Flag_equation=0)调用相平面喷气脉宽；
调用系统故障诊断；",0,1,0,0,0,0,0,0
"功能描述：帆板未展开时的三轴喷气姿态控制。

处理：同用户需求的
（1）各轴喷气参数设置如表34所示
表34：消初段喷气姿态控制各轴喷气参数设置
|滚动|俯仰|偏航
|0.4|0.4|0.4
|1.0|1.0|1.0
|0.27|0.2|0.15
|0.15|0.15|0.15
|0.35|0.35|0.35
KJ2(s)|1|2|2
aJS（/s2）|0.281|0.216|0.118

（2）进行各轴平面喷气控制规律计算（同用户需求的）
（3）根据姿轨控喷气规律计算结果，发出相应的喷气指令（同用户需求的）",0,1,0,0,0,0,0,0
"功能描述：为姿态机动提供的目标轨迹参考数据
",0,1,0,0,0,0,0,0
"功能描述：发送延时遥测数据
处理：
遥测数据格式内容具体见遥测文件。",0,0,0,0,0,0,0,1
"功能描述：计算磁卸载所需的磁矩与磁力矩器工作脉宽。
",0,1,0,0,0,0,0,0
功能描述：通过注入轨道参数，计算轨道外推数据。,0,1,0,0,0,0,0,0
"功能描述：选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
输出：数字太阳敏感器输出；模拟太阳敏感器输出；模拟式太阳敏感器视场码；0-1式太阳敏感器的信号（0或1）；数字太阳敏感器视场码。
处理：
（1）太阳共有两个互为备份的LTU，通过每个LTU均可获得数字太阳、模拟太阳、0-1太阳数据；每个控制周期根据DSSLTUSeltFlag确定进行通讯的太阳LTU，发送取数指令。
（2）向太阳LTU发完取数命令后，获得太阳LTU返回的个字节数据，将数据根据LTU通讯协议转换为控制计算所需的数据格式。
",0,0,0,0,0,1,0,0
"软件需求名称：模式切换 
需求类别：其他 
软件需求描述：
表格工作项|软件需求标识|软件需求名称|
FREQ12.1-1-K|从太阳定向模式转出|《用户需求》4.1.1【模式转换条件】|
FREQ12.1-2|从恒星定向1模式转出|《用户需求》4.1.2【模式转换条件】|
FREQ12.1-3|从惯性调姿模式转出|《用户需求》4.1.3【模式转换条件】|
FREQ12.1-4|从恒星定向2模式转出|《用户需求》4.1.4【模式转换条件】|
FREQ12.1-5|从轨控定向模式转出|《用户需求》4.1.5【模式转换条件】|
FREQ12.1-6|从中继跟踪模式转出|《用户需求》4.1.6【模式转换条件】|
FREQ12.1-7|从速率阻尼模式转出|《用户需求》4.1.7【模式转换条件】|
",0,1,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|星时计算|FREQ1.4.1|上周期绝对星时；上周期锁存的星时计数器的值|本周期的绝对星时|""每周期无条件的进行星时的计算。处理要求见任务书。
""
|OBDH星时校时|FREQ1.4.2|""OBDH校时指令中的绝对星时;
及对应锁存的对应时间的星时计数器的值""|上周期绝对星时；上周期锁存的星时计数器的值|采用OBDH校时方式时，每秒有OBDH校时指令时进行校时。处理见任务书。
|GPS秒脉冲高精度校时|FREQ1.4.3|""GPS秒脉冲校时指令中的绝对星时;
及对应锁存的对应时间的星时计数器的值""|上周期绝对星时；上周期锁存的星时计数器的值|采用GPS秒脉冲方式时，每秒有GPS秒脉冲指令时进行校时。处理要求见任务书。
|两种校时方式的切换|FREQ1.4.4||校时方式标志|OBDH星时校时、GPS秒脉冲高精度校时是否引入系统由注入指令控制，OBDH星时校时为系统默认使用的校时方式。具体见任务书要求
|均匀校时|FREQ1.4.5|""本周期的绝对星时；
均匀校时补偿量""|""本周期的绝对星时；
""|应用软件每次进行星时计算时，将计算后的绝对星时加上均匀校时补偿量作为本周期的补偿后的绝对星时。。具体见任务书要求
|星敏感器数据星时时标处理|FREQ1.4.6|同步标志；本周期的绝对星时；本周期锁存星时计数值；锁存的星敏同步计数值|星敏感器测量数据对应的星时|具体处理要求见任务书。",0,0,0,0,0,1,0,0
"功能描述：计算速度增量关机喷气时间
",0,1,0,0,0,0,0,0
"功能描述：进行单轴相平面分区及控制规律计算。
",0,1,0,0,0,0,0,0
功能描述：接收遥控固定参数注入块的外1533B接收子地址内存管理区,0,0,0,0,0,0,1,0
