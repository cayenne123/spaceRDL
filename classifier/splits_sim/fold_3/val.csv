Requirements Description,初始化,控制计算,控制输出,故障诊断和处理,数据有效性判断,数据采集,遥控,遥测
功能描述：置卫星姿态无控，处于自由飞行状态,0,1,0,0,0,0,0,0
"功能描述：轨控段喷气控制计算。
处理：同用户需求的
（1）各轴喷气参数设置如表36所示
表36：轨控段喷气姿态控制各轴喷气参数设置
|滚动|俯仰|偏航
|0.4 mθD04|0.4 mθD04|0.4 mθD04
|1.0 mθD13（注1）|1.0 mθD13（注1）|1.0 mθD13（注1）
|1.0 mθB36|1.0 mθB36|1.0 mθB36
|3.0 mθB33（注1）|3.0 mθB33（注1）|3.0 mθB33（注1）
|0.1|0.14|0.07
|0.2|0.2|0.2
|（注3）|（注3）|（注3）
|0.3|0.3|0.3
|0.43（注2）|0.43（注2）|0.43（注2）
|（注3）|（注3）|（注3）
KJ2(s)|2|2|2
aJS（/s2）|0.137|0.235|0.089

注1：在BZ1 =3、4的条件下
注2：在BZ1 =2的条件下
注3：在BZ1 =4的条件下
（2）进行各轴平面喷气控制规律计算（同用户需求的）
（3）根据姿轨控喷气规律计算结果，发出相应的喷气指令（同用户需求的）",0,0,0,1,0,0,0,0
功能描述：对动量轮、推力器和磁力矩器控制指令的处理 ,0,0,1,0,0,0,0,0
"功能描述：视线目标的姿态确定。
",0,1,0,0,0,0,0,0
"功能描述：由模拟太阳信号码、监视码得到模拟太阳角、见太阳标志。
",0,0,0,0,0,1,0,0
功能描述：发送模拟量遥测数据包2,0,0,0,0,0,0,0,1
"功能描述：根据陀螺输入，预估卫星惯性姿态。
",0,1,0,0,0,0,0,0
功能描述：CMG启动模式控制,0,1,0,0,0,0,0,0
"功能描述：为三轴姿态喷气控制选择推力器；并记录喷气时间和次数等。
",0,0,0,1,0,0,0,0
"功能描述：设置2类慢帧遥测数据下传顺序
触发条件：模式字改变、数据指令",0,0,0,0,0,0,0,1
"功能描述：卫星正常运行模式之一，完成在阳照区和非任务区的对日功能，保证星上能源。
处理：
该模式卫星正常在轨工作模式，入轨期间，CMG启动在满足一定的姿态条件后，由地面指令“允许转入对日定向模式”指令，控制星上模式由CMG启动模式转入对日定向模式。之后控制分系统按照地面规划的指令在轨道A、B、C、D四个点进行姿态机动来完成日地、地日、地地之间的姿态转换。辐射标定模式下的姿态固定，由数据指令控制进入标定模式。
在该模式下，控制系统根据数据块指令提供的开始和结束时间，开始、停止对指定天线控制角度进行计算，并0.5秒向天线发送一次控制指令每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺的数据处理；
调用四元数陀螺预估；
调用星敏感器数据处理；
调用利用星敏感器的姿态确定；
调用中继天线捕获跟踪控制；
调用对地数传天线捕获跟踪控制；
调用目标姿态确定；
调用控制器输入量计算；
调用喷气卸载条件计算；
调用CMG奇异状态的判断及算法计算；
if(UnLoadMode=0)
{调用CMG的控制；调用磁卸载控制；}
else {调用CMG启动与保持；
if(Flag_equation=0且TimeStopC<=0)调用相平面喷气脉宽；}
调用系统故障诊断；",0,1,0,0,0,0,0,0
"功能：利用星敏感器A、B单独或组合定姿的方式，调用相应姿态修正程序。
",0,1,0,0,0,0,0,0
功能描述：根据太阳矢量在帆板2法平面内投影与帆板法线之间的夹角，通过帆板驱动机构2控制帆板2，使帆板2能捕获及跟踪太阳。,0,1,0,0,0,0,0,0
功能描述：利用星敏感器A、C的测量，修正姿态四元数与估计陀螺漂移。,0,1,0,0,0,0,0,0
"功能描述：发送姿态数据包1
",0,0,0,0,0,0,0,1
"功能描述：接收遥控固定参数注入块的执行机构参数设定及诊断参数
处理：
调整CMG高速角动量与标称值偏差阀值系数的初装值。",0,0,0,0,0,0,1,0
"功能描述：利用A，B头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.7。
STEP1：计算；FM3更改：若，则：，FSTD=1；
STEP2：计算，。的各项乘以，的各项乘以。
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,1,0,0,0,0,0,0
功能描述：飞轮进行整星零动量和侧摆控制。,0,1,0,0,0,0,0,0
"功能描述：选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
输出：数字太阳敏感器输出；模拟太阳敏感器输出；模拟式太阳敏感器视场码；0-1式太阳敏感器的信号（0或1）；数字太阳敏感器视场码。
处理：
（1）太阳共有两个互为备份的LTU，通过每个LTU均可获得数字太阳、模拟太阳、0-1太阳数据；每个控制周期根据DSSLTUSeltFlag确定进行通讯的太阳LTU，发送取数指令，具体如下表所示：
DSSLTUSeltFlag |进行通讯的太阳LTU|发送的取数指令
01H|太阳LTU1|43H
02H|太阳LTU2|43H
其它|根据LTU故障诊断的结果决定太阳LTU的选取。初始状态为太阳LTU1|43H

（2）向太阳LTU发完取数命令后，获得太阳LTU返回的个字节数据，将数据根据LTU通讯协议转换为控制计算所需的数据格式，具体参见LTU通讯协议件。
（3）太阳LTU数据采集过程中的故障处理见任务书中规定。",0,0,0,0,0,1,0,0
功能描述：接收遥控固定参数注入块的系统功能参数设置区数据,0,0,0,0,0,0,1,0
"软件需求标识：FREQ26 
软件需求名称：推进数据采集处理要求 
需求类别：其他 
软件需求描述：推进数据采集处理要求。",0,0,0,0,0,1,0,0
"功能：利用星敏感器A、B单独或组合定姿的方式，调用相应姿态修正程序。
输入：姿态预估周期 (量纲：秒)
有效性判据给出的星敏感器A数据可用标志F_SAUsed(1:可用，0:不可用)
有效性判据给出的星敏感器B数据可用标志F_SBUsed(1:可用，0:不可用)
本周期采样到的星敏感器A的有效输出 (设有nA个，即)，以及它们测量时刻相应的星时 (量纲：秒)
本周期采样到的星敏感器B的有效输出(设有nB个，即)，以及它们测量时刻相应的星时(量纲：秒)
使用陀螺数据时：
本周期计算的与前Num_q-1个周期的，以及符号标志F_Qsgn
不使用陀螺数据时：
本周期计算的与前Num_q-1个周期的，以及符号标志F_Qsgn_ng
修正参数 
本周期轨道计算采用的星时 (量纲：秒)
",0,1,0,0,0,0,0,0
"功能描述：卫星处于应急状态
处理：
STEP1：进行姿态预估，得到姿态角和角速度
STEP2：令动量轮和磁力矩器的控制电压为0",0,1,0,0,0,0,0,0
功能描述：发送姿态机动过程参数包。,0,0,0,0,0,0,0,1
"功能描述：使用红外、星敏、太阳定姿时，计算CMG的框架角速率指令。
处理：
软件设计时应注意保护Vm，保证此节使用的Vm未在周期性清0处理中被清除。",0,1,0,0,0,0,0,0
"功能描述：紧急撤离模式下，计算视速度增量关机时间长度
",0,1,0,0,0,0,0,0
"功能描述：仅利用星敏感器A的测量，修正姿态四元数与姿态角速度移。
",0,1,0,0,0,0,0,0
功能描述：对自锁阀进行开关处理。,0,0,1,0,0,0,0,0
"功能描述：与动量轮通信，输出本周期电压。采集动量轮模拟量信息。
处理：
功能编号|功能|引用文档
FREQ102|初始化(加电)|任务书
FREQ103|动量轮使用要求(方向等)|任务书
FREQ104|通信(DA输出、脉冲输入)|任务书
FREQ105|通信故障处理|预留
FREQ106|数据解包与转换|任务书
FREQ107|处理动量轮数据有效性处理|任务书
FREQ108|动量轮模拟量采集、故障|任务书
FREQ109|部件在轨转发（在轨修改）|预留
",0,0,1,0,0,0,0,0
"序|需求名称|编号|调用条件|功能和处理描述
|上电初始化|FREQ11.0|上电时|""1553B（内总线）初始化：按通讯协议要求进行设置
SpaceWire总线（外总线）初始化：按通讯协议要求进行设置
CAN总线（外总线）初始化：按通讯协议要求进行设置，
变量初始化""
|复位初始化|FREQ11.1|复位时|""1553B（内总线）初始化：按通讯协议要求进行设置
SpaceWire总线（外总线）初始化：按通讯协议要求进行设置
CAN总线（外总线）初始化：按通讯协议要求进行设置，
变量初始化""",1,0,0,0,0,0,0,0
功能描述：实现正常模式及侧摆模式下的偏流角计算。,0,0,0,1,0,0,0,0
"功能描述：发送AOCC重要数据包
处理： AOCC在接收注入的重要数据快的同时将其存放在OBDH规定的内存中，AOCC不再进行单独处理。",0,0,0,0,0,0,0,1
"功能描述：系统软件上电复位后，调用应用软件AppInit函数，并根据初始化内容，启动任务
处理：
OBC上电/复位后，由系统软件引导应用软件运行。首先进行初始化，包括系统软件初始化和系统软件调用应用软件提供的初始化函数（AppInit）。启动任务并开始进行任务调度管理。",1,0,0,0,0,0,0,0
"需求名称|功能及处理描述
ACU模拟量数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发模拟量数据采集指令，获得ACU数据并处理成对应的模拟量信息。
ACU状态数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发各种状态数据采集指令，获得ACU数据并处理成对应的状态信息。
ACU中控制指令的输出处理|根据通讯协议，将计算得到的喷气和磁力矩器数据转换为消息需要的格式并输出。
部件加断电指令的处理|加断电指令消息的输出|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
ACU保存CCU的重要数据|AOCC每个控制周期都将重要数据发送给ACU（驱动控制单元）
从ACU恢复CCU的重要数据|上电/复位后应用软件首先从ACU恢复重要数据
ACU的程序注入修改|将从OBDH收到的ACU需修改程序内容，按内总线的格式发送给ACU RT需修改的程序内容
ACU的内存下传|地面注入ACU内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至ACU RT。
自锁阀操作|根据任务书的要求通过1553B向ACU输出自锁阀开关控制指令",0,0,0,0,0,1,0,0
"功能描述：与星敏感器通讯，获得星敏感器数据。
处理：
在使用星敏感器之前需对其进行初始化，在每个控制周期的开始向S星敏感器发出R信号，并通过串口得到S星敏感器提供的数据。在AO与S星敏感器通信过程中，AO始终处于主动状态。当AO发出R信号下降沿后星敏感器在5ms内返回数据，AO在接收完数据后把R信号置高电平，星敏感器在R信号的上升沿之后的1ms内停止发送数据。
AO为Astro10星敏感器和S星敏感器配置了2个独立的UART，分别各有256byte的FO缓存。因此可以对Astro10星敏感器和S星敏感器同时发出R信号，交替进行进行数据FO缓冲区数据读取。
与APS星敏感器通讯故障时，不使用APS星敏感器数据进行姿态修正。",0,0,0,0,1,0,0,0
"功能描述：置卫星姿态无控，处于自由飞行状态。
",0,1,0,0,0,0,0,0
功能描述：三轴稳定模式下的帆板控制。,0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|陀螺数据处理|FREQ3.1|5.2.1|把陀螺数据、、、变换到星体系中的、、
|陀螺预估惯性姿态|FREQ3.2|5.2.2|根据陀螺输入，预估卫星惯性姿态
|陀螺预估惯性四元数|FREQ3.4|5.2.4|根据陀螺测量输出，一步预估卫星惯性姿态
|动力学预估惯性四元数|FREQ3.5|5.2.5|根据动力学模型，预估卫星惯性姿态
|星敏感器与陀螺姿态修正|FREQ3.7|5.2.7|利用星敏感器和陀螺的输出或仅利用陀螺预估输出计算卫星欧拉角和四元数
|单星敏感器的姿态修正|FREQ3.7.1|5.2.7.1|利用单个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|双星敏感器的姿态修正|FREQ3.7.2|5.2.7.2|利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|对地姿态修正|FREQ3.7.3|5.2.7.3|利用估计的四元数转换姿态角
|星敏感器与动力学姿态修正|FREQ3.8|5.2.8|利用星敏感器的输出计算卫星欧拉角和四元数
|仅单星敏感器的姿态修正|FREQ3.8.1|5.2.8.1|仅利用单个星敏感器的测量，修正姿态四元数与姿态角速度
|仅双星敏感器的姿态修正|FREQ3.8.2|5.2.8.2|仅利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|无陀螺对地姿态修正|FREQ3.8.3|5.2.8.3|利用估计的四元数转换姿态角，送给星敏感器的四元数
|星敏感器相对基准标定|FREQ3.10|5.2.11|对星敏的相对基准进行标定，修正星敏安装矩阵
|星敏感器双矢量姿态确定|FREQ3.11.1|5.2.14.1|利用星敏的测量，确定单点的卫星姿态四元数。
|星敏姿态四元数重置|FREQ3.11.2|5.2.14.2|进行卫星姿态四元数的重置
|姿态四元数预估算法产品规范|FREQ3.1.2|/|规范化算法：
|重力梯度力矩计算算法产品规范|FREQ3.1.3|/|规范化算法：
|基于单星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.5|/|规范化算法：
|基于双星敏感器测量矢量叉乘信息的滤波修正算法产品规范|FREQ3.1.6|/|规范化算法：
|星敏感器相对基准的在轨标定算法产品规范|FREQ3.1.8|/|规范化算法：
|目标姿态计算流程|FREQ3.12|5.3.2|""计算模式的目标姿态
""
|对地定向目标姿态计算|FREQ3.12.0|5.3.2.1|对地定向目标姿态计算
|点对点机动目标姿态计算|FREQ3.12.1|5.3.2.2|点对点机动目标姿态计算
|姿态预置过程目标姿态计算|FREQ3.12.3|5.3.2.3|姿态预置过程目标姿态计算
|非沿迹跟踪阶段目标姿态计算|FREQ3.12.4|5.3.2.4|角速度建立过程目标姿态计算
|轨控目标姿态计算|FREQ3.12.5|5.3.2.5|轨控目标姿态计算
|凝视过程目标姿态计算|FREQ3.12.6|5.3.2.6|凝视过程中计算三轴目标姿态
|正常对日巡航目标姿态计算|FREQ3.12.7|5.3.2.7|正常对日巡航目标姿态计算
|姿态机动初始化|FREQ3.13.1|5.3.1.1|三轴姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉轴/角，以及轨迹的加速，匀速和减速等特征时间点。
|非沿迹跟踪轨迹初始化|FREQ3.13.2|5.3.1.2|匀地速、匀角速度、匀积分时间非沿迹跟踪初始化，计算地心张角和方向矢量等
|轨控姿态机动轨迹初始化|FREQ3.13.4|5.3.1.4|轨控模式目标姿态计算初始化
|计算多项式轨迹系数|FREQ3.13.5|5.3.3.1|根据轨迹规划时间，初始姿态/姿态角速度和目标姿态/姿态角速度计算基于多项式轨迹规划的轨迹系数
|姿态预置机动目标姿态确定|FREQ3.13.6|5.3.3.2|基于多项式曲线的轨迹规划，计算目标姿态
|非沿迹目标姿态角计算|FREQ3.13.8|5.3.4|根据所指定的扫描起始经纬度和末端点经纬度
|偏流角计算|FREQ3.13.9|5.3.5|适用于地球椭球模型，星体姿态描述为转序，计算基于星体光轴(与星本体＋Z轴平行)下的偏流角
|轨道角速度建立目标姿态计算|FREQ3.13.10|5.3.6|在惯性定向与轨道系姿态保持之间切换时，进行轨道角速度的建立或削除
|姿态控制量计算|FREQ3.19|5.2.12|根据姿态确定结果和目标姿态计算结果计算误差姿态角和误差姿态角速度
|引入系统闭环姿态确定|FREQ3.20|5.2.13|根据定姿标志确定引入系统的闭环姿态
|正弦轨迹规划算法算法产品规范|FREQ3.12.7|/|规范化算法：
|基于加速度导数为正弦函数的轨迹规划算法算法产品规范|FREQ3.12.8|/|规范化算法：
",0,1,0,0,0,0,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：动量轮启动的程控指令
      实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：， ，
",0,1,0,0,0,0,0,0
"功能描述：接收总线指令
处理： 将接收总线指令存储地址中内容解包成总线指令的数据格式，根据不同的总线指令进行相应的处理。",0,0,0,0,0,0,1,0
"功能描述：根据GPS接收到的数据计算轨道平根数和GPS数据有效性。
处理：
STEP1：若ZT41[4]=0，则使用通道板数据计算GPS数据对应得星时及在惯性系中的位置速度，瞬根数；否则瞬根数用轨道板数据；
STEP2：计算平根数；
STEP3：GPS数据有效性判断。其中误差增加模PI限幅。",0,1,0,0,0,0,0,0
"软件需求名称：1553通信上行/下行数据的组帧和处理。 
软件需求描述：1553通信上行/下行数据的组帧和处理。
调用条件：每个控制任务模式计算完成后；
输入：计算结果。
输出：按照协议组帧数据。
处理：主要完成下列数据组帧、解包功能：遥测组帧、遥控接收、遥测帧头打包、遥测数据打包、下行：重要数据组帧、上行：数据指令处理、任务成像指令、上行：模式转换指令处理、上行：软件标志字指令处理、上行：控制参数指令处理、上行：变轨和位保指令处理、上行：部件加断电指令处理、上行：校时指令处理、上行：轨道注入指令处理、上行：部件数据转发指令处理、在轨维护指令处理、内存下传指令、重要数据保存、重要数据恢复",0,0,0,0,0,0,0,1
功能描述：使用GPS轨道版数据进行GPS定轨。,0,1,0,0,0,0,0,0
功能描述：AOCC收到CTU发来的“记录AOCC时间数据”消息后应在900ms内准备好AOCC 时间数据。CTU发出“记录AOCC时间数据”1s后读取该数据。,0,0,0,0,0,0,0,1
"功能描述：计算三轴的轮控力矩。
处理：
STEP1:分别计算P,I,D项。，的限幅值可以通过内存修改；，的限幅值可以通过内存修改。计算公式见（1）；
STEP2:PID加补偿的控制律计算。若{BZ1≠8(侧摆机动)或（BZ1=8且ZT43(3)=1允许侧摆机动引入结构滤波器）}且ZT39(4)=1引入结构滤波器，则调用结构滤波器算法得到，。计算公式见（2）；
STEP3:若ZT8≤3姿控发动机可用，ZT2=2飞轮整星零动量控制模式，BZ1≠1（三轴稳定正常轨道运行姿态）或2（偏航机动并稳定运行）或8（侧摆机动）或9（侧摆角保持），则：
若或，则=0.01；
若或，则=0.01；
若或，则=0.01。",0,1,0,0,0,0,0,0
"功能描述：计算CMG的框架角速度,。",0,1,0,0,0,0,0,0
"功能描述：进行单轴相平面分区及控制规律计算。
",0,1,0,0,0,0,0,0
功能描述： GPS定轨主程序，包括GPS数据有效、无效时的操作。,0,1,0,0,0,0,0,0
"    各个模式切换的功能点列表如下：
模式字|功能|功能编号
0|主动段模式切换|FREQ5.1
1|入轨段消初偏模式切换|FREQ5.2
2|正飞模式切换|FREQ5.3
3|大角度机动模式切换|FREQ5.4
4|正常运行模式切换|FREQ5.5
5|轨控模式切换|FREQ5.6
6|SAR未展开模式切换|FREQ5.7
7|帆板未展开模式切换|FREQ5.8
8|偏置动量控制模式切换|FREQ5.9
9|全姿态捕获模式切换|FREQ5.10
A|应急安全模式切换|FREQ5.11
B|停控模式切换|FREQ5.12

工作模式的转换如下表所示： 
模式字|到1|到2|到3|到4|到5|到6|到7|到8|到9|到10|到11
从0|ZC0-1||||||||ZC0-9||
从1||ZC1-2|||||||ZC1-9|ZC1-10|
从2|||ZC2-3|ZC2-4||ZC2-6|ZC2-7|ZC2-8|ZC2-9|ZC2-10|ZC2-11
从3||||ZC3-4|||||ZC3-9|ZC3-10|ZC3-11
从4||ZC4-2|ZC4-3||ZC4-5|ZC4-6|ZC4-7|ZC4-8|ZC4-9|ZC4-10|ZC4-11
从5||||ZC5-4|||||ZC5-9|ZC5-10|ZC5-11
从6||ZC6-2||ZC6-4|||||ZC6-9|ZC6-10|ZC6-11
从7||ZC7-2|||||||ZC7-9|ZC7-10|ZC7-11
从8||ZC8-2||ZC8-4|||||ZC8-9|ZC8-10|ZC8-11
从9||ZC9-2||ZC9-4||||||ZC9-10|ZC9-11
从10|||||||||ZC10-9||
从|||||||||ZC11-9|ZC11-10|

条件标识原则：ZCX—Y，其中ZC表示转换条件，X为转出的模式字，Y为转入的模式字。具体见用户需求3.3。AOCC切机或复位后通过OBDH恢复重要数据来恢复模式，具体见重要数据文件要求。",0,1,0,0,0,0,0,0
"功能描述：滚动/俯仰姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉角，以及轨迹的加速、匀速和减速等特征时间点。
",0,1,0,0,0,0,0,0
"软件需求名称：遥测 
需求类别：其他 
软件需求描述：遥测打包。",0,0,0,0,0,0,0,1
"功能描述：在完成对日定向后，由地面指令转入地球捕获。通过红外和数字太阳敏感器定姿，消除卫星的偏航角。
输入：陀螺数据处理的输出 ，
数字太阳敏感器数据有效性标志F_Ds1Valid，F_Ds2Valid（由数据有效性判据给出），数字太阳敏感器输出： （量纲：弧度）
红外地球敏感器数据有效性标志F_IresValid（由数据有效性判据给出）
上周期姿态角估值，
太阳星历的输出，
",0,1,0,0,0,0,0,0
"功能描述：由数字太阳粗细码得到数字太阳角、全开码、见太阳标志。
处理：
每个数字太阳敏感器包括7道粗码（C1～C7）、4道细码（F1～F4）、2道监视码（M1、M2）和1道全开码（T），数字太阳敏感器的第8道粗码(C8)与第1道细码(F1)合为一道码。所有14道码均由电路处理为电压信号，量纲为伏。
在数字太阳敏感器中，8道粗码以格雷码形式编码，探头输出的信号为原始的光电流信号，进行I/V变换放大后为模拟电压信号，再经A/D转换为数字量信号。粗码与格雷码的对应关系见表5-4所示：
表5-4 粗码与格雷码对应关系
粗  码|C1|C2|C3|C4|C5|C6|C7|C8(F1)
格雷码|G7|G6|G5|G4|G3|G2|G1|G0

首先，对粗码进行二值化处理，以全开码输出的一半作为阈值，当高于阈值时，对应的格雷码输出为“1”，否则为“0”。
其次，对数字太阳粗码角度部分从格雷码向二进制码进行转换。格雷码向二进制码转换时，最高位不变，其后的几位按下列规律转换：
二进制码第i位(i=0～6)： ，式中是异或功能逻辑符。
再次，细码角度（几何角）部分可由下列公式得到：
      F1=A/2 [1-cos（180×α）]	（1）
      F2=A/2 [1-（180×α）]	（2）
      F3=A/2 [1+cos（180×α）]	（3）
      F4=A/2 [1+（180×α）] 	（4）
式中是细码角度（几何角）， 量纲为度，细码角度范围为0～2º，最小码当量为0.78125º；F1～F4的量纲为伏；A表示信号幅值。
	在0～0.5º范围内时，由式（1）～（4）可以得到：
               α=a()      
，通过粗细码同步处理进行补偿。粗细码同步处理原则如下：
当细码最高两位都为0，且粗码最低两位都为1时，将粗码加1。
当细码最高两位都为1，且粗码最低两位都为0时，将粗码减1。
其余情况不作任何处理。
粗细码角度同步处理完毕之后，所得到的角度为偏移二进制码，偏移量为64度，然后将偏移二进制码转换成原码形式。
每个数字太阳敏感器数据处理后的为：2字节原码，D15：“0”表示见太阳，“1”表示未见太阳；D14：“0”表示负角度，“1”表示正角度；D13~D1为有效数据；D0：恒为0。
数字太阳敏感器视场有效性判断：以0.28太阳常数（34H，对应电压值为1.02V）作为监视码的固定门槛值，用采集到的监视码M1和M2分别与其比较，仅当监视码M1和M2的值均高于固定门槛值时，数字太阳敏感器视场为视场内，否则为视场外。",0,0,0,0,0,1,0,0
功能描述：若本周期角动量与上一周期角动量之差（绝对值）大于0.15Nms，则用上一周期角动量作为本周期输入，角动量变化取0。若连续大于三次或本周期与上一周期角动量之差（绝对值）小于0.15Nms，则以本周期角动量为真值，角动量变化,0,1,0,0,0,0,0,0
"功能描述：选择通讯的星敏LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。                                                                                                                                                                                                                                                                                                                                               处理：
（1）星敏共有三个LTU，AOCC每个控制周期向注入文件中的ZT6和inAPSLTUSeltFlag的最大组合中的星敏LTU发送取数指令。
（2）向选择的星敏LTU发送完取数指令后，获得星敏LTU返回的数据，将数据转换为所需的数据格式，具体参见星敏通讯协议
（3）星敏LTU数据采集过程中的故障处理见任务书中规定。",0,0,0,0,0,1,0,0
"功能描述：选择通讯的红外LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）红外共有两个LTU（正俯仰红外LTU和负俯仰红外LTU），AOCC每个控制周期向注入文件中的ZT5和IresLTUSeltFlag的最大组合中指定的红外LTU发送取数指令
（2）向选择的红外LTU发送完取数指令，获得红外LTU返回的数据，将数据转换为所需的数据格式。",0,0,0,0,0,1,0,0
"功能描述：转换动量轮脉冲得到轮子角动量。
处理：
控制系统配置4Nms平台动量轮4个（X、Y、Z、S）。平台动量轮每转18个脉冲，转/分钟对应4Nms。",0,0,0,0,0,1,0,0
功能描述：接收遥控固定参数注入块的星敏间基准修正与有效性判断修正系数,0,0,0,0,0,0,1,0
"功能描述：二次电源切换。
处理：
ACU内部含有两套二次电源，两套互为备份，可以同时加电工作，通常仅一份工作。AOCC每个控制周期采集工作电源的状态模拟量，并设置当班状态（若某份的5V和12V遥测模拟量均≥2V则当班，若主备二次电源同时符合加电条件则置主份当班）。
若当班电源的5V或12V遥测模拟量连续5个控制周期<2V时，且允许ACU二次电源自主切换，则先发送另一份电源开、隔两个控制周期后再发送本电源关指令，并禁止ACU二次电源自主切换。。
上电/复位初始化为允许自主切换，主份当班。",0,0,1,0,0,0,0,0
"功能描述：与发动机通信，输出本周期喷气脉宽。
处理：
功能编号|功能|引用文档
FREQ94|初始化|任务书
FREQ95|推力器使用要求(自锁阀和发动机组的选择)|任务书
FREQ96|通信(脉冲输出)|任务书
FREQ097|通信故障处理|预留
FREQ098|数据解包与转换|预留
FREQ099|推力器数据有效性处理|预留
FREQ100|推力器模拟量采集、处理|任务书
FREQ101|部件在轨转发（在轨修改）|预留
",0,0,1,0,0,0,0,0
"功能描述：选择三轴控制力
处理：根据推力器分支设置控制力。
说明：3种分支共计3组控制力（每组包括正负X轴，Y轴，Z轴共4个）",0,1,0,0,0,0,0,0
"功能描述：计算磁卸载所需的磁矩与磁力矩器工作电压。
",0,1,0,0,0,0,0,0
"功能描述：三轴稳定模式下，检测系统故障。
处理：
（1）基本处理
将系统故障打分FSY限幅到[7，]。
（2）FSY加减分
条件|FSY的处理
（红外输出有效），ZT3≠C(用星敏感器+陀螺定姿，且接入控制回路)，ZT3≠A(星敏无陀螺定姿，且接入控制回路，整星零动量控制方式)，|FSY加一分
（红外输出有效），ZT3≠C(用星敏感器+陀螺定姿，且接入控制回路)，ZT3≠A(星敏无陀螺定姿，且接入控制回路，整星零动量控制方式),{或}|FSY减一分
（红外输出有效），ZT3=C(用星敏感器+陀螺定姿，且接入控制回路)或ZT3=A(星敏无陀螺定姿，且接入控制回路，整星零动量控制方式)，|FSY加一分
（红外输出有效），ZT3=C(用星敏感器+陀螺定姿，且接入控制回路)或ZT3=A(星敏无陀螺定姿，且接入控制回路，整星零动量控制方式),{，}|FSY减一分
或或，FGF=1|FSY减一分
或或，FGF≠1|FSY减4分
，FSTD>1，且{（且）或ZT5=0}|FSY加4分

处理FSY,ZT3,AttTurnFlag和
条件|FSY的处理
C，A，BZ5连续239次为0|FSY=1
，FSTD连续954次为1,ZT5=0|FSY=1
，FSTD连续954次为1,|""FSY=
ZT3=3,；AttTurnFlag=1""
A，FSTD连续250次为1|FSY=1
，FSTD≠1|AttTurnFlag=0
FSY≤64H,ZT3=C,ZT5≠0|""FSY=
ZT3=3,；AttTurnFlag=1""
，AttTurnFlag=1，ZT41[2]=1允许自主由红外转回星敏定姿时，若连续120次(且，且)|，AttTurnFlag=0

(4) 若ZT226，FSY07，ZT8 =F，ZT9 =F，则ZT8=0,ZT9=0,BZ7=Jeti2。
（5）根据FSY的结果和ZT22、ZT8、ZT9对BZ1进行处理
条件|BZ1的处理
ZT226，FSY07且ZT8  3，ZT9  3|BZ1 = 3
ZT226，FSY07且ZT8  4或ZT9  4|BZ1 = 7

（6）根据FSY的结果和ZT22、ZT8、ZT9以及BZ7重置BZ7
条件|BZ7的处理
ZT226，FSY07且ZT8 = 0（可自主切换主备份姿控发动机），BZ7=1（可用姿轨控主份推力器）|BZ7 = 2
ZT226，FSY07且ZT8 = 0，BZ7=3（可用姿轨控主份及备份推力器）|BZ7 = 2
ZT226，FSY07且ZT8 = 0，BZ7=2（可用姿轨控备份推力器）|BZ7 = 1

（7）若ZT226，FSY07，ZT43[4]=1允许自主给陀螺加电，则陀螺自主加电。
（8）若ZT226，FSY07，ZT44[4]=0，FlagWHCtl=A或ZT3=B，则FlagWHCtl=5;ZT3=3;ZT8=0;BZ7=Jeti;陀螺漂移赋值；Ix,Iy,Iz,Ihx,Ihz清0。
（9）指定FlagAttTurnIres=0后，系统不使用红外进行姿态监视，仅根据有效红外进行姿态修正。",0,0,0,1,0,0,0,0
功能描述：根据星敏感器故障标志、星敏感器有效数据判断标志（由星敏感器数据包给出，（包括状态字b27、同步脉冲计数值、数据产生相对时间、姿态四元数信息等）），判断星敏感器数据有效性。,0,1,0,0,0,0,0,0
"功能描述：根据姿轨控喷气规律计算结果，发出相应的喷气指令。
处理：同用户需求的。",0,1,0,0,0,0,0,0
功能描述：轨控姿态机动模式初始化,0,1,0,0,0,0,0,0
OBDH重要数据有两块，大小共为128字节，AOCC不做任何改动保存在RAM中。如果AOCC发生复位，应利用方式代码请求服务，索取OBDH重要数据进行保存。若在大于0.256s的时间内仍未收到接收OBDH重要数据的指令，则重新请求服务，同时索要OBDH重要数据的计数器累加，若此计数器大于等于40，则不再索要OBDH重要数据。若索要OBDH重要数据成功，将此计数器清零。,0,0,0,0,0,0,0,1
"功能描述：接收星箭分离信号及天线状态数据
处理：控制计算机在收到星箭分离指令并且判断数据正确后，即认为星箭分离有效，通过方式代码的服务请求，申请OBDH停止发送星箭分离信号。天线状态的数据具体见与外总线通讯协议。",0,0,0,0,0,0,1,0
"功能描述：CAN通信上行/下行数据的组帧和解包。
调用条件：每个控制任务模式计算完成后；
输入：计算结果。
输出：按照协议组帧数据。
处理：主要完成下列数据组帧、解包功能：星务接收、星务发送、快帧遥测1打包、快帧遥测2打包、快帧遥测3打包、快帧遥测4打包、快帧遥测5打包、姿态广播、星敏广播、陀螺广播、重要数据打包、上行:数据指令响应处理、上行:固定地址注入解包、上行:可变地址注入解包、上行:轨道注入解包、上行:程序注入、上行:内存下卸指令注入、上行:任务块、上行:地面站、重要数据返回解包、GPS定位广播解包、整星广播对时解包、GPS高精度秒脉冲对时广播解包、CAN总线使用要求",0,0,0,1,0,0,0,0
"功能描述：根据给定电压乘电压/力矩系数和角动量变化率之差判断轮子的故障。
",0,1,0,0,0,0,0,0
"功能描述：接收时间码
处理： 记录收到时间码时对应的GPT的计数值和时间码值，并设置相应的标志。",0,0,0,1,0,0,0,0
功能描述：根据红外、太阳、星敏感器的输出数据判断陀螺故障。,0,1,0,0,0,0,0,0
"功能描述：发送和接收时间差值
调用条件：有发送和接收时间差值命令字时
周期：CTU复位时
输入：星时，计数值
输出：时间差值
处理：具体处理要求见与外总线通讯协议。",0,0,0,0,0,0,0,1
功能：利用星敏感器A的测量，修正姿态四元数与估计陀螺漂移。,0,1,0,0,0,0,0,0
功能描述：根据指令完成数传天线的指向控制。,0,1,0,0,0,0,0,0
功能描述：对帆板驱动装置进行控制和诊断。,0,1,0,0,0,0,0,0
功能描述：根据CMG角动量及地磁场强度决定并输出磁棒控制电压。,0,1,0,0,0,0,0,0
功能描述：根据指令完成中继天线的捕获跟踪控制。,0,1,0,0,0,0,0,0
"功能描述：选择通讯的星敏LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
输入：ZT6、inAPSLTUSeltFlag、星敏LTU返回的数据。
输出：星敏输出的四元数、相对时间和数据有效性标志。
处理：
（1）星敏共有两个LTU，AOCC每个控制周期向注入文件中的ZT6和inAPSLTUSeltFlag的最大组合中的星敏LTU发送取数指令。
（2）向选择的星敏LTU发送完取数指令后，获得星敏LTU返回的数据，将数据转换为所需的数据格式。",0,0,0,0,0,1,0,0
功能描述：利用星敏感器A、B的测量，估计姿态。,0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|陀螺数据处理|FREQ3.1|5.2.1|把陀螺数据、、、变换到星体系中的、、
|陀螺预估惯性姿态|FREQ3.2|5.2.2|根据陀螺输入，预估卫星惯性姿态
|陀螺预估对地姿态|FREQ3.3|5.2.3|根据陀螺测量输出，一步预估卫星姿态
|陀螺预估惯性四元数|FREQ3.4|5.2.4|根据陀螺测量输出，一步预估卫星惯性姿态
|动力学预估惯性四元数|FREQ3.5|5.2.5|根据动力学模型，预估卫星惯性姿态
|基于红外滤波的卫星姿态确定|FREQ3.6|5.2.6|根据陀螺预估结果和红外(和数字太阳)输出，确定卫星姿态
|星敏感器与陀螺姿态修正|FREQ3.7|5.2.7|利用星敏感器和陀螺的输出或仅利用陀螺预估输出计算卫星欧拉角和四元数
|单星敏感器的姿态修正|FREQ3.7.1|5.2.7.1|利用单个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|双星敏感器的姿态修正|FREQ3.7.2|5.2.7.2|利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|对地姿态修正|FREQ3.7.3|5.2.7.3|利用估计的四元数转换姿态角
|星敏感器与动力学姿态修正|FREQ3.8|5.2.8|利用星敏感器的输出计算卫星欧拉角和四元数
|仅单星敏感器的姿态修正|FREQ3.8.1|5.2.8.1|仅利用单个星敏感器的测量，修正姿态四元数与姿态角速度
|仅双星敏感器的姿态修正|FREQ3.8.2|5.2.8.2|仅利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|无陀螺对地姿态修正|FREQ3.8.3|5.2.8.3|利用估计的四元数转换姿态角，送给星敏感器的四元数
|红外与太阳双矢量定姿|FREQ3.9|5.2.9|利用红外、数字太阳敏感器确定姿态
|星敏感器相对基准标定|FREQ3.10|5.2.10|对星敏的相对基准进行标定，修正星敏安装矩阵
|星敏感器双矢量姿态确定|FREQ3.11.1|5.2.11.1|利用星敏的测量，确定单点的卫星姿态四元数。
|星敏姿态四元数重置|FREQ3.11.2|5.2.11.2|进行卫星姿态四元数的重置
|三轴欧拉姿态角预估算法产品规范|FREQ3.1.1|/|规范化算法：
|姿态四元数预估算法产品规范|FREQ3.1.2|/|规范化算法：
|重力梯度力矩计算算法算法产品规范|FREQ3.1.3|/|规范化算法：
|基于红外测量的红外滤波修正算法产品规范|FREQ3.1.4|/|规范化算法：
|基于单星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.5|/|规范化算法：
|基于双星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.6|/|规范化算法：
|基于红外与太阳矢量的双矢量定姿算法算法产品规范|FREQ3.1.7|/|规范化算法：
|星敏感器相对基准的在轨标定算法产品规范|FREQ3.1.8|/|规范化算法：
|目标姿态计算流程|FREQ3.12|5.3.1|目标姿态计算流程
|正常、偏置飞行目标姿态计算|FREQ3.12.1|5.3.1.1|正常与偏置姿态飞行时的目标姿态计算
|点对点机动目标姿态计算|FREQ3.12.2|5.3.1.2|点对点机动目标姿态计算
|姿态预置过程目标姿态计算|FREQ3.12.3|5.3.1.3|姿态预置过程目标姿态计算
|轨迹跟踪目标姿态计算|FREQ3.12.4|5.3.1.5|角速度建立过程目标姿态计算
|轨控目标姿态计算|FREQ3.12.5|5.3.1.6|轨控目标姿态计算
|角速度扫描阶段目标姿态计算|FREQ3.12.6.1|5.3.1.4|角速度扫描阶段目标姿态计算
|轨控姿态机动轨迹初始化|FREQ3.12.6.2|5.3.2.3|轨控模式目标姿态计算初始化
|正弦轨迹规划算法算法产品规范|FREQ3.12.7|/|规范化算法：
|基于加速度导数为正弦函数的轨迹规划算法算法产品规范|FREQ3.12.8|/|规范化算法：
|点对点姿态机动初始化处理|FREQ3.13|5.3.2.1|三轴姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉轴/角，以及轨迹的加速，匀速和减速等特征时间点。
|非沿迹跟踪初始化|FREQ3.14|5.3.2.2|非沿迹跟踪初始化，计算地心张角和方向矢量
|计算多项式轨迹系数|FREQ3.15|5.3.3.1|根据轨迹规划时间，初始姿态/姿态角速度和目标姿态/姿态角速度计算基于多项式轨迹规划的轨迹系数
|姿态预置机动目标姿态确定|FREQ3.16|5.3.3.2|基于多项式曲线的轨迹规划，计算目标姿态
|轨迹跟踪目标姿态角计算|FREQ3.17|5.3.4|根据所指定的扫描起始经纬度和末端点经纬度
|偏流角计算|FREQ3.18|5.3.5|适用于地球椭球模型，星体姿态描述为转序，计算基于星体光轴(与星本体＋Z轴平行)下的偏流角
|姿态控制量计算|FREQ3.19|5.2.12|根据姿态确定结果和目标姿态计算结果计算误差姿态角和误差姿态角速度
|引入系统闭环姿态确定|FREQ3.20|5.2.13|根据定姿标志确定引入系统的闭环姿态
|增量式偏流角计算算法产品规范|FREQ3.21|/|规范化算法：
|匀地速姿态预置目标姿态计算|FREQ3.22|5.12|计算模式2/5经模式4转入模式6时姿态预置的目标姿态及角速度
|匀角速度预置目标姿态计算|FREQ3.23|5.13|计算模式2/5经模式4转入模式7时姿态预置的目标姿态及角速度
|零姿态预置目标姿态计算|FREQ3.24|5.14|计算模式6/7经模式4转入模式2时姿态预置的目标姿态及角速度
|陀螺标定过程目标姿态计算|FREQ3.25.0|5.15.1|陀螺标定全过程的目标姿态计算，包括目标惯性角速度和目标四元数，并在回轨道对地零姿态过程中计算目标欧拉角
|目标姿态计算初始化|FREQ3.25.1|5.15.1.1|对陀螺标定过程中涉及到的两次机动过程进行机动姿态计算的初始化
|惯性姿态点对点机动轨迹规划|FREQ3.25.2|5.15.1.2|对陀螺标定过程所涉及到的两次点对点机动进行轨迹规划
|角速度起速保持与减速过程轨迹规划|FREQ3.25.3|5.15.1.3|对陀螺标定过程中的速度运行进行轨迹规划
|大角速度标定的分档确定|FREQ3.25.4|5.15.1.4|根据实现指向的4挡速度，根据当前的速度的幅值，确定所标定的陀螺刻度因子的位置
|惯性定向时转阶段处理|FREQ3.25.5|5.15.1.5|陀螺标定在第1段中完成惯性定向，并在此期间标定陀螺真实常漂。在惯性定向转速度运行结束时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等。
|速度运行时转阶段处理|FREQ3.25.6|5.15.1.6|SubMode= 2~9，陀螺按照规定的角速度完成起速、恒速运行、减速和惯性定向四个步骤后，在转入下一个阶段时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等
|速度曲线规划|FREQ3.25.7|5.15.1.7|根据所选择的机动轨迹，规划出角速度变化曲线
|陀螺标定算法|FREQ3.26.0|5.15.2|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺常漂修正标志确定|FREQ3.26.1|5.15.2.1|对陀螺标定过程中，陀螺常漂的修正标志进行确定。当星体达到了规定的惯性角速度时，开始进行陀螺常漂估计
|基于星敏陀螺滤波的等效常漂估计|FREQ3.26.2|5.15.2.2|采用星敏陀螺滤波的方法对陀螺等效常漂进行估计
|星敏陀螺滤波的陀螺等效常漂记录|FREQ3.26.3|5.15.2.3|对陀螺等效常漂，选取稳态时的一段数据进行平均，得到各个角速度下的等效常漂和星体真实角速度的估计值
|小角速度时的陀螺安装误差和刻度因子误差估计|FREQ3.26.4|5.15.2.4|经过N次速度机动后，对陀螺的测量模型进行标定，给出标定结果
|大角速度时的陀螺标定算法|FREQ3.26.5|5.15.2.5|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺在轨标定时的控制量计算|FREQ3.27|5.15.3|对标定过程中的控制量进行计算
|陀螺安装误差标校结果引入|FREQ3.28|5.15.4|对陀螺完成标定后，待地面确认标定结果无误后，将陀螺的标定结果进行赋值。当地面注入FP__MountingCmp时执行本程序一次
|陀螺刻度因子误差标校结果引入|FREQ3.29|5.15.5|完成陀螺标定，待地面确认无误后，对陀螺的刻度因子进行在轨标校。标校时，取陀螺输出的角速度与与之最接近的两个已标定的特征角速度进行线性插值标校
|偏航对日目标姿态计算|FREQ3.30|5.3.1.7|偏航对日模式下的目标姿态机动
",0,1,0,0,0,0,0,0
功能描述：利用GPS通道板数据进行GPS定轨程序。,0,0,0,0,1,0,0,0
"功能描述：将动量轮保持至标称角动量所需的电压。
",0,1,0,0,0,0,0,0
功能描述：由数字太阳粗细码得到数字太阳角、全开码、见太阳标志。,0,0,0,0,0,1,0,0
"序|需求名称|编号|输入章节号|功能描述
|陀螺数据处理|FREQ3.1|""5.2.1
""|把陀螺数据、、、变换到星体系中的、、
|陀螺预估惯性姿态|FREQ3.2|5.2.2|根据陀螺输入，预估卫星惯性姿态
|陀螺预估对地姿态|FREQ3.3|5.2.3|根据陀螺测量输出，一步预估卫星姿态
|陀螺预估惯性四元数|FREQ3.4|5.2.4|根据陀螺测量输出，一步预估卫星惯性姿态
|动力学预估惯性四元数|FREQ3.5|5.2.5|根据动力学模型，预估卫星惯性姿态
|基于红外滤波的卫星姿态确定|FREQ3.6|5.2.6|根据陀螺预估结果和红外(和数字太阳)输出，确定卫星姿态
|星敏感器与陀螺姿态修正|FREQ3.7|5.2.7|利用星敏感器和陀螺的输出或仅利用陀螺预估输出计算卫星欧拉角和四元数
|单星敏感器的姿态修正|FREQ3.7.1|5.2.7.1|利用单个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|双星敏感器的姿态修正|FREQ3.7.2|5.2.7.2|利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|对地姿态修正|FREQ3.7.3|5.2.7.3|利用估计的四元数转换姿态角
|星敏感器与动力学姿态修正|FREQ3.8|5.2.8|利用星敏感器的输出计算卫星欧拉角和四元数
|仅单星敏感器的姿态修正|FREQ3.8.1|5.2.8.1|仅利用单个星敏感器的测量，修正姿态四元数与姿态角速度
|仅双星敏感器的姿态修正|FREQ3.8.2|5.2.8.2|仅利用两个星敏感器的测量，修正姿态四元数与估计陀螺漂移
|无陀螺对地姿态修正|FREQ3.8.3|5.2.8.3|利用估计的四元数转换姿态角，送给星敏感器的四元数
|红外与太阳双矢量定姿|FREQ3.9|5.2.9|利用红外、数字太阳敏感器确定姿态
|星敏感器相对基准标定|FREQ3.10|5.2.10|对星敏的相对基准进行标定，修正星敏安装矩阵
|星敏感器双矢量姿态确定|FREQ3.11.1|5.2.11.1|利用星敏的测量，确定单点的卫星姿态四元数。
|星敏姿态四元数重置|FREQ3.11.2|5.2.11.2|进行卫星姿态四元数的重置
|三轴欧拉姿态角预估算法产品规范|FREQ3.1.1|/|规范化算法：
|姿态四元数预估算法产品规范|FREQ3.1.2|/|规范化算法：
|重力梯度力矩计算算法算法产品规范|FREQ3.1.3|/|规范化算法：
|基于红外测量的红外滤波修正算法产品规范|FREQ3.1.4|/|规范化算法：
|基于单星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.5|/|规范化算法：
|基于双星敏感器测量矢量叉乘信息的滤波修正算法算法产品规范|FREQ3.1.6|/|规范化算法：
|基于红外与太阳矢量的双矢量定姿算法算法产品规范|FREQ3.1.7|/|规范化算法：
|星敏感器相对基准的在轨标定算法产品规范|FREQ3.1.8|/|规范化算法：
|目标姿态计算流程|FREQ3.12|5.3.2|
|正常、偏置飞行目标姿态计算|FREQ3.12.1|5.3.2.1|正常与偏置姿态飞行时的目标姿态计算
|点对点机动目标姿态计算|FREQ3.12.2|5.3.2.2|点对点机动目标姿态计算
|姿态预置过程目标姿态计算|FREQ3.12.3|5.3.2.3|姿态预置过程目标姿态计算
|非沿迹目标姿态计算|FREQ3.12.4|5.3.2.4|角速度建立过程目标姿态计算
|轨控目标姿态计算|FREQ3.12.5|5.3.2.5|轨控目标姿态计算
|轨控姿态机动轨迹初始化|FREQ3.12.6|5.3.1.4|轨控模式目标姿态计算初始化
|正弦轨迹规划算法算法产品规范|FREQ3.12.7|/|规范化算法：
|基于加速度导数为正弦函数的轨迹规划算法算法产品规范|FREQ3.12.8|/|规范化算法：
|点对点姿态机动初始化处理|FREQ3.13|5.3.1.1|三轴姿态机动目标姿态确定的初始化。根据目标角和星体机动前姿态求出欧拉轴/角，以及轨迹的加速，匀速和减速等特征时间点。
|非沿迹跟踪初始化|FREQ3.14|5.3.1.2|非沿迹跟踪初始化，计算地心张角和方向矢量
|计算多项式轨迹系数|FREQ3.15|5.3.3.1|根据轨迹规划时间，初始姿态/姿态角速度和目标姿态/姿态角速度计算基于多项式轨迹规划的轨迹系数
|姿态预置机动目标姿态确定|FREQ3.16|5.3.3.2|基于多项式曲线的轨迹规划，计算目标姿态
|非沿迹目标姿态角计算|FREQ3.17|5.3.4|根据所指定的扫描起始经纬度和末端点经纬度
|偏流角计算|FREQ3.18|5.3.5|适用于地球椭球模型，星体姿态描述为转序，计算基于星体光轴(与星本体＋Z轴平行)下的偏流角
|姿态控制量计算|FREQ3.19|5.2.12|根据姿态确定结果和目标姿态计算结果计算误差姿态角和误差姿态角速度
|引入系统闭环姿态确定|FREQ3.20|5.2.13|根据定姿标志确定引入系统的闭环姿态
|增量式偏流角计算算法产品规范|FREQ3.21|/|规范化算法：
|凝视过程目标姿态计算|FREQ3.22|5.3.2.6|凝视过程中计算三轴目标姿态
|陀螺标定过程目标姿态计算|FREQ3.25.0|5.15.1|陀螺标定全过程的目标姿态计算，包括目标惯性角速度和目标四元数，并在回轨道对地零姿态过程中计算目标欧拉角
|目标姿态计算初始化|FREQ3.25.1|5.15.1.1|对陀螺标定过程中涉及到的两次机动过程进行机动姿态计算的初始化
|惯性姿态点对点机动轨迹规划|FREQ3.25.2|5.12.1.2|对陀螺标定过程所涉及到的两次点对点机动进行轨迹规划
|角速度起速保持与减速过程轨迹规划|FREQ3.25.3|5.12.1.3|对陀螺标定过程中的速度运行进行轨迹规划
|大角速度标定的分档确定|FREQ3.25.4|5.12.1.4|根据实现指向的4挡速度，根据当前的速度的幅值，确定所标定的陀螺刻度因子的位置
|惯性定向时转阶段处理|FREQ3.25.5|5.12.1.5|陀螺标定在第1段中完成惯性定向，并在此期间标定陀螺真实常漂。在惯性定向转速度运行结束时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等。
|速度运行时转阶段处理|FREQ3.25.6|5.12.1.6|SubMode= 2~9，陀螺按照规定的角速度完成起速、恒速运行、减速和惯性定向四个步骤后，在转入下一个阶段时，对各变量进行初始化，并记录陀螺的等效常漂，星体的惯性角速度估计等
|速度曲线规划|FREQ3.25.7|5.12.1.7|根据所选择的机动轨迹，规划出角速度变化曲线
|陀螺标定算法|FREQ3.26.0|5.12.2|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺常漂修正标志确定|FREQ3.26.1|5.12.2.1|对陀螺标定过程中，陀螺常漂的修正标志进行确定。当星体达到了规定的惯性角速度时，开始进行陀螺常漂估计
|基于星敏陀螺滤波的等效常漂估计|FREQ3.26.2|5.12.2.2|采用星敏陀螺滤波的方法对陀螺等效常漂进行估计
|星敏陀螺滤波的陀螺等效常漂记录|FREQ3.26.3|5.12.2.3|对陀螺等效常漂，选取稳态时的一段数据进行平均，得到各个角速度下的等效常漂和星体真实角速度的估计值
|小角速度时的陀螺安装误差和刻度因子误差估计|FREQ3.26.4|5.12.2.4|经过N次速度机动后，对陀螺的测量模型进行标定，给出标定结果
|大角速度时的陀螺标定算法|FREQ3.26.5|5.12.2.5|在标定过程中，对各个阶段的陀螺等效常漂进行估计
|陀螺在轨标定时的控制量计算|FREQ3.27|5.12.3|对标定过程中的控制量进行计算
|陀螺安装误差标校结果引入|FREQ3.28|5.12.4|对陀螺完成标定后，待地面确认标定结果无误后，将陀螺的标定结果进行赋值。当地面注入FP__MountingCmp时执行本程序一次
|陀螺刻度因子误差标校结果引入|FREQ3.29|5.12.5|完成陀螺标定，待地面确认无误后，对陀螺的刻度因子进行在轨标校。标校时，取陀螺输出的角速度与与之最接近的两个已标定的特征角速度进行线性插值标校
|惯性定向期间目标姿态计算|FREQ3.30|5.3.2.7|""惯性调姿过程中的姿态机动目标姿态计算，当航天器从轨道系姿态进入时，首先进入submode0，进行轨道角速度的削除，之后进行惯性调姿。在转出时，若后续姿态为轨道系姿态，需要建立轨道角速度
""
|轨道角速度建立目标姿态计算|FREQ3.31|5.3.6|""在惯性定向与轨道系姿态保持之间切换时，进行轨道角速度的建立或削除 
""
",0,0,0,1,0,0,0,0
功能描述：仅使用红外定姿时，计算正常飞行轮控所需电压。,0,1,0,0,0,0,0,0
"功能描述：选择通讯的陀螺LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
处理：
（1）陀螺共有三个互为备份的LTU，通过每个LTU均可获得9个陀螺的数据；每个控制周期AOCC向陀螺LTU发送取数命令来获得数据，AOCC根据GROLTUSeltFlag来确定和哪个LTU进行通讯。
（2）向选择的陀螺LTU发送完取数指令，获得陀螺LTU返回的数据，将数据转换为控制计算所需的数据格式。",0,0,0,0,0,1,0,0
"功能描述：仅使用红外定姿时，计算正常飞行轮控所需电压。
",0,1,0,0,0,0,0,0
功能描述：对星敏感器输出数据进行有效性判断,0,1,0,0,0,0,0,0
"需求名称|功能描述
部件数据有效性判断|对部件采样数据的有效性进行判断，并选择引入闭环控制系统的数据
陀螺数据有效性判断|判断定姿用陀螺数据的有效性，选择参与定姿的陀螺
模拟太阳敏感器数据有效性判断|确定ASS21，ASS22，ASS31，ASS32及帆板角度传感器，等的信号选取
红外地球敏感器数据有效性判断|判断红外地球敏感器有效性
星敏感器数据有效性判断|对星敏感器输出数据进行有效性判断，并选取定姿星敏组合
数字太阳敏感器数据有效性判断|对数字太阳敏感器输出数据进行有效性判断
部件故障诊断|对部件进行故障诊断
陀螺故障诊断|由平衡方程方法、星敏感器数据等对陀螺进行故障检测
CMG故障诊断|根据CMG输出数据和理论数据进行CMG故障检测
推进喷气异常检测|检测推力器微漏、过量喷气等，必要时作相应的主备份切换和禁止。
帆板故障诊断|帆板故障检测及处理
模式1的系统故障诊断|在模式1中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式2的系统故障诊断|在模式2中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式3的系统故障诊断|在模式3中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式4、6、7的系统故障诊断|在模式4、6、7中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式5的系统故障诊断|在模式5中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式8的系统故障诊断|在模式8中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
模式9的系统故障诊断|在模式9中，根据姿态角和姿态角速度偏差等数据进行系统故障的检测
RS422通讯故障诊断|进行RS422通讯故障诊断及处理
光纤陀螺通讯诊断及处理|进行光纤陀螺通讯故障诊断及处理
数字太阳通讯诊断及处理|进行数字太阳通讯故障诊断及处理
太阳模拟量通讯诊断及处理|进行太阳通讯故障诊断及处理
对地数传天线通讯诊断及处理|进行对地数传天线通讯故障诊断及处理
中继天线通讯诊断及处理|进行中继天线通讯故障诊断及处理
1553B内总线通讯故障诊断|进行1553B内总线通讯故障诊断及处理；BAPTAE进最小模式且不能自主切换后需要提“BAPTA故障”
红外通讯故障诊断|红外通讯故障诊断及处理
大量程陀螺通讯故障诊断|大量程通讯故障诊断及处理
CMG通讯故障诊断|CMG通讯故障诊断及处理
ACU通讯故障诊断|ACU通讯故障诊断及处理
帆板通讯故障诊断|帆板通讯故障诊断及处理
多头星敏通讯故障诊断|多头星敏通讯故障诊断及处理
1553B内总线总线监视及处理要求|CCU作为内1553B总线的BC，在与各RT通讯时需要进行总线状态监视
CMG在轨跑合|自主跑合功能包含CMG跑合的执行序列、必要的安全处置策略，以及数据统计功能。",0,1,0,0,0,0,0,0
"功能描述：与CAN通讯获得上行/下行数据。
调用条件：AOCC被动接收/发送数据；
输入：上行数据。
输出：下行数据。
处理：通过CAN总线与星务分系统通讯，交换数据，以实现星地联系和对卫星的人工干预。主要完成下列功能：
AOCC向星务分系统发送数据（中断接收星务分系统命令，依据命令发送各类遥测参数）；
发送快帧遥测；
发送慢帧遥测；
将AOCC为星务保存的重要数据发送给星务分系统；
发送星敏感器和姿态辅助数据；
有内存下卸要求时，发送AOCC指定内存内容；
AOCC接收星务分系统数据（中断方式）包括接收固定地址参数注入；接收可变地址参数注入；接收轨道参数数据；接收程序注入；接收数据指令；接收重要数据返回；接收整星对时广播数据；接收GPS高精度秒脉冲对时广播；接收GPS导航数据等。
如果应用软件4s收不到星务分系统信息或连续100秒未收到符合通信协议的正确数据，对CAN总线控制器重新初始化。",0,0,0,0,0,0,0,1
"功能描述：接收同步控制
处理：根据同步字的编码内容进行相应的处理：
编码|相应的处理
28H|发送内存的数据区指针复位
",0,0,0,0,0,0,1,0
"功能描述：利用星敏感器B、D的测量，修正姿态四元数与估计陀螺漂移。
",0,1,0,0,0,0,0,0
功能描述：接收遥控固定参数注入块的红外陀螺数据有效性及系统故障诊断修正系数,0,0,0,0,0,0,1,0
"功能描述：姿态机动过程目的姿态确定。
",0,1,0,0,0,0,0,0
"功能描述：利用星敏感器C、D的测量，修正姿态四元数与估计陀螺漂移。
",0,1,0,0,0,0,0,0
"功能描述：使用数字太阳敏感器修正姿态，估计陀螺漂移。
",0,1,0,0,0,0,0,0
"序|需求名称|编号|功能及处理描述
|-Y帆板数据的采集与处理|FREQ7.3|选择通讯的-Y帆板LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
|+Y帆板数据的采集与处理|FREQ7.4|选择通讯的+Y帆板LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
|-Y帆板控制指令的输出处理|FREQ7.5|选择通讯的帆板-Y LTU，发送的控制指令。
|+Y帆板控制指令的输出处理|FREQ7.6|选择通讯的+Y帆板LTU，发送的控制指令。
",0,0,0,0,0,1,0,0
功能描述：轨控模式时使用轨控发动机及其备份。,0,1,0,0,0,0,0,0
"功能描述：根据任务要求，应用软件1553B初始化、变量的初始化
处理：
进行1553B初始化，处理过程见的OBDH初始化功能
把模式字初始化为零
上电时，将在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff；复位时，若在轨维护程序区未发生双错，则应用软件从三取二区恢复在轨注入模块地址映射表JumpSlot、继续运行在轨维护程序；若在轨维护程序区发生双错，则应用软件不恢复在轨注入模块地址映射表JumpSlot，同时在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff，运行原PROM区的函数模块
为变量赋初值，因为上电或复位时，系统软件都先把变量区清零，应用软件只需将不为零的变量赋值即可。",1,0,0,0,0,0,0,0
功能描述：确定各部件的工作状态，并开关相关部件电源。,0,0,0,0,0,1,0,0
"功能描述：接收内存设置命令
处理：将内存设置命令存储地址中内容的解包成需下传的内存首地址和长度。此处理在中断中进行。",0,0,0,0,0,0,1,0
"软件需求名称：接收上行注入数据指令 
需求类别：其他 
软件需求描述：接收并处理上行注入数据指令。",0,0,0,0,0,0,1,0
"序|需求名称|编号|输入|输出|功能及处理描述
|星敏感器1数据的采集与处理|FREQ1.5.1|""星敏感器1
1553B取数指令
""|星敏感器1的四元素、角速度和状态信息|在通讯允许的条件下（星敏感器1的当班标志为1），每周期向星敏感器RT发取数指令，获得星敏感器1数据并处理成对应的四元素和角速度。
|星敏感器2数据的采集与处理|FREQ1.5.2|""星敏感器2
1553B取数指令""|星敏感器2的四元素、角速度状态信息|在通讯允许的条件下（星敏感器2的当班标志为1），每周期向星敏感器 RT发取数指令，获得星敏感器2数据并处理成对应的四元素和角速度。
|星敏感器3数据的采集与处理|FREQ1.5.3|""星敏感器3
1553B取数指令""|星敏感器3的四元素、角速度状态信息|在通讯允许的条件下（星敏感器3的当班标志为1），每周期向星敏感器 RT发取数指令，获得星敏感器3数据并处理成对应的四元素和角速度。
|星敏感器4数据的采集与处理|FREQ1.5.4|""星敏感器4
1553B取数指令""|星敏感器4的四元素、角速度状态信息|在通讯允许的条件下（星敏感器4的当班标志为1），每周期向星敏感器 RT发取数指令，获得星敏感器4数据并处理成对应的四元素和角速度。
",0,0,0,0,0,1,0,0
功能描述：计算卫星偏流角，适用于地球椭球模型，星体姿态描述为转序。,0,1,0,0,0,0,0,0
"功能描述：重要数据保存
处理：回送重要数据
说明：上电/复位35秒内 或 主动段 或 任务超时 或 与LTU通讯连续失败20次且自主切换禁止，不保存重要数据。",0,0,0,0,0,0,1,0
"功能描述：通过注入轨道参数，实时计算卫星轨道参数。
处理： 
由地面注入轨道参数或GPS数据计算的轨道参数（如果GPS引入且数据验证有效），结合当前星时，通过外推公式计算出卫星轨道数据。",0,1,0,0,0,0,0,0
功能描述：根据数字太阳见太阳标志和故障标志判断数字太阳数据的有效性。。,0,1,0,0,0,0,0,0
"功能描述：完成整星绕滚动轴的姿态侧摆角保持功能
处理过程：过程如下：
STEP1：当ZT F（不用红外+单个斜装陀螺定姿），进行姿态预估，得到姿态角和角速度。
条件|FRTS的取值
ZT35(2) = 1且|1
其余情况|0

STEP2：当ZT F（不用红外+单个斜装陀螺定姿），进行姿态预估，得到姿态角和角速度。
STEP3：进行运行段姿态确定，具体过程如下：
进行红外数据采集及处理和q及s姿态予估器
当星敏感器修正时间大于等于4500秒时，将星敏感器测量回路求得的姿态角和角速度，赋值为姿态角和角速度，
得到输入控制律的姿态角和角速度，
STEP4：进行运行段控制，具体过程如下：
根据ZT2的值进行飞轮控制
当ZT8  3且ZT9  3且ZT时，进行运行段喷气姿态控制
进行陀螺故障检测及选择
当ZT40(4) = 1时，进行数传天线捕获跟踪控制
STEP5：根据ZT7的取值，进行相应的帆板控制。
ZT7的值|处理
 8|进行运行段帆板控制
ZT7 = 0|发两翼帆板归零指令
ZT7 = 3|发左翼为90度，右翼为 -90度指令
ZT7 = 5|发左右皆为90度指令
ZT7 = 7|发左右皆为180度指令
ZT7 = 9|发指令
ZT7 = A|发指令
ZT7 = B|发指令
",0,1,0,0,0,0,0,0
"功能描述：利用数字太阳信息，进行太阳捕获，对太阳定向。
",0,1,0,0,0,0,0,0
"功能描述：接收同步控制
处理：根据同步字的编码内容进行相应的处理：",0,0,0,0,0,0,1,0
"需求名称|功能及处理描述
对地数传天线1数据的采集与处理|对地数传天线1 LTU控制指令
对地数传天线1的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线1 LTU发控制指令，获得对地数传天线1数据并处理成对应的角度等信息。
对地数传天线2数据的采集与处理|对地数传天线2
LTU控制指令|对地数传天线2的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向对地数传天线2 LTU发控制指令，获得对地数传天线2数据并处理成对应的角度等信息。
中继天线数据的采集与处理|中继天线LTU控制指令|中继天线的角度和角度偏差|在总线指令要求通讯允许的条件下，每500ms向中继天线 LTU发控制指令，获得中继天线数据并处理成对应的角度等信息。",0,0,0,0,0,1,0,0
"功能描述：接收OBDH时间
处理：按接收OBDH时间命令存储地址中内容的数据格式处理成星时的数据格式。此处理在中断中进行。",0,0,0,0,0,0,1,0
功能描述：根据星敏感器的输出数据判断陀螺故障。,0,1,0,0,0,0,0,0
"功能描述：进行系统故障的检测。
",0,1,0,0,0,0,0,0
"功能描述：当整星－Z 轴对日后，通过旋转Z 轴令目标矢量进入XOZ 平面
",0,1,0,0,0,0,0,0
"功能：利用星敏感器B的测量，修正姿态四元数与估计陀螺漂移。
输入：星敏感器B修正新息，四元数、陀螺常漂
输出：修正四元数、陀螺常漂
",0,1,0,0,0,0,0,0
"功能描述：在红外太阳定姿方式下计算四元数，在其余定姿方式下计算欧拉角。
",0,1,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|三浮陀螺数据的采集与处理|FREQ1.2.1|""三浮陀螺1553B取数指令
""|陀螺1-3的速度增量|在通讯允许的条件下（每个三浮陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是角速率数据，通过任务书给出的公式计算
|光纤陀螺数据的采集与处理|FREQ1.2.2|""光纤陀螺LTU取数指令
""|陀螺4-9的速度增量|在通讯允许的条件下（每个光纤陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是即为速度增量数据，直接乘当量就可以得到需要的结果；
",0,0,0,0,0,1,0,0
"功能描述：对地对日相互转换的过渡模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                            处理：
根据地面规划指令，使用CMG完成姿态快速机动，满足姿态条件自主退出该模式。
从进入该模式起，AOCC需每秒向引入的星敏发送星敏角速度限制指令TC_RATE_LIMIT指令。指令包含的参数计算见用户需求，指令格式见AOCC与星敏通信协议。使用单独的时间间隔计数器，并从第一个周期开始发送TC_RATE_LIMIT指令。
每个控制周期顺序调用用户需求中的逻辑：
调用轨道与星历；
调用CMG数据采集及处理；
调用部件故障检测与信号选取；
调用陀螺的数据处理；
调用四元数陀螺预估；
调用星敏感器数据处理；
if(MoveSTSInSystemFlag=1) 调用利用星敏感器的姿态确定；
elseif(MoveSTSInSystemFlag=2且 且SSTCatchSuc=0)   调用星敏感器对日定向的a项；
调用 .13（姿态修正及星敏粗姿态计算）；
调用机动目标姿态确定；
调用中继天线捕获跟踪控制；
调用对地数传天线捕获跟踪控制；
调用控制器输入量计算；
调用CMG奇异状态的判断及算法计算；
调用CMG的控制；
调用系统故障诊断；",0,1,0,0,0,0,0,0
功能描述：根据陀螺输入，预估卫星对地姿态。,0,1,0,0,0,0,0,0
功能描述：根据红外输初，计算太阳在本体坐标系中方位、姿态偏差、弦宽误差估计与量测新息。,0,1,0,0,0,0,0,0
"功能描述：利用星敏感器数据进行卫星姿态捕获。
",0,1,0,0,0,0,0,0
"功能描述：利用A，C头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.8。
STEP1：计算，将下标B换成C；FM3更改：若，则：，FSTD=1；
STEP2：计算，。的各项乘以，的各项乘以。将下标B换成C；
STEP3：计算q；
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算。",0,1,0,0,0,0,0,0
"功能描述：部件加电标志。与光纤陀螺通信功能。
处理：
功能编号|功能|引用文档
FREQ44|初始化|陀螺协议
FREQ45|陀螺使用要求|任务书
FREQ46|通信|陀螺协议
FREQ47|通信故障处理|任务书
FREQ48|数据解包与转换|陀螺协议
FREQ49|陀螺数据有效性判断、处理|任务书
FREQ50|陀螺模拟量采集、处理|任务书
FREQ51|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,1,0,0
"功能描述：对动量轮的角动量进行调整。
",0,1,0,0,0,0,0,0
功能描述：由GPS得到轨道外推的16根数。,0,1,0,0,0,0,0,0
"功能描述：根据天线安装定义和地面站坐标，实时计算天线和地面站的夹角。
",0,1,0,0,0,0,0,0
"功能描述：与数字太阳通信，发送取数指令，获得部件数据。                                                                                                                                                                                                                                                                                                                                                                                                                    处理：
在AOCC每个控制周期中可能会通过串口向数太发送控制指令或者接收下传数据，见任务书时序图。
功能编号|功能|引用文档
FREQ66|初始化|与一体化太阳通信协议
FREQ67|数太使用要求|任务书、数太协议
FREQ68|通信|任务书、数太协议
FREQ69|通信故障处理|任务书
FREQ70|数据解包与转换|数太协议
FREQ71|数太数据有效性判断、处理|任务书
FREQ72|数太模拟量采集、处理|预留
FREQ73|部件在轨转发（在轨修改）|预留
",0,0,0,0,0,1,0,0
"功能描述：采集星上时钟的计数值，计算星时及作相应的处理
处理：包括CPU内部星时时钟和CPU外部星时时钟的星时采集计算与校时。。
（1）CPU外部星时时钟的星时采集计算与校时
CPU外部星时时钟星时计算的输入为上一个周期对应的绝对星时t，和上个周期中控制周期星时锁存寄存器中读取的计数值为TOLD。在每个控制周期中处理过程如下：
STEP1：选取控制周期星时锁存通道，读取锁存的计算值，记为TNEW；
STEP2：计算TNEW减去TOLD的差值，记为DELTT（当量为1微秒）；
STEP3：本周期的绝对星时t=t+DELTT/1000000；
STEP4：保存本周期的计数值，即TOLD=TNEW。
CPU外部星时时钟星时校时包括OBDH校时和GPS高精度校时两种校时方式：
OBDH校时：也分为两种情况：一种是OBDH周期性向AOCC发送卫星时间，发送周期为1分钟。另一种是当在上电和复位后，由应用软件主动发出校时申请，完成校时；
GPS高精度校时。
OBDH星时校时为系统默认使用的校时方式。GPS秒脉冲高精度时间是否引入系统由注入指令执行控制：若注入指令表示“使用GPS秒脉冲高精度校时时间”，则当满足GPS秒脉冲高精度校时条件时AOCC应用软件仅进行GPS秒脉冲高精度校时时间的计算，系统使用该时间。GPS秒脉冲高精度方式优先级高于OBDH星时校时，当GPS秒脉冲校时时不再进行OBDH星时校时。如果连续超过1分钟均不满足GPS秒脉冲高精度校时条件，则可进行OBDH星时校时。一旦再满足GPS秒脉冲高精度校时条件则继续采用GPS秒脉冲高精度校时。其中GPS秒脉冲高精度校时条件及校时计算具体见任务书中规定。
（2）CPU内部星时时钟的星时采集计算与校时
CPU内部星时时钟星时计算方法。同CPU外部星时时钟星时计算；CPU内部星时时钟星时校时只包括OBDH校时：分为两种情况：一种是OBDH周期性向AOCC发送卫星时间，发送周期为1分钟。另一种是当在上电和复位后，由应用软件主动发出校时申请，完成校时。
星时的选取
根据注入的姿控数据块2中的CPU星时时钟选用标志来实现内部星时时钟和外部星时时钟的切换，默认为CPU外部星时时钟
均匀校时
内部和外部时钟星时计算中在计算完本周期绝对星时后增加每周期修正量，并在计算前先将它限幅到1毫秒，每周期的修正量初始为0，通过内存修改来修改该修正量。",0,0,0,0,1,0,0,0
功能描述：发送控制对数传天线的控制角度。,0,0,1,0,0,0,0,0
"功能描述：发送应急控制器重要数据。
处理：将应急控制器重要数据按照协议打包发送至发送应急控制器重要数据地址中。",0,0,0,0,0,0,0,1
"序|需求名称|编号|输入章节号|功能描述
|喷气开关逻辑相平面分区，喷气脉冲宽度计算|FREQ31|4.3.1.1|进行单轴相平面分区及控制规律计算
|三轴姿态喷气控制与推力器脉宽分配|FREQ32|4.3.1.3|为三轴姿态喷气控制选择推力器
|轨控发动机与其备份的使用|FREQ33|4.3.1.4|轨控模式时使用轨控发动机及其备份
|动量轮摩擦补偿计算|FREQ34|4.3.2.2|动量轮摩擦力矩的补偿电压计算
|动量轮角动量保持控制|FREQ35|4.3.2.3|计算将动量轮保持至标称角动量所需的电压
|动量轮的启动与保持|FREQ36|4.3.2.4|启动动量轮至标称角动量，并保持
|正常飞行模式动量轮分配电压计算|FREQ37|4.3.2.5|计算正常飞行模式轮控所需电压
|正常模式轮子保护与动量卸载|FREQ38|4.3.3.1|决定采用磁卸载还是喷气卸载方式，调用相应程序
|磁卸载计算|FREQ39|4.3.3.2|计算磁卸载所需的磁矩与磁力矩器工作电压
|结构滤波器计算|FREQ95|4.3.2.6|PID计算控制力矩经过结构滤波器后，改善姿态控制效果
|太阳定向主程序|FREQ40|4.4.3.3|搜索并捕获太阳，完成并保持帆板对太阳定向
|重捕地球与建立正常姿态（1）|FREQ41|4.4.4.1|在完成对日定向后，由地面指令转入重捕地球。在偏航捕获阶段，通过红外和太阳敏感器定姿，消除卫星的偏航角。在完成偏航捕获后，由红外地球敏感器测量信号进行计算得到俯仰角和滚动角，控制滚动、俯仰使其趋向于0
|捕获地球与建立正常姿态（2）|FREQ42|4.4.4.2|当红外敏感器故障时，在太阳定向完成后，利用数字太阳与星敏感器信息，进行全姿态捕获，并建立正常姿态。
|三轴等效角动量偏差|FREQ91|4.3.4.1|根据飞轮实测角动量和标称角动量计算三轴等效角动量偏差
|俯仰通道轮控算法|FREQ92|4.3.4.2|根据俯仰角和俯仰通道角动量偏差信息实现俯仰轴姿态控制
|磁进动、章动阻尼及俯仰轮卸载控制|FREQ93|4.3.4.3|通过磁力矩器，实现滚动-偏航轴的进动控制及章动阻尼，并对俯仰飞轮进行磁卸载
|三轴轮控算法|FREQ94|4.3.4.4|偏置动量轮处于力矩模式，根据红外地球敏感器测量信息计算得到的滚动角和俯仰角实现三轴姿态控制。滚动、俯仰轴采用角动量反馈方式控制，偏航轴采用耦合控制
|帆板捕获及跟踪控制|FREQ102|4.3.5|根据地面指令或自主使帆板跟踪太阳
|干扰补偿控制算法及动量轮分配电压计算|FREQ95|任务书的4.1.15|计算有效载荷干扰补偿控制电压，以及计算动量轮分配电压
|全姿态捕获动量轮控制方式主程序|FREQ40.5|4.4.5|全姿态捕获动量轮控制方式主程序
",0,1,0,0,0,0,0,0
"功能描述：利用太阳敏感器信息，进行太阳捕获，对太阳定向
",0,1,0,0,0,0,0,0
"序|需求名称|编号|输入|输出|功能及处理描述
|+Y帆板数据的采集与处理|FREQ1.6.1|""+Y帆板1553B取数指令（广播同步消息）
""|+Y帆板转角及状态信息|每周期无条件的向+Y帆板RT发取数指令，获得+Y帆板数据并处理成对应的角度。
|-Y帆板数据的采集与处理|FREQ1.6.2|-Y帆板1553B取数指令|-Y帆板转角及状态信息|每周期无条件的向-Y帆板RT发取数指令，获得-Y帆板数据并处理成对应的角度。
|+Y帆板控制指令的输出处理|FREQ1.6.3|""+Y帆板控制数据
""|+Y帆板控制指令消息输出|根据协议将+Y帆板的控制数据转换为相应的控制指令消息并输出
|-Y帆板控制指令的输出处理|FREQ1.6.4|""-Y帆板控制数据
""|-Y帆板控制指令消息输出|根据协议将-Y帆板的控制数据转换为相应的控制指令消息并输出
|帆板的程序注入修改|FREQ1.6.5|从OBDH收到的帆板需修改程序内容|帆板需修改程序内容|将从OBDH收到的帆板需修改程序内容，按内总线的格式发送给帆板RT需修改的程序内容
|帆板的内存下传|FREQ1.6.6|从OBDH收到的帆板内存下传设置指令|内存下传设置指令|地面注入帆板内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至帆板 RT。
",0,0,0,0,0,1,0,0
"    当由于陀螺故障或者动量轮故障不能构成PID 控制方式时，根据地面遥控
指令可以进入“偏置动量控制模式”。偏置动量轮处于力矩模式，可以根据红外
敏感器测量信息计算得到的滚动角和俯仰角。俯仰轴采用角动量反馈方式控制，
偏航轴采用耦合控制，滚动轴采用磁控或角动量反馈方式控制。处理同用户需求的4.3.4。具体包括的下一层功能点列表如下：
序|功能编号|功能描述|输入、输出及处理
1|FREQ4.14.1|三轴等效角动量偏差|
2|FREQ4.14.2|俯仰通道轮控算法|
3|FREQ4.14.3|磁进动、章动阻尼及俯仰轮卸载控制|
4|FREQ4.14.4|三轴轮控算法|
",0,0,0,0,1,0,0,0
"功能描述：利用估计的四元数转换姿态角，送给星敏感器的四元数。

",0,1,0,0,0,0,0,0
功能描述：接收总线指令                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     处理： 将接收总线指令存储地址中内容解包成总线指令的数据格式，根据不同的总线指令进行相应的处理。 ,0,0,0,0,0,0,1,0
"功能描述：自主对计算机进行切换。
处理：
OBC的A机和B机满足一定的条件下，可以进行切换。",0,0,0,1,0,0,0,0
功能描述：对星敏感器输出数据进行有效性判断。,0,1,0,0,0,0,0,0
功能描述：GPS定轨程序。,0,0,0,0,1,0,0,0
"功能描述：利用B头的测量数据修正与估计陀螺漂移。
处理：同用户需求的4.11
STEP1：计算，将下标A换成B；FM3更改：若，则：，FSTD=1；
STEP2：计算。的各项乘以，的各项乘以。将下标A换成B；
STEP3：计算q
STEP4：将32位定点数转换成24位浮点数；
STEP5：计算",0,1,0,0,0,0,0,0
"功能描述：根据任务要求，应用软件进行LTU初始化、1553B初始化、调用系统软件的StartStarTimer、变量的初始化
处理：
进行1553B初始化，处理过程见4.3.2的OBDH初始化功能
GPS秒脉冲信号接口寄存器初始化
设置3个星敏的 RTS信号为无效
把模式字初始化为零
上电时，将在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff；复位时，若在轨维护程序区未发生双错，则应用软件从三取二区恢复在轨注入模块地址映射表JumpSlot、继续运行在轨维护程序；若在轨维护程序区发生双错，则应用软件不恢复在轨注入模块地址映射表JumpSlot，同时在轨注入模块地址映射表中的模块ID的三区都置为0，把和注入模块的地址三区都置为0Xffffffff，运行原PROM区的函数模块
为变量赋初值，因为上电或复位时，系统软件都先把变量区清零，应用软件只需将不为零的变量赋值即可。",1,0,0,0,0,0,0,0
"功能描述：接收发送OBDH重要数据
处理：数据不需要应用软件处理。",0,0,0,0,0,0,1,0
"序|需求名称|编号|输入|输出|功能及处理描述
|三浮陀螺数据的采集与处理|FREQ1.2.1|""三浮陀螺1553B取数指令
""|陀螺1-6的速度增量|在通讯允许的条件下（每个三浮陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是角速率数据，通过任务书给出的公式计算
|光纤陀螺数据的采集与处理|FREQ1.2.2|""光纤陀螺LTU取数指令
""|陀螺79的速度增量|在通讯允许的条件下（每个光纤陀螺的当班标志为1），每周期向对应的陀螺RT发取数指令，获得陀螺数据并处理成对应的速度增量。获的是即为速度增量数据，直接乘当量就可以得到需要的结果；
",0,0,0,0,0,1,0,0
"功能描述：若AOCC与星敏感器通讯不成功，则记录星敏感器故障一次。若连续240次不成功，判断该星敏感器故障。若星敏感器连续1000次数据无效，需重新启动星敏感器。
",0,1,0,0,0,0,0,0
"功能：对日定向和对地定向的目标姿态确定。
",0,0,0,0,1,0,0,0
功能描述：启动飞轮或动量保持控制。,0,1,0,0,0,0,0,0
"序|需求名称|编号|输入章节号|功能描述
|姿态控制算法|FREQ4.0|5.4|选择控制方式，并计算控制输出
|喷气控制|FREQ4.1|5.4.1|为三轴姿态喷气控制选择喷管；并记录喷气时间等
|CMG控制说明|FREQ4.2|5.4.2.1|CMG控制说明
|CMG高速启动|FREQ4.4|5.4.2.2|启动CMG高速
|CMG群角动量释放|FREQ4.5|5.4.2.3|释放CMG群积累的角动量
|姿态控制力矩及CMG框架指令计算|FREQ4.6|5.4.2.4|使用红外、星敏、太阳定姿时，计算CMG的框架角速率指令
|偏置动量的CMG指令计算|FREQ4.7|5.4.2.5|计算在整星角动量偏置下，计算CMG控制时的框架角速率指令
|喷气卸载条件计算|FREQ4.8|5.4.3|喷气卸载进入和退出条件计算
|CMG数据处理|FREQ4.9|5.4.4|CMG数据处理
|磁卸载控制|FREQ4.10|5.4.5|根据合成角动量及地磁场强度决定并输出磁棒控制电压
|地面站位置计算|FREQ4.11|5.6.1|地面站赤经赤纬计算
|运行段帆板控制|FREQ4.12|5.5.1|三轴稳定模式下的帆板控制
|太阳帆板自主跟踪控制|FREQ4.13|5.5.2|根据帆板角误差、控制帆板跟踪太阳
|数传天线指向控制|FREQ4.14|5.6.2|根据指令完成数传天线的指向控制
|中继轨道计算|FREQ4.21|5.7.1|根据指令完成数传天线的指向控制
|中继天线指向控制|FREQ4.22|5.7.2和5.7.3|根据指令完成中继天线的指向控制
|CMG群标称角动量维持算法算法产品规范|FREQ4.15|/|规范化算法：
|直线型相平面喷气姿态控制算法产品规范|FREQ4.16|/|规范化算法：
|SGCMG群框架角速度指令解算算法产品规范|FREQ4.17|/|规范化算法：
|四阶结构滤波器算法产品规范|FREQ4.18|/|规范化算法：
|连续电压式磁卸载算法产品规范|FREQ4.19|/|规范化算法：
|地面目标矢量计算算法产品规范|FREQ4.20|/|规范化算法：
|双脉冲变轨|FREQ4.21|""任务书的
4.2.3""|根据地面注入的指令可实现两次轨控的功能
|3CMG框架角速度 指令解算|FREQ4.22|5.4.2.6|当采用3CMG进行姿态控制时，根据控制器计算出的力矩，实现CMG的框架角速度解算。
",0,1,0,0,0,0,0,0
"功能描述：推力器喷气状态清零
",0,1,0,0,0,0,0,0
"    各个模式切换的功能点列表如下：
序|需求名称|编号|输入章节号|功能描述
|主动段模式切换|FREQ5.1.0|4|主动段模式切换条件判断及转出设置
|入轨段控制模式切换|FREQ5.1.1|4.1|入轨段控制模式切换条件判断及转出设置
|正常对地运行模式切换|FREQ5.1.2|4.2|正常对地运行模式切换条件判断及转出设置
|点对点机动模式切换|FREQ5.1.3|4.3|点对点机动模式切换条件判断及转出设置
|偏置飞行模式切换|FREQ5.1.5|4.4|偏置飞行模式切换条件判断及转出设置
|轨控模式切换|FREQ5.1.8|4.5|轨控模式切换条件判断及转出设置
|全姿态捕获模式切换|FREQ5.1.9|4.10|全姿态捕获模式切换条件判断及转出设置
|无控模式切换|FREQ5.1.10|4.11|无控模式切换条件判断及转出设置
|陀螺标定模式切换|FREQ5.1.11|4.8|陀螺标定模式切换条件判断及转出设置
|惯性定向模式切换|FREQ5.1.12|4.6|陀螺标定模式切换条件判断及转出设置

切换条件具体见用户需求4。CCU切机或复位后通过OBDH恢复重要数据来恢复模式，具体见重要数据文件要求。",0,1,0,0,0,0,0,0
功能描述：使卫星的角速度阻尼下来。,0,1,0,0,0,0,0,0
"功能描述：卫星绕俯仰轴转动，直到红外搜索到地球。
",0,1,0,0,0,0,0,0
"功能描述：利用动量轮控制电压与动量轮转速的控制关系诊断动量轮
",0,1,0,0,0,0,0,0
功能描述：：检测工作中的动量轮的故障并设置BZ3。,0,1,0,0,0,0,0,0
功能描述：星敏感器数据处理,0,0,0,0,0,1,0,0
"功能：利用星敏感器A、C的测量，修正姿态四元数与姿态角速度。
调用条件：见用户需求5.2.6节。
周期：0.125秒
输入：WorkMode， ， 。
输出：，
处理
见用户需求5.2.6.11。",0,1,0,0,0,0,0,0
"需求名称|功能及处理描述
ACU模拟量数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发模拟量数据采集指令，获得ACU数据并处理成对应的模拟量信息。
ACU状态数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发各种状态数据采集指令，获得ACU数据并处理成对应的状态信息。
ACU中控制指令的输出处理|根据通讯协议，将计算得到的控制数据转换为消息需要的格式并输出。
MW数据的采集与处理|在通讯允许的条件下，每周期向ACU RT发MW数据采集指令，获得ACU数据并处理成对应的MW的角动量。
部件加断电指令的处理|根据通讯协议，将需要发送的加断电指令转换为消息需要的格式并输出
ACU保存CCU的重要数据|AOCC每三个控制周期将重要数据发送给ACU（驱动控制单元）
从ACU恢复CCU的重要数据|上电/复位后应用软件首先从ACU恢复重要数据
ACU的程序注入修改|将从OBDH收到的ACU需修改程序内容，按内总线的格式发送给ACU RT需修改的程序内容
ACU的内存下传|地面注入ACU内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至ACU RT。
自锁阀操作|根据任务书的要求通过1553B向ACU输出自锁阀开关控制指令",0,0,0,0,0,1,0,0
"需求名称|功能及处理描述
+Y帆板数据的采集与处理|每周期无条件的向+Y帆板RT发取数指令，获得+Y帆板数据并处理成对应的角度。CCU应用软件取数消息与同步消息的发送时间间隔不小于2ms。
-Y帆板数据的采集与处理|每周期无条件的向-Y帆板RT发取数指令，获得-Y帆板数据并处理成对应的角度。
+Y帆板控制指令的输出处理|根据协议将+Y帆板的控制数据转换为相应的控制指令消息并输出
-Y帆板控制指令的输出处理|根据协议将-Y帆板的控制数据转换为相应的控制指令消息并输出
帆板的程序注入修改|将从OBDH收到的帆板需修改程序内容，按内总线的格式发送给帆板RT需修改的程序内容
帆板的内存下传|地面注入帆板内存下传设置指令，应用软件进行判断后转发“内存下传设置指令”至帆板 RT。",0,0,0,0,0,1,0,0
"功能描述：计算将动量轮保持至标称角动量所需的电压。
输入：动量轮启动的程控指令
      实测飞轮角动量，
      标称角动量：，
      角动量偏差积分项：， ，",0,0,0,1,0,0,0,0
"软件需求名称：模式控制 
需求类别：其他 
软件需求描述：见“用户需求”和“任务书”4.1.10“工作模式要求”2）。 
表格工作项|软件需求标识|软件需求名称|
FREQ12.3-WM-1|太阳定向模式|《用户需求》4.1.1【调用流程】|
FREQ12.3-WM-2|恒星定向1模式|《用户需求》4.1.2【调用流程】|
FREQ12.3-WM-3|惯性调姿模式|《用户需求》4.1.3【调用流程】|
FREQ12.3-WM-4|恒星定向2模式|《用户需求》4.1.4【调用流程】|
FREQ12.3-WM-5|轨控定向模式|《用户需求》4.1.5【调用流程】|
FREQ12.3-WM-6|中继跟踪模式|《用户需求》4.1.6【调用流程】|
FREQ12.3-WM-7|速率阻尼模式|《用户需求》4.1.7【调用流程】|
FREQ12.3-WM-8|无控模式|《用户需求》4.1.8【调用流程】|
",0,1,0,0,0,0,0,0
功能描述：接收遥控固定参数注入块的光纤红外控制命令参数,0,0,0,0,0,0,1,0
功能描述：接收遥控固定参数注入块的中继天线系数,0,0,0,0,0,0,1,0
"功能描述：使用星敏感器A、C的测量，修正姿态四元数与估计陀螺漂移。
",0,1,0,0,0,0,0,0
"功能描述：根据陀螺输入，预估卫星对地姿态。
",0,1,0,0,0,0,0,0
"功能描述：根据陀螺输出，预估卫星姿态和姿态角速度。                                                                                                                                                                                                                                                                                                                                                                                                                              输入：上周期姿态角估值
陀螺数据处理的输出 
陀螺系统在星体三轴方向等效的漂移估值 (量纲：弧度/小时)（消初偏时取装订值）。
卫星外推轨道计算输出：",0,1,0,0,0,0,0,0
"功能描述：星上实时计算追踪器轨道
",0,1,0,0,0,0,0,0
功能描述：确定动量轮角动量数据的有效性。,0,1,0,0,0,0,0,0
功能描述：确定轨道外推初值，并调用轨道计算。,0,1,0,0,0,0,0,0
"功能描述：根据框架角偏差计算指令转速。
处理：主要处理过程如下：
当接收到由OBDH发送来的中继快扫到位指令,进入天线预置状态，令FAFP=1，预置的目标角为命令块中的-10对应时刻通过轨道计算得到的天线框架角。控制中继天线转动快扫到达目标位置。当时间大于-10后，退出预置状态令FAFP=0。
当接收到由OBDH发送来的中继复位指令,进入天线复位状态，令FARP=1。根据命令块中数据标志来确定天线要复位的位置。如果标志为55H，天线复位到命令块中指定的角度位置；如果标志为FFH，则天线复位到零位。
当地面上行注入ZT40（1）=1时，天线进入螺旋扫描状态。按照特定的步长控制天线转动，当螺旋扫描持续的时间超过注入的天线捕获扫描时间时，将ZT40(1) 置0退出螺旋扫描状态。
当接收到由OBDH发送来的中继程序跟踪停止指令，停止向中继捕获跟踪控制单元发送控制信息，并设定标志传到遥测。其余情况下天线处于程序跟踪状态。
卫星增加了侧摆中继时传的工作模式，快摆时工作时序见任务书.5。",0,1,0,0,0,0,0,0
"序|需求名称|编号|功能及处理描述
|数字太阳数据的采集与处理|FREQ1.1|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
|模拟太阳数据的采集与处理|FREQ1.2|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
|01太阳数据的采集与处理|FREQ1.3|""选择通讯的太阳LTU，发取数指令，采集LTU发送的数据，并处理成需要的数据格式。
""
",0,0,0,0,0,1,0,0
"功能描述：与地检通信，获得地检数据。
处理：
功能编号|功能|引用文档
FREQ82|初始化|任务书
FREQ83|地检使用要求|任务书
FREQ84|通信(串口)|任务书
FREQ85|通信故障处理|任务书
FREQ86|数据解包与转换|任务书
FREQ87|地检数据有效性判断、处理|任务书
FREQ88|地检模拟量采集、处理|预留
FREQ89|部件在轨转发（在轨修改）|预留
",0,0,1,0,0,0,0,0
功能描述：接收同步字,0,0,0,0,0,0,1,0
根据任务要求，应用软件进行LTU初始化、1553B初始化、调用系统软件的StartStarTimer、变量的初始化。,1,0,0,0,0,0,0,0
"功能描述：与星敏感器通信，获得星敏感器数据。
处理：
见星敏通信协议、任务书附录1时序。
功能编号|功能|引用文档
FREQ53|初始化|星敏协议
FREQ54|星敏使用要求|任务书
FREQ55|通信|星敏协议
FREQ56|通信故障处理|任务书
FREQ57|数据解包与转换|星敏协议
FREQ58|星敏数据有效性判断、处理|任务书
FREQ59|星敏模拟量采集、处理|任务书
FREQ60|部件在轨转发（在轨修改）|任务书

3）GPS高精度校时与星敏感器数据的使用
功能描述：根据GPS秒脉冲，秒脉冲广播，进行GPS高精度校时和星敏感器时标处理。
输入：地面遥控指令，GPS秒脉冲，秒脉冲广播，星敏感器数据。
输出：星时，时标，星敏感器数据广播。
处理：",0,0,0,0,0,1,0,0
